function createBibliaTabs(){"use strict";return{standard:0,home:0,library:1,search:2,notes:3}}function createBibliaConfig(e){"use strict";return{tenant:e.biblia,tenantDisplayName:"Biblia.com"}}function FontSlider(e,t,n,i,r){function o(e,t){r(t.value)}var s=t-1,a=n,l=e.find(".slider"),u=e.find(".small-font a"),c=e.find(".large-font a");l.slider({value:i,min:0,max:s,slide:o,change:function(e,t){e.originalEvent||o(e,t)}}),u.click(function(e){e.preventDefault(),e.stopPropagation(),l.slider("value",l.slider("value")-1)}),c.click(function(e){e.preventDefault(),e.stopPropagation(),l.slider("value",l.slider("value")+1)});for(var h=1;h<s;h++){var f=$("<div></div>").addClass("notch").css("left",10*h+"%");h==a&&f.addClass("defaultNotch"),l.append(f)}this.setLocation=function(e){e!==l.slider("value")&&l.slider("value",e)}}!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t="length"in e&&e.length,n=X.type(e);return"function"!==n&&!X.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e))}function i(e,t,n){if(X.isFunction(t))return X.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return X.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(se.test(t))return X.filter(t,e,n);t=X.filter(t,e)}return X.grep(e,function(e){return G.call(t,e)>=0!==n})}function r(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t=fe[e]={};return X.each(e.match(he)||[],function(e,n){t[n]=!0}),t}function s(){Y.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1),X.ready()}function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=X.expando+a.uid++}function l(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(be,"-$1").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:ve.test(n)?X.parseJSON(n):n)}catch(e){}me.set(e,t,n)}else n=void 0;return n}function u(){return!0}function c(){return!1}function h(){try{return Y.activeElement}catch(e){}}function f(e,t){return X.nodeName(e,"table")&&X.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function d(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function p(e){var t=Ne.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function g(e,t){for(var n=0,i=e.length;n<i;n++)ge.set(e[n],"globalEval",!t||ge.get(t[n],"globalEval"))}function m(e,t){var n,i,r,o,s,a,l,u;if(1===t.nodeType){if(ge.hasData(e)&&(o=ge.access(e),s=ge.set(t,o),u=o.events)){delete s.handle,s.events={};for(r in u)for(n=0,i=u[r].length;n<i;n++)X.event.add(t,r,u[r][n])}me.hasData(e)&&(a=me.access(e),l=X.extend({},a),me.set(t,l))}}function v(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&X.nodeName(e,t)?X.merge([e],n):n}function b(e,t){var n=t.nodeName.toLowerCase();"input"===n&&we.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function y(t,n){var i,r=X(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(i=e.getDefaultComputedStyle(r[0]))?i.display:X.css(r[0],"display");return r.detach(),o}function R(e){var t=Y,n=Me[e];return n||(n=y(e,t),"none"!==n&&n||(Le=(Le||X("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Le[0].contentDocument,t.write(),t.close(),n=y(e,t),Le.detach()),Me[e]=n),n}function C(e,t,n){var i,r,o,s,a=e.style;return n=n||Ue(e),n&&(s=n.getPropertyValue(t)||n[t]),n&&(""!==s||X.contains(e.ownerDocument,e)||(s=X.style(e,t)),Oe.test(s)&&Be.test(t)&&(i=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=r,a.maxWidth=o)),void 0!==s?s+"":s}function w(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function x(e,t){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),i=t,r=Ge.length;r--;)if((t=Ge[r]+n)in e)return t;return i}function k(e,t,n){var i=$e.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function S(e,t,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,s=0;o<4;o+=2)"margin"===n&&(s+=X.css(e,n+Re[o],!0,r)),i?("content"===n&&(s-=X.css(e,"padding"+Re[o],!0,r)),"margin"!==n&&(s-=X.css(e,"border"+Re[o]+"Width",!0,r))):(s+=X.css(e,"padding"+Re[o],!0,r),"padding"!==n&&(s+=X.css(e,"border"+Re[o]+"Width",!0,r)));return s}function T(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=Ue(e),s="border-box"===X.css(e,"boxSizing",!1,o);if(r<=0||null==r){if(r=C(e,t,o),(r<0||null==r)&&(r=e.style[t]),Oe.test(r))return r;i=s&&(Q.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+S(e,t,n||(s?"border":"content"),i,o)+"px"}function P(e,t){for(var n,i,r,o=[],s=0,a=e.length;s<a;s++)i=e[s],i.style&&(o[s]=ge.get(i,"olddisplay"),n=i.style.display,t?(o[s]||"none"!==n||(i.style.display=""),""===i.style.display&&Ce(i)&&(o[s]=ge.access(i,"olddisplay",R(i.nodeName)))):(r=Ce(i),"none"===n&&r||ge.set(i,"olddisplay",r?n:X.css(i,"display"))));for(s=0;s<a;s++)i=e[s],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[s]||"":"none"));return e}function _(e,t,n,i,r){return new _.prototype.init(e,t,n,i,r)}function I(){return setTimeout(function(){Ve=void 0}),Ve=X.now()}function q(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)n=Re[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function j(e,t,n){for(var i,r=(Ze[t]||[]).concat(Ze["*"]),o=0,s=r.length;o<s;o++)if(i=r[o].call(n,t,e))return i}function E(e,t,n){var i,r,o,s,a,l,u,c=this,h={},f=e.style,d=e.nodeType&&Ce(e),p=ge.get(e,"fxshow");n.queue||(a=X._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,c.always(function(){c.always(function(){a.unqueued--,X.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],u=X.css(e,"display"),"inline"===("none"===u?ge.get(e,"olddisplay")||R(e.nodeName):u)&&"none"===X.css(e,"float")&&(f.display="inline-block")),n.overflow&&(f.overflow="hidden",c.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(i in t)if(r=t[i],Ke.exec(r)){if(delete t[i],o=o||"toggle"===r,r===(d?"hide":"show")){if("show"!==r||!p||void 0===p[i])continue;d=!0}h[i]=p&&p[i]||X.style(e,i)}else u=void 0;if(X.isEmptyObject(h))"inline"===("none"===u?R(e.nodeName):u)&&(f.display=u);else{p?"hidden"in p&&(d=p.hidden):p=ge.access(e,"fxshow",{}),o&&(p.hidden=!d),d?X(e).show():c.done(function(){X(e).hide()}),c.done(function(){var t;ge.remove(e,"fxshow");for(t in h)X.style(e,t,h[t])});for(i in h)s=j(d?p[i]:0,i,c),i in p||(p[i]=s.start,d&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}}function N(e,t){var n,i,r,o,s;for(n in e)if(i=X.camelCase(n),r=t[i],o=e[n],X.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),(s=X.cssHooks[i])&&"expand"in s){o=s.expand(o),delete e[i];for(n in o)n in e||(e[n]=o[n],t[n]=r)}else t[i]=r}function A(e,t,n){var i,r,o=0,s=Xe.length,a=X.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=Ve||I(),n=Math.max(0,u.startTime+u.duration-t),i=n/u.duration||0,o=1-i,s=0,l=u.tweens.length;s<l;s++)u.tweens[s].run(o);return a.notifyWith(e,[u,o,n]),o<1&&l?n:(a.resolveWith(e,[u]),!1)},u=a.promise({elem:e,props:X.extend({},t),opts:X.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Ve||I(),duration:n.duration,tweens:[],createTween:function(t,n){var i=X.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var n=0,i=t?u.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)u.tweens[n].run(1);return t?a.resolveWith(e,[u,t]):a.rejectWith(e,[u,t]),this}}),c=u.props;for(N(c,u.opts.specialEasing);o<s;o++)if(i=Xe[o].call(u,e,c,u.opts))return i;return X.map(c,j,u),X.isFunction(u.opts.start)&&u.opts.start.call(e,u),X.fx.timer(X.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function D(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(he)||[];if(X.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function L(e,t,n,i){function r(a){var l;return o[a]=!0,X.each(e[a]||[],function(e,a){var u=a(t,n,i);return"string"!=typeof u||s||o[u]?s?!(l=u):void 0:(t.dataTypes.unshift(u),r(u),!1)}),l}var o={},s=e===gt;return r(t.dataTypes[0])||!o["*"]&&r("*")}function M(e,t){var n,i,r=X.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&X.extend(!0,e,i),e}function B(e,t,n){for(var i,r,o,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}s||(s=r)}o=o||s}if(o)return o!==l[0]&&l.unshift(o),n[o]}function O(e,t,n,i){var r,o,s,a,l,u={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)u[s.toLowerCase()]=e.converters[s];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(s=u[l+" "+o]||u["* "+o]))for(r in u)if(a=r.split(" "),a[1]===o&&(s=u[l+" "+a[0]]||u["* "+a[0]])){!0===s?s=u[r]:!0!==u[r]&&(o=a[0],c.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function U(e,t,n,i){var r;if(X.isArray(t))X.each(t,function(t,r){n||Rt.test(e)?i(e,r):U(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==X.type(t))i(e,t);else for(r in t)U(e+"["+r+"]",t[r],n,i)}function F(e){return X.isWindow(e)?e:9===e.nodeType&&e.defaultView}var $=[],H=$.slice,z=$.concat,W=$.push,G=$.indexOf,V={},J=V.toString,K=V.hasOwnProperty,Q={},Y=e.document,X=function(e,t){return new X.fn.init(e,t)},Z=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ee=/^-ms-/,te=/-([\da-z])/gi,ne=function(e,t){return t.toUpperCase()};X.fn=X.prototype={jquery:"2.1.4",constructor:X,selector:"",length:0,toArray:function(){return H.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:H.call(this)},pushStack:function(e){var t=X.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return X.each(this,e,t)},map:function(e){return this.pushStack(X.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(H.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:W,sort:$.sort,splice:$.splice},X.extend=X.fn.extend=function(){var e,t,n,i,r,o,s=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[a]||{},a++),"object"==typeof s||X.isFunction(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],i=e[t],s!==i&&(u&&i&&(X.isPlainObject(i)||(r=X.isArray(i)))?(r?(r=!1,o=n&&X.isArray(n)?n:[]):o=n&&X.isPlainObject(n)?n:{},s[t]=X.extend(u,o,i)):void 0!==i&&(s[t]=i));return s},X.extend({expando:"jQuery"+("2.1.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===X.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!X.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"===X.type(e)&&!e.nodeType&&!X.isWindow(e)&&!(e.constructor&&!K.call(e.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?V[J.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;(e=X.trim(e))&&(1===e.indexOf("use strict")?(t=Y.createElement("script"),t.text=e,Y.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(ee,"ms-").replace(te,ne)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var r=0,o=e.length,s=n(e);if(i){if(s)for(;r<o&&!1!==t.apply(e[r],i);r++);else for(r in e)if(!1===t.apply(e[r],i))break}else if(s)for(;r<o&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(Z,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?X.merge(i,"string"==typeof e?[e]:e):W.call(i,e)),i},inArray:function(e,t,n){return null==t?-1:G.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,o=e.length,s=!n;r<o;r++)!t(e[r],r)!==s&&i.push(e[r]);return i},map:function(e,t,i){var r,o=0,s=e.length,a=n(e),l=[];if(a)for(;o<s;o++)null!=(r=t(e[o],o,i))&&l.push(r);else for(o in e)null!=(r=t(e[o],o,i))&&l.push(r);return z.apply([],l)},guid:1,proxy:function(e,t){var n,i,r;if("string"==typeof t&&(n=e[t],t=e,e=n),X.isFunction(e))return i=H.call(arguments,2),r=function(){return e.apply(t||this,i.concat(H.call(arguments)))},r.guid=e.guid=e.guid||X.guid++,r},now:Date.now,support:Q}),X.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){V["[object "+t+"]"]=t.toLowerCase()});var ie=function(e){function t(e,t,n,i){var r,o,s,a,u,h,f,d,p,g;if((t?t.ownerDocument||t:B)!==q&&I(t),t=t||q,n=n||[],a=t.nodeType,"string"!=typeof e||!e||1!==a&&9!==a&&11!==a)return n;if(!i&&E){if(11!==a&&(r=me.exec(e)))if(s=r[1]){if(9===a){if(!(o=t.getElementById(s))||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(s))&&L(t,o)&&o.id===s)return n.push(o),n}else{if(r[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((s=r[3])&&y.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(s)),n}if(y.qsa&&(!N||!N.test(e))){if(d=f=M,p=t,g=1!==a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(h=x(e),(f=t.getAttribute("id"))?d=f.replace(be,"\\$&"):t.setAttribute("id",d),d="[id='"+d+"'] ",u=h.length;u--;)h[u]=d+c(h[u]);p=ve.test(e)&&l(t.parentNode)||t,g=h.join(",")}if(g)try{return Q.apply(n,p.querySelectorAll(g)),n}catch(e){}finally{f||t.removeAttribute("id")}}}return S(e.replace(se,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>R.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[M]=!0,e}function r(e){var t=q.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),i=e.length;i--;)R.attrHandle[n[i]]=t}function s(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||W)-(~e.sourceIndex||W);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return i(function(t){return t=+t,i(function(n,i){for(var r,o=e([],n.length,t),s=o.length;s--;)n[r=o[s]]&&(n[r]=!(i[r]=n[r]))})})}function l(e){return e&&void 0!==e.getElementsByTagName&&e}function u(){}function c(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function h(e,t,n){var i=t.dir,r=n&&"parentNode"===i,o=U++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,o)}:function(t,n,s){var a,l,u=[O,o];if(s){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,s))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if(l=t[M]||(t[M]={}),(a=l[i])&&a[0]===O&&a[1]===o)return u[2]=a[2];if(l[i]=u,u[2]=e(t,n,s))return!0}}}function f(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function d(e,n,i){for(var r=0,o=n.length;r<o;r++)t(e,n[r],i);return i}function p(e,t,n,i,r){for(var o,s=[],a=0,l=e.length,u=null!=t;a<l;a++)(o=e[a])&&(n&&!n(o,i,r)||(s.push(o),u&&t.push(a)));return s}function g(e,t,n,r,o,s){return r&&!r[M]&&(r=g(r)),o&&!o[M]&&(o=g(o,s)),i(function(i,s,a,l){var u,c,h,f=[],g=[],m=s.length,v=i||d(t||"*",a.nodeType?[a]:a,[]),b=!e||!i&&t?v:p(v,f,e,a,l),y=n?o||(i?e:m||r)?[]:s:b;if(n&&n(b,y,a,l),r)for(u=p(y,g),r(u,[],a,l),c=u.length;c--;)(h=u[c])&&(y[g[c]]=!(b[g[c]]=h));if(i){if(o||e){if(o){for(u=[],c=y.length;c--;)(h=y[c])&&u.push(b[c]=h);o(null,y=[],u,l)}for(c=y.length;c--;)(h=y[c])&&(u=o?X(i,h):f[c])>-1&&(i[u]=!(s[u]=h))}}else y=p(y===s?y.splice(m,y.length):y),o?o(null,s,y,l):Q.apply(s,y)})}function m(e){for(var t,n,i,r=e.length,o=R.relative[e[0].type],s=o||R.relative[" "],a=o?1:0,l=h(function(e){return e===t},s,!0),u=h(function(e){return X(t,e)>-1},s,!0),d=[function(e,n,i){var r=!o&&(i||n!==T)||((t=n).nodeType?l(e,n,i):u(e,n,i));return t=null,r}];a<r;a++)if(n=R.relative[e[a].type])d=[h(f(d),n)];else{if(n=R.filter[e[a].type].apply(null,e[a].matches),n[M]){for(i=++a;i<r&&!R.relative[e[i].type];i++);return g(a>1&&f(d),a>1&&c(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(se,"$1"),n,a<i&&m(e.slice(a,i)),i<r&&m(e=e.slice(i)),i<r&&c(e))}d.push(n)}return f(d)}function v(e,n){var r=n.length>0,o=e.length>0,s=function(i,s,a,l,u){var c,h,f,d=0,g="0",m=i&&[],v=[],b=T,y=i||o&&R.find.TAG("*",u),C=O+=null==b?1:Math.random()||.1,w=y.length;for(u&&(T=s!==q&&s);g!==w&&null!=(c=y[g]);g++){if(o&&c){for(h=0;f=e[h++];)if(f(c,s,a)){l.push(c);break}u&&(O=C)}r&&((c=!f&&c)&&d--,i&&m.push(c))}if(d+=g,r&&g!==d){for(h=0;f=n[h++];)f(m,v,s,a);if(i){if(d>0)for(;g--;)m[g]||v[g]||(v[g]=J.call(l));v=p(v)}Q.apply(l,v),u&&!i&&v.length>0&&d+n.length>1&&t.uniqueSort(l)}return u&&(O=C,T=b),m};return r?i(s):s}var b,y,R,C,w,x,k,S,T,P,_,I,q,j,E,N,A,D,L,M="sizzle"+1*new Date,B=e.document,O=0,U=0,F=n(),$=n(),H=n(),z=function(e,t){return e===t&&(_=!0),0},W=1<<31,G={}.hasOwnProperty,V=[],J=V.pop,K=V.push,Q=V.push,Y=V.slice,X=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},Z="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ne=te.replace("w","w#"),ie="\\["+ee+"*("+te+")(?:"+ee+"*([*^$|!~]?=)"+ee+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ne+"))|)"+ee+"*\\]",re=":("+te+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",oe=new RegExp(ee+"+","g"),se=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),ae=new RegExp("^"+ee+"*,"+ee+"*"),le=new RegExp("^"+ee+"*([>+~]|"+ee+")"+ee+"*"),ue=new RegExp("="+ee+"*([^\\]'\"]*?)"+ee+"*\\]","g"),ce=new RegExp(re),he=new RegExp("^"+ne+"$"),fe={ID:new RegExp("^#("+te+")"),CLASS:new RegExp("^\\.("+te+")"),TAG:new RegExp("^("+te.replace("w","w*")+")"),ATTR:new RegExp("^"+ie),PSEUDO:new RegExp("^"+re),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),bool:new RegExp("^(?:"+Z+")$","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},de=/^(?:input|select|textarea|button)$/i,pe=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,be=/'|\\/g,ye=new RegExp("\\\\([\\da-f]{1,6}"+ee+"?|("+ee+")|.)","ig"),Re=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},Ce=function(){I()};try{Q.apply(V=Y.call(B.childNodes),B.childNodes),V[B.childNodes.length].nodeType}catch(e){Q={apply:V.length?function(e,t){K.apply(e,Y.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}y=t.support={},w=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},I=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:B;return i!==q&&9===i.nodeType&&i.documentElement?(q=i,j=i.documentElement,n=i.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",Ce,!1):n.attachEvent&&n.attachEvent("onunload",Ce)),E=!w(i),y.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),y.getElementsByTagName=r(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),y.getElementsByClassName=ge.test(i.getElementsByClassName),y.getById=r(function(e){return j.appendChild(e).id=M,!i.getElementsByName||!i.getElementsByName(M).length}),y.getById?(R.find.ID=function(e,t){if(void 0!==t.getElementById&&E){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},R.filter.ID=function(e){var t=e.replace(ye,Re);return function(e){return e.getAttribute("id")===t}}):(delete R.find.ID,R.filter.ID=function(e){var t=e.replace(ye,Re);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),R.find.TAG=y.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):y.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},R.find.CLASS=y.getElementsByClassName&&function(e,t){if(E)return t.getElementsByClassName(e)},A=[],N=[],(y.qsa=ge.test(i.querySelectorAll))&&(r(function(e){j.appendChild(e).innerHTML="<a id='"+M+"'></a><select id='"+M+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&N.push("[*^$]="+ee+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||N.push("\\["+ee+"*(?:value|"+Z+")"),e.querySelectorAll("[id~="+M+"-]").length||N.push("~="),e.querySelectorAll(":checked").length||N.push(":checked"),e.querySelectorAll("a#"+M+"+*").length||N.push(".#.+[+~]")}),r(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&N.push("name"+ee+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||N.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),N.push(",.*:")})),(y.matchesSelector=ge.test(D=j.matches||j.webkitMatchesSelector||j.mozMatchesSelector||j.oMatchesSelector||j.msMatchesSelector))&&r(function(e){y.disconnectedMatch=D.call(e,"div"),D.call(e,"[s!='']:x"),A.push("!=",re)}),N=N.length&&new RegExp(N.join("|")),A=A.length&&new RegExp(A.join("|")),t=ge.test(j.compareDocumentPosition),L=t||ge.test(j.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},z=t?function(e,t){if(e===t)return _=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!y.sortDetached&&t.compareDocumentPosition(e)===n?e===i||e.ownerDocument===B&&L(B,e)?-1:t===i||t.ownerDocument===B&&L(B,t)?1:P?X(P,e)-X(P,t):0:4&n?-1:1)}:function(e,t){if(e===t)return _=!0,0;var n,r=0,o=e.parentNode,a=t.parentNode,l=[e],u=[t];if(!o||!a)return e===i?-1:t===i?1:o?-1:a?1:P?X(P,e)-X(P,t):0;if(o===a)return s(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;l[r]===u[r];)r++;return r?s(l[r],u[r]):l[r]===B?-1:u[r]===B?1:0},i):q},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==q&&I(e),n=n.replace(ue,"='$1']"),y.matchesSelector&&E&&(!A||!A.test(n))&&(!N||!N.test(n)))try{var i=D.call(e,n);if(i||y.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return t(n,q,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==q&&I(e),L(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==q&&I(e);var n=R.attrHandle[t.toLowerCase()],i=n&&G.call(R.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==i?i:y.attributes||!E?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(_=!y.detectDuplicates,P=!y.sortStable&&e.slice(0),e.sort(z),_){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return P=null,e},C=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=C(t);return n},R=t.selectors={cacheLength:50,createPseudo:i,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ye,Re),e[3]=(e[3]||e[4]||e[5]||"").replace(ye,Re),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ce.test(n)&&(t=x(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ye,Re).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=F[e+" "];return t||(t=new RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&F(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var o=t.attr(r,e);return null==o?"!="===n:!n||(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o.replace(oe," ")+" ").indexOf(i)>-1:"|="===n&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var u,c,h,f,d,p,g=o!==s?"nextSibling":"previousSibling",m=t.parentNode,v=a&&t.nodeName.toLowerCase(),b=!l&&!a;if(m){if(o){for(;g;){for(h=t;h=h[g];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[s?m.firstChild:m.lastChild],s&&b){for(c=m[M]||(m[M]={}),u=c[e]||[],d=u[0]===O&&u[1],f=u[0]===O&&u[2],h=d&&m.childNodes[d];h=++d&&h&&h[g]||(f=d=0)||p.pop();)if(1===h.nodeType&&++f&&h===t){c[e]=[O,d,f];break}}else if(b&&(u=(t[M]||(t[M]={}))[e])&&u[0]===O)f=u[1];else for(;(h=++d&&h&&h[g]||(f=d=0)||p.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++f||(b&&((h[M]||(h[M]={}))[e]=[O,f]),h!==t)););return(f-=r)===i||f%i==0&&f/i>=0}}},PSEUDO:function(e,n){var r,o=R.pseudos[e]||R.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[M]?o(n):o.length>1?(r=[e,e,"",n],R.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=o(e,n),s=r.length;s--;)i=X(e,r[s]),e[i]=!(t[i]=r[s])}):function(e){return o(e,0,r)}):o}},pseudos:{not:i(function(e){var t=[],n=[],r=k(e.replace(se,"$1"));return r[M]?i(function(e,t,n,i){for(var o,s=r(e,null,i,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(ye,Re),function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:i(function(e){return he.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(ye,Re).toLowerCase(),function(t){var n;do{if(n=E?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===j},focus:function(e){return e===q.activeElement&&(!q.hasFocus||q.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!R.pseudos.empty(e)},header:function(e){return pe.test(e.nodeName)},input:function(e){return de.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:a(function(){return[0]}),last:a(function(e,t){return[t-1]}),eq:a(function(e,t,n){return[n<0?n+t:n]}),even:a(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:a(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:a(function(e,t,n){for(var i=n<0?n+t:n;--i>=0;)e.push(i);return e}),gt:a(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}},R.pseudos.nth=R.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})R.pseudos[b]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(b);for(b in{submit:!0,reset:!0})R.pseudos[b]=function(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}(b);return u.prototype=R.filters=R.pseudos,R.setFilters=new u,x=t.tokenize=function(e,n){var i,r,o,s,a,l,u,c=$[e+" "];if(c)return n?0:c.slice(0);for(a=e,l=[],u=R.preFilter;a;){i&&!(r=ae.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(o=[])),i=!1,(r=le.exec(a))&&(i=r.shift(),o.push({value:i,type:r[0].replace(se," ")}),a=a.slice(i.length));for(s in R.filter)!(r=fe[s].exec(a))||u[s]&&!(r=u[s](r))||(i=r.shift(),o.push({value:i,type:s,matches:r}),a=a.slice(i.length));if(!i)break}return n?a.length:a?t.error(e):$(e,l).slice(0)},k=t.compile=function(e,t){var n,i=[],r=[],o=H[e+" "];if(!o){for(t||(t=x(e)),n=t.length;n--;)o=m(t[n]),o[M]?i.push(o):r.push(o);o=H(e,v(r,i)),o.selector=e}return o},S=t.select=function(e,t,n,i){var r,o,s,a,u,h="function"==typeof e&&e,f=!i&&x(e=h.selector||e);if(n=n||[],1===f.length){if(o=f[0]=f[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&y.getById&&9===t.nodeType&&E&&R.relative[o[1].type]){if(!(t=(R.find.ID(s.matches[0].replace(ye,Re),t)||[])[0]))return n;h&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=fe.needsContext.test(e)?0:o.length;r--&&(s=o[r],!R.relative[a=s.type]);)if((u=R.find[a])&&(i=u(s.matches[0].replace(ye,Re),ve.test(o[0].type)&&l(t.parentNode)||t))){if(o.splice(r,1),!(e=i.length&&c(o)))return Q.apply(n,i),n;break}}return(h||k(e,f))(i,t,!E,n,ve.test(e)&&l(t.parentNode)||t),n},y.sortStable=M.split("").sort(z).join("")===M,y.detectDuplicates=!!_,I(),y.sortDetached=r(function(e){return 1&e.compareDocumentPosition(q.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),y.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){
if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(Z,function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);X.find=ie,X.expr=ie.selectors,X.expr[":"]=X.expr.pseudos,X.unique=ie.uniqueSort,X.text=ie.getText,X.isXMLDoc=ie.isXML,X.contains=ie.contains;var re=X.expr.match.needsContext,oe=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,se=/^.[^:#\[\.,]*$/;X.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?X.find.matchesSelector(i,e)?[i]:[]:X.find.matches(e,X.grep(t,function(e){return 1===e.nodeType}))},X.fn.extend({find:function(e){var t,n=this.length,i=[],r=this;if("string"!=typeof e)return this.pushStack(X(e).filter(function(){for(t=0;t<n;t++)if(X.contains(r[t],this))return!0}));for(t=0;t<n;t++)X.find(e,r[t],i);return i=this.pushStack(n>1?X.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&re.test(e)?X(e):e||[],!1).length}});var ae,le=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(X.fn.init=function(e,t){var n,i;if(!e)return this;if("string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:le.exec(e))||!n[1]&&t)return!t||t.jquery?(t||ae).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof X?t[0]:t,X.merge(this,X.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:Y,!0)),oe.test(n[1])&&X.isPlainObject(t))for(n in t)X.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return i=Y.getElementById(n[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=Y,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):X.isFunction(e)?void 0!==ae.ready?ae.ready(e):e(X):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),X.makeArray(e,this))}).prototype=X.fn,ae=X(Y);var ue=/^(?:parents|prev(?:Until|All))/,ce={children:!0,contents:!0,next:!0,prev:!0};X.extend({dir:function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&X(e).is(n))break;i.push(e)}return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),X.fn.extend({has:function(e){var t=X(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(X.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,i=0,r=this.length,o=[],s=re.test(e)||"string"!=typeof e?X(e,t||this.context):0;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&X.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?X.unique(o):o)},index:function(e){return e?"string"==typeof e?G.call(X(e),this[0]):G.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(X.unique(X.merge(this.get(),X(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),X.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return X.dir(e,"parentNode")},parentsUntil:function(e,t,n){return X.dir(e,"parentNode",n)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return X.dir(e,"nextSibling")},prevAll:function(e){return X.dir(e,"previousSibling")},nextUntil:function(e,t,n){return X.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return X.dir(e,"previousSibling",n)},siblings:function(e){return X.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return X.sibling(e.firstChild)},contents:function(e){return e.contentDocument||X.merge([],e.childNodes)}},function(e,t){X.fn[e]=function(n,i){var r=X.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=X.filter(i,r)),this.length>1&&(ce[e]||X.unique(r),ue.test(e)&&r.reverse()),this.pushStack(r)}});var he=/\S+/g,fe={};X.Callbacks=function(e){e="string"==typeof e?fe[e]||o(e):X.extend({},e);var t,n,i,r,s,a,l=[],u=!e.once&&[],c=function(o){for(t=e.memory&&o,n=!0,a=r||0,r=0,s=l.length,i=!0;l&&a<s;a++)if(!1===l[a].apply(o[0],o[1])&&e.stopOnFalse){t=!1;break}i=!1,l&&(u?u.length&&c(u.shift()):t?l=[]:h.disable())},h={add:function(){if(l){var n=l.length;!function t(n){X.each(n,function(n,i){var r=X.type(i);"function"===r?e.unique&&h.has(i)||l.push(i):i&&i.length&&"string"!==r&&t(i)})}(arguments),i?s=l.length:t&&(r=n,c(t))}return this},remove:function(){return l&&X.each(arguments,function(e,t){for(var n;(n=X.inArray(t,l,n))>-1;)l.splice(n,1),i&&(n<=s&&s--,n<=a&&a--)}),this},has:function(e){return e?X.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],s=0,this},disable:function(){return l=u=t=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,t||h.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||n&&!u||(t=t||[],t=[e,t.slice?t.slice():t],i?u.push(t):c(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!n}};return h},X.extend({Deferred:function(e){var t=[["resolve","done",X.Callbacks("once memory"),"resolved"],["reject","fail",X.Callbacks("once memory"),"rejected"],["notify","progress",X.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return X.Deferred(function(n){X.each(t,function(t,o){var s=X.isFunction(e[t])&&e[t];r[o[1]](function(){var e=s&&s.apply(this,arguments);e&&X.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===i?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?X.extend(e,i):i}},r={};return i.pipe=i.then,X.each(t,function(e,o){var s=o[2],a=o[3];i[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=s.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,o=H.call(arguments),s=o.length,a=1!==s||e&&X.isFunction(e.promise)?s:0,l=1===a?e:X.Deferred(),u=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?H.call(arguments):r,i===t?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(s>1)for(t=new Array(s),n=new Array(s),i=new Array(s);r<s;r++)o[r]&&X.isFunction(o[r].promise)?o[r].promise().done(u(r,i,o)).fail(l.reject).progress(u(r,n,t)):--a;return a||l.resolveWith(i,o),l.promise()}});var de;X.fn.ready=function(e){return X.ready.promise().done(e),this},X.extend({isReady:!1,readyWait:1,holdReady:function(e){e?X.readyWait++:X.ready(!0)},ready:function(e){(!0===e?--X.readyWait:X.isReady)||(X.isReady=!0,!0!==e&&--X.readyWait>0||(de.resolveWith(Y,[X]),X.fn.triggerHandler&&(X(Y).triggerHandler("ready"),X(Y).off("ready"))))}}),X.ready.promise=function(t){return de||(de=X.Deferred(),"complete"===Y.readyState?setTimeout(X.ready):(Y.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1))),de.promise(t)},X.ready.promise();var pe=X.access=function(e,t,n,i,r,o,s){var a=0,l=e.length,u=null==n;if("object"===X.type(n)){r=!0;for(a in n)X.access(e,t,a,n[a],!0,o,s)}else if(void 0!==i&&(r=!0,X.isFunction(i)||(s=!0),u&&(s?(t.call(e,i),t=null):(u=t,t=function(e,t,n){return u.call(X(e),n)})),t))for(;a<l;a++)t(e[a],n,s?i:i.call(e[a],a,t(e[a],n)));return r?e:u?t.call(e):l?t(e[0],n):o};X.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},a.uid=1,a.accepts=X.acceptData,a.prototype={key:function(e){if(!a.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=a.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(i){t[this.expando]=n,X.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var i,r=this.key(e),o=this.cache[r];if("string"==typeof t)o[t]=n;else if(X.isEmptyObject(o))X.extend(this.cache[r],t);else for(i in t)o[i]=t[i];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?(i=this.get(e,t),void 0!==i?i:this.get(e,X.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,r,o=this.key(e),s=this.cache[o];if(void 0===t)this.cache[o]={};else{X.isArray(t)?i=t.concat(t.map(X.camelCase)):(r=X.camelCase(t),t in s?i=[t,r]:(i=r,i=i in s?[i]:i.match(he)||[])),n=i.length;for(;n--;)delete s[i[n]]}},hasData:function(e){return!X.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var ge=new a,me=new a,ve=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,be=/([A-Z])/g;X.extend({hasData:function(e){return me.hasData(e)||ge.hasData(e)},data:function(e,t,n){return me.access(e,t,n)},removeData:function(e,t){me.remove(e,t)},_data:function(e,t,n){return ge.access(e,t,n)},_removeData:function(e,t){ge.remove(e,t)}}),X.fn.extend({data:function(e,t){var n,i,r,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(r=me.get(o),1===o.nodeType&&!ge.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(i=s[n].name,0===i.indexOf("data-")&&(i=X.camelCase(i.slice(5)),l(o,i,r[i])));ge.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){me.set(this,e)}):pe(this,function(t){var n,i=X.camelCase(e);if(o&&void 0===t){if(void 0!==(n=me.get(o,e)))return n;if(void 0!==(n=me.get(o,i)))return n;if(void 0!==(n=l(o,i,void 0)))return n}else this.each(function(){var n=me.get(this,i);me.set(this,i,t),-1!==e.indexOf("-")&&void 0!==n&&me.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){me.remove(this,e)})}}),X.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=ge.get(e,t),n&&(!i||X.isArray(n)?i=ge.access(e,t,X.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=X.queue(e,t),i=n.length,r=n.shift(),o=X._queueHooks(e,t),s=function(){X.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,s,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ge.get(e,n)||ge.access(e,n,{empty:X.Callbacks("once memory").add(function(){ge.remove(e,[t+"queue",n])})})}}),X.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?X.queue(this[0],e):void 0===t?this:this.each(function(){var n=X.queue(this,e,t);X._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&X.dequeue(this,e)})},dequeue:function(e){return this.each(function(){X.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=X.Deferred(),o=this,s=this.length,a=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(n=ge.get(o[s],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(t)}});var ye=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Re=["Top","Right","Bottom","Left"],Ce=function(e,t){return e=t||e,"none"===X.css(e,"display")||!X.contains(e.ownerDocument,e)},we=/^(?:checkbox|radio)$/i;!function(){var e=Y.createDocumentFragment(),t=e.appendChild(Y.createElement("div")),n=Y.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),Q.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",Q.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();Q.focusinBubbles="onfocusin"in e;var xe=/^key/,ke=/^(?:mouse|pointer|contextmenu)|click/,Se=/^(?:focusinfocus|focusoutblur)$/,Te=/^([^.]*)(?:\.(.+)|)$/;X.event={global:{},add:function(e,t,n,i,r){var o,s,a,l,u,c,h,f,d,p,g,m=ge.get(e);if(m)for(n.handler&&(o=n,n=o.handler,r=o.selector),n.guid||(n.guid=X.guid++),(l=m.events)||(l=m.events={}),(s=m.handle)||(s=m.handle=function(t){return void 0!==X&&X.event.triggered!==t.type?X.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(he)||[""],u=t.length;u--;)a=Te.exec(t[u])||[],d=g=a[1],p=(a[2]||"").split(".").sort(),d&&(h=X.event.special[d]||{},d=(r?h.delegateType:h.bindType)||d,h=X.event.special[d]||{},c=X.extend({type:d,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&X.expr.match.needsContext.test(r),namespace:p.join(".")},o),(f=l[d])||(f=l[d]=[],f.delegateCount=0,h.setup&&!1!==h.setup.call(e,i,p,s)||e.addEventListener&&e.addEventListener(d,s,!1)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),r?f.splice(f.delegateCount++,0,c):f.push(c),X.event.global[d]=!0)},remove:function(e,t,n,i,r){var o,s,a,l,u,c,h,f,d,p,g,m=ge.hasData(e)&&ge.get(e);if(m&&(l=m.events)){for(t=(t||"").match(he)||[""],u=t.length;u--;)if(a=Te.exec(t[u])||[],d=g=a[1],p=(a[2]||"").split(".").sort(),d){for(h=X.event.special[d]||{},d=(i?h.delegateType:h.bindType)||d,f=l[d]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=f.length;o--;)c=f[o],!r&&g!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,h.remove&&h.remove.call(e,c));s&&!f.length&&(h.teardown&&!1!==h.teardown.call(e,p,m.handle)||X.removeEvent(e,d,m.handle),delete l[d])}else for(d in l)X.event.remove(e,d+t[u],n,i,!0);X.isEmptyObject(l)&&(delete m.handle,ge.remove(e,"events"))}},trigger:function(t,n,i,r){var o,s,a,l,u,c,h,f=[i||Y],d=K.call(t,"type")?t.type:t,p=K.call(t,"namespace")?t.namespace.split("."):[];if(s=a=i=i||Y,3!==i.nodeType&&8!==i.nodeType&&!Se.test(d+X.event.triggered)&&(d.indexOf(".")>=0&&(p=d.split("."),d=p.shift(),p.sort()),u=d.indexOf(":")<0&&"on"+d,t=t[X.expando]?t:new X.Event(d,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=p.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:X.makeArray(n,[t]),h=X.event.special[d]||{},r||!h.trigger||!1!==h.trigger.apply(i,n))){if(!r&&!h.noBubble&&!X.isWindow(i)){for(l=h.delegateType||d,Se.test(l+d)||(s=s.parentNode);s;s=s.parentNode)f.push(s),a=s;a===(i.ownerDocument||Y)&&f.push(a.defaultView||a.parentWindow||e)}for(o=0;(s=f[o++])&&!t.isPropagationStopped();)t.type=o>1?l:h.bindType||d,c=(ge.get(s,"events")||{})[t.type]&&ge.get(s,"handle"),c&&c.apply(s,n),(c=u&&s[u])&&c.apply&&X.acceptData(s)&&(t.result=c.apply(s,n),!1===t.result&&t.preventDefault());return t.type=d,r||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(f.pop(),n)||!X.acceptData(i)||u&&X.isFunction(i[d])&&!X.isWindow(i)&&(a=i[u],a&&(i[u]=null),X.event.triggered=d,i[d](),X.event.triggered=void 0,a&&(i[u]=a)),t.result}},dispatch:function(e){e=X.event.fix(e);var t,n,i,r,o,s=[],a=H.call(arguments),l=(ge.get(this,"events")||{})[e.type]||[],u=X.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,e)){for(s=X.event.handlers.call(this,e,l),t=0;(r=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(o.namespace)||(e.handleObj=o,e.data=o.data,void 0!==(i=((X.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,a))&&!1===(e.result=i)&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,o,s=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(!0!==l.disabled||"click"!==e.type){for(i=[],n=0;n<a;n++)o=t[n],r=o.selector+" ",void 0===i[r]&&(i[r]=o.needsContext?X(r,this).index(l)>=0:X.find(r,this,null,[l]).length),i[r]&&i.push(o);i.length&&s.push({elem:l,handlers:i})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||Y,i=n.documentElement,r=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[X.expando])return e;var t,n,i,r=e.type,o=e,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=ke.test(r)?this.mouseHooks:xe.test(r)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,e=new X.Event(o),t=i.length;t--;)n=i[t],e[n]=o[n];return e.target||(e.target=Y),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==h()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===h()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&X.nodeName(this,"input"))return this.click(),!1},_default:function(e){return X.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var r=X.extend(new X.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?X.event.trigger(r,null,t):X.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},X.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},X.Event=function(e,t){if(!(this instanceof X.Event))return new X.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?u:c):this.type=e,t&&X.extend(this,t),this.timeStamp=e&&e.timeStamp||X.now(),this[X.expando]=!0},X.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=u,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=u,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=u,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},X.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){X.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return r&&(r===i||X.contains(i,r))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),Q.focusinBubbles||X.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){X.event.simulate(t,e.target,X.event.fix(e),!0)};X.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=ge.access(i,t);r||i.addEventListener(e,n,!0),ge.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=ge.access(i,t)-1;r?ge.access(i,t,r):(i.removeEventListener(e,n,!0),ge.remove(i,t))}}}),X.fn.extend({on:function(e,t,n,i,r){var o,s;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(s in e)this.on(s,t,n,e[s],r);return this}if(null==n&&null==i?(i=t,n=t=void 0):null==i&&("string"==typeof t?(i=n,n=void 0):(i=n,n=t,t=void 0)),!1===i)i=c;else if(!i)return this;return 1===r&&(o=i,i=function(e){return X().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=X.guid++)),this.each(function(){X.event.add(this,e,i,n,t)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,X(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=c),this.each(function(){X.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){X.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return X.event.trigger(e,t,n,!0)}});var Pe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,_e=/<([\w:]+)/,Ie=/<|&#?\w+;/,qe=/<(?:script|style|link)/i,je=/checked\s*(?:[^=]|=\s*.checked.)/i,Ee=/^$|\/(?:java|ecma)script/i,Ne=/^true\/(.*)/,Ae=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,De={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};De.optgroup=De.option,De.tbody=De.tfoot=De.colgroup=De.caption=De.thead,De.th=De.td,X.extend({clone:function(e,t,n){var i,r,o,s,a=e.cloneNode(!0),l=X.contains(e.ownerDocument,e);if(!(Q.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||X.isXMLDoc(e)))for(s=v(a),o=v(e),i=0,r=o.length;i<r;i++)b(o[i],s[i]);if(t)if(n)for(o=o||v(e),s=s||v(a),i=0,r=o.length;i<r;i++)m(o[i],s[i]);else m(e,a);return s=v(a,"script"),s.length>0&&g(s,!l&&v(e,"script")),a},buildFragment:function(e,t,n,i){for(var r,o,s,a,l,u,c=t.createDocumentFragment(),h=[],f=0,d=e.length;f<d;f++)if((r=e[f])||0===r)if("object"===X.type(r))X.merge(h,r.nodeType?[r]:r);else if(Ie.test(r)){for(o=o||c.appendChild(t.createElement("div")),s=(_e.exec(r)||["",""])[1].toLowerCase(),a=De[s]||De._default,o.innerHTML=a[1]+r.replace(Pe,"<$1></$2>")+a[2],u=a[0];u--;)o=o.lastChild;X.merge(h,o.childNodes),o=c.firstChild,o.textContent=""}else h.push(t.createTextNode(r));for(c.textContent="",f=0;r=h[f++];)if((!i||-1===X.inArray(r,i))&&(l=X.contains(r.ownerDocument,r),o=v(c.appendChild(r),"script"),l&&g(o),n))for(u=0;r=o[u++];)Ee.test(r.type||"")&&n.push(r);return c},cleanData:function(e){for(var t,n,i,r,o=X.event.special,s=0;void 0!==(n=e[s]);s++){if(X.acceptData(n)&&(r=n[ge.expando])&&(t=ge.cache[r])){if(t.events)for(i in t.events)o[i]?X.event.remove(n,i):X.removeEvent(n,i,t.handle);ge.cache[r]&&delete ge.cache[r]}delete me.cache[n[me.expando]]}}}),X.fn.extend({text:function(e){return pe(this,function(e){return void 0===e?X.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){f(this,e).appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=f(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?X.filter(e,this):this,r=0;null!=(n=i[r]);r++)t||1!==n.nodeType||X.cleanData(v(n)),n.parentNode&&(t&&X.contains(n.ownerDocument,n)&&g(v(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(X.cleanData(v(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return X.clone(this,e,t)})},html:function(e){return pe(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!qe.test(e)&&!De[(_e.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Pe,"<$1></$2>");try{for(;n<i;n++)t=this[n]||{},1===t.nodeType&&(X.cleanData(v(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,X.cleanData(v(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=z.apply([],e);var n,i,r,o,s,a,l=0,u=this.length,c=this,h=u-1,f=e[0],g=X.isFunction(f);if(g||u>1&&"string"==typeof f&&!Q.checkClone&&je.test(f))return this.each(function(n){var i=c.eq(n);g&&(e[0]=f.call(this,n,i.html())),i.domManip(e,t)});if(u&&(n=X.buildFragment(e,this[0].ownerDocument,!1,this),i=n.firstChild,1===n.childNodes.length&&(n=i),i)){for(r=X.map(v(n,"script"),d),o=r.length;l<u;l++)s=n,l!==h&&(s=X.clone(s,!0,!0),o&&X.merge(r,v(s,"script"))),t.call(this[l],s,l);if(o)for(a=r[r.length-1].ownerDocument,X.map(r,p),l=0;l<o;l++)s=r[l],Ee.test(s.type||"")&&!ge.access(s,"globalEval")&&X.contains(a,s)&&(s.src?X._evalUrl&&X._evalUrl(s.src):X.globalEval(s.textContent.replace(Ae,"")))}return this}}),X.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){X.fn[e]=function(e){for(var n,i=[],r=X(e),o=r.length-1,s=0;s<=o;s++)n=s===o?this:this.clone(!0),X(r[s])[t](n),W.apply(i,n.get());return this.pushStack(i)}});var Le,Me={},Be=/^margin/,Oe=new RegExp("^("+ye+")(?!px)[a-z%]+$","i"),Ue=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)};!function(){function t(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",r.appendChild(o);var t=e.getComputedStyle(s,null);n="1%"!==t.top,i="4px"===t.width,r.removeChild(o)}var n,i,r=Y.documentElement,o=Y.createElement("div"),s=Y.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",Q.clearCloneStyle="content-box"===s.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(s),e.getComputedStyle&&X.extend(Q,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==i&&t(),i},reliableMarginRight:function(){var t,n=s.appendChild(Y.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",r.appendChild(o),t=!parseFloat(e.getComputedStyle(n,null).marginRight),r.removeChild(o),s.removeChild(n),t}}))}(),X.swap=function(e,t,n,i){var r,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];r=n.apply(e,i||[]);for(o in t)e.style[o]=s[o];return r};var Fe=/^(none|table(?!-c[ea]).+)/,$e=new RegExp("^("+ye+")(.*)$","i"),He=new RegExp("^([+-])=("+ye+")","i"),ze={position:"absolute",visibility:"hidden",display:"block"},We={letterSpacing:"0",fontWeight:"400"},Ge=["Webkit","O","Moz","ms"];X.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=C(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,s,a=X.camelCase(t),l=e.style;if(t=X.cssProps[a]||(X.cssProps[a]=x(l,a)),s=X.cssHooks[t]||X.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(r=s.get(e,!1,i))?r:l[t];o=typeof n,"string"===o&&(r=He.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(X.css(e,t)),o="number"),null!=n&&n===n&&("number"!==o||X.cssNumber[a]||(n+="px"),Q.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,i))||(l[t]=n))}},css:function(e,t,n,i){var r,o,s,a=X.camelCase(t);return t=X.cssProps[a]||(X.cssProps[a]=x(e.style,a)),s=X.cssHooks[t]||X.cssHooks[a],s&&"get"in s&&(r=s.get(e,!0,n)),void 0===r&&(r=C(e,t,i)),"normal"===r&&t in We&&(r=We[t]),""===n||n?(o=parseFloat(r),!0===n||X.isNumeric(o)?o||0:r):r}}),X.each(["height","width"],function(e,t){X.cssHooks[t]={get:function(e,n,i){if(n)return Fe.test(X.css(e,"display"))&&0===e.offsetWidth?X.swap(e,ze,function(){return T(e,t,i)}):T(e,t,i)},set:function(e,n,i){var r=i&&Ue(e);return k(e,n,i?S(e,t,i,"border-box"===X.css(e,"boxSizing",!1,r),r):0)}}}),X.cssHooks.marginRight=w(Q.reliableMarginRight,function(e,t){if(t)return X.swap(e,{display:"inline-block"},C,[e,"marginRight"])}),X.each({margin:"",padding:"",border:"Width"},function(e,t){X.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];i<4;i++)r[e+Re[i]+t]=o[i]||o[i-2]||o[0];return r}},Be.test(e)||(X.cssHooks[e+t].set=k)}),X.fn.extend({css:function(e,t){return pe(this,function(e,t,n){var i,r,o={},s=0;if(X.isArray(t)){for(i=Ue(e),r=t.length;s<r;s++)o[t[s]]=X.css(e,t[s],!1,i);return o}return void 0!==n?X.style(e,t,n):X.css(e,t)},e,t,arguments.length>1)},show:function(){return P(this,!0)},hide:function(){return P(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ce(this)?X(this).show():X(this).hide()})}}),X.Tween=_,_.prototype={constructor:_,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(X.cssNumber[n]?"":"px")},cur:function(){var e=_.propHooks[this.prop];return e&&e.get?e.get(this):_.propHooks._default.get(this)},run:function(e){var t,n=_.propHooks[this.prop];return this.options.duration?this.pos=t=X.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):_.propHooks._default.set(this),this}},_.prototype.init.prototype=_.prototype,_.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=X.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){X.fx.step[e.prop]?X.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[X.cssProps[e.prop]]||X.cssHooks[e.prop])?X.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},_.propHooks.scrollTop=_.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},X.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},X.fx=_.prototype.init,X.fx.step={};var Ve,Je,Ke=/^(?:toggle|show|hide)$/,Qe=new RegExp("^(?:([+-])=|)("+ye+")([a-z%]*)$","i"),Ye=/queueHooks$/,Xe=[E],Ze={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),r=Qe.exec(t),o=r&&r[3]||(X.cssNumber[e]?"":"px"),s=(X.cssNumber[e]||"px"!==o&&+i)&&Qe.exec(X.css(n.elem,e)),a=1,l=20;if(s&&s[3]!==o){o=o||s[3],r=r||[],s=+i||1;do{a=a||".5",s/=a,X.style(n.elem,e,s+o)}while(a!==(a=n.cur()/i)&&1!==a&&--l)}return r&&(s=n.start=+s||+i||0,n.unit=o,n.end=r[1]?s+(r[1]+1)*r[2]:+r[2]),n}]};X.Animation=X.extend(A,{tweener:function(e,t){X.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,r=e.length;i<r;i++)n=e[i],Ze[n]=Ze[n]||[],Ze[n].unshift(t)},prefilter:function(e,t){t?Xe.unshift(e):Xe.push(e)}}),X.speed=function(e,t,n){var i=e&&"object"==typeof e?X.extend({},e):{complete:n||!n&&t||X.isFunction(e)&&e,duration:e,easing:n&&t||t&&!X.isFunction(t)&&t};return i.duration=X.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in X.fx.speeds?X.fx.speeds[i.duration]:X.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){X.isFunction(i.old)&&i.old.call(this),i.queue&&X.dequeue(this,i.queue)},i},X.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Ce).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=X.isEmptyObject(e),o=X.speed(t,n,i),s=function(){var t=A(this,X.extend({},e),o);(r||ge.get(this,"finish"))&&t.stop(!0)};return s.finish=s,r||!1===o.queue?this.each(s):this.queue(o.queue,s)},
stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=X.timers,s=ge.get(this);if(r)s[r]&&s[r].stop&&i(s[r]);else for(r in s)s[r]&&s[r].stop&&Ye.test(r)&&i(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(n),t=!1,o.splice(r,1));!t&&n||X.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=ge.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=X.timers,s=i?i.length:0;for(n.finish=!0,X.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<s;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),X.each(["toggle","show","hide"],function(e,t){var n=X.fn[t];X.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(q(t,!0),e,i,r)}}),X.each({slideDown:q("show"),slideUp:q("hide"),slideToggle:q("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){X.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),X.timers=[],X.fx.tick=function(){var e,t=0,n=X.timers;for(Ve=X.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||X.fx.stop(),Ve=void 0},X.fx.timer=function(e){X.timers.push(e),e()?X.fx.start():X.timers.pop()},X.fx.interval=13,X.fx.start=function(){Je||(Je=setInterval(X.fx.tick,X.fx.interval))},X.fx.stop=function(){clearInterval(Je),Je=null},X.fx.speeds={slow:600,fast:200,_default:400},X.fn.delay=function(e,t){return e=X.fx?X.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},function(){var e=Y.createElement("input"),t=Y.createElement("select"),n=t.appendChild(Y.createElement("option"));e.type="checkbox",Q.checkOn=""!==e.value,Q.optSelected=n.selected,t.disabled=!0,Q.optDisabled=!n.disabled,e=Y.createElement("input"),e.value="t",e.type="radio",Q.radioValue="t"===e.value}();var et,tt=X.expr.attrHandle;X.fn.extend({attr:function(e,t){return pe(this,X.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){X.removeAttr(this,e)})}}),X.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?X.prop(e,t,n):(1===o&&X.isXMLDoc(e)||(t=t.toLowerCase(),i=X.attrHooks[t]||(X.expr.match.bool.test(t)?et:void 0)),void 0===n?i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=X.find.attr(e,t),null==r?void 0:r):null!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):void X.removeAttr(e,t))},removeAttr:function(e,t){var n,i,r=0,o=t&&t.match(he);if(o&&1===e.nodeType)for(;n=o[r++];)i=X.propFix[n]||n,X.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!Q.radioValue&&"radio"===t&&X.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),et={set:function(e,t,n){return!1===t?X.removeAttr(e,n):e.setAttribute(n,n),n}},X.each(X.expr.match.bool.source.match(/\w+/g),function(e,t){var n=tt[t]||X.find.attr;tt[t]=function(e,t,i){var r,o;return i||(o=tt[t],tt[t]=r,r=null!=n(e,t,i)?t.toLowerCase():null,tt[t]=o),r}});var nt=/^(?:input|select|textarea|button)$/i;X.fn.extend({prop:function(e,t){return pe(this,X.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[X.propFix[e]||e]})}}),X.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,n){var i,r,o,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return o=1!==s||!X.isXMLDoc(e),o&&(t=X.propFix[t]||t,r=X.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||nt.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),Q.optSelected||(X.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),X.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){X.propFix[this.toLowerCase()]=this});var it=/[\t\r\n\f]/g;X.fn.extend({addClass:function(e){var t,n,i,r,o,s,a="string"==typeof e&&e,l=0,u=this.length;if(X.isFunction(e))return this.each(function(t){X(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(he)||[];l<u;l++)if(n=this[l],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(it," "):" ")){for(o=0;r=t[o++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");s=X.trim(i),n.className!==s&&(n.className=s)}return this},removeClass:function(e){var t,n,i,r,o,s,a=0===arguments.length||"string"==typeof e&&e,l=0,u=this.length;if(X.isFunction(e))return this.each(function(t){X(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(he)||[];l<u;l++)if(n=this[l],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(it," "):"")){for(o=0;r=t[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");s=e?X.trim(i):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):X.isFunction(e)?this.each(function(n){X(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,i=0,r=X(this),o=e.match(he)||[];t=o[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else"undefined"!==n&&"boolean"!==n||(this.className&&ge.set(this,"__className__",this.className),this.className=this.className||!1===e?"":ge.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;n<i;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(it," ").indexOf(t)>=0)return!0;return!1}});var rt=/\r/g;X.fn.extend({val:function(e){var t,n,i,r=this[0];{if(arguments.length)return i=X.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(r=i?e.call(this,n,X(this).val()):e,null==r?r="":"number"==typeof r?r+="":X.isArray(r)&&(r=X.map(r,function(e){return null==e?"":e+""})),(t=X.valHooks[this.type]||X.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))});if(r)return(t=X.valHooks[r.type]||X.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(rt,""):null==n?"":n)}}}),X.extend({valHooks:{option:{get:function(e){var t=X.find.attr(e,"value");return null!=t?t:X.trim(X.text(e))}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type||r<0,s=o?null:[],a=o?r+1:i.length,l=r<0?a:o?r:0;l<a;l++)if(n=i[l],(n.selected||l===r)&&(Q.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!X.nodeName(n.parentNode,"optgroup"))){if(t=X(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,i,r=e.options,o=X.makeArray(t),s=r.length;s--;)i=r[s],(i.selected=X.inArray(i.value,o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),X.each(["radio","checkbox"],function(){X.valHooks[this]={set:function(e,t){if(X.isArray(t))return e.checked=X.inArray(X(e).val(),t)>=0}},Q.checkOn||(X.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),X.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){X.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),X.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var ot=X.now(),st=/\?/;X.parseJSON=function(e){return JSON.parse(e+"")},X.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||X.error("Invalid XML: "+e),t};var at=/#.*$/,lt=/([?&])_=[^&]*/,ut=/^(.*?):[ \t]*([^\r\n]*)$/gm,ct=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ht=/^(?:GET|HEAD)$/,ft=/^\/\//,dt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,pt={},gt={},mt="*/".concat("*"),vt=e.location.href,bt=dt.exec(vt.toLowerCase())||[];X.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:vt,type:"GET",isLocal:ct.test(bt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":mt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":X.parseJSON,"text xml":X.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?M(M(e,X.ajaxSettings),t):M(X.ajaxSettings,e)},ajaxPrefilter:D(pt),ajaxTransport:D(gt),ajax:function(e,t){function n(e,t,n,s){var l,c,v,b,R,w=t;2!==y&&(y=2,a&&clearTimeout(a),i=void 0,o=s||"",C.readyState=e>0?4:0,l=e>=200&&e<300||304===e,n&&(b=B(h,C,n)),b=O(h,b,C,l),l?(h.ifModified&&(R=C.getResponseHeader("Last-Modified"),R&&(X.lastModified[r]=R),(R=C.getResponseHeader("etag"))&&(X.etag[r]=R)),204===e||"HEAD"===h.type?w="nocontent":304===e?w="notmodified":(w=b.state,c=b.data,v=b.error,l=!v)):(v=w,!e&&w||(w="error",e<0&&(e=0))),C.status=e,C.statusText=(t||w)+"",l?p.resolveWith(f,[c,w,C]):p.rejectWith(f,[C,w,v]),C.statusCode(m),m=void 0,u&&d.trigger(l?"ajaxSuccess":"ajaxError",[C,h,l?c:v]),g.fireWith(f,[C,w]),u&&(d.trigger("ajaxComplete",[C,h]),--X.active||X.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,r,o,s,a,l,u,c,h=X.ajaxSetup({},t),f=h.context||h,d=h.context&&(f.nodeType||f.jquery)?X(f):X.event,p=X.Deferred(),g=X.Callbacks("once memory"),m=h.statusCode||{},v={},b={},y=0,R="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!s)for(s={};t=ut.exec(o);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return y||(e=b[n]=b[n]||e,v[e]=t),this},overrideMimeType:function(e){return y||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(y<2)for(t in e)m[t]=[m[t],e[t]];else C.always(e[C.status]);return this},abort:function(e){var t=e||R;return i&&i.abort(t),n(0,t),this}};if(p.promise(C).complete=g.add,C.success=C.done,C.error=C.fail,h.url=((e||h.url||vt)+"").replace(at,"").replace(ft,bt[1]+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=X.trim(h.dataType||"*").toLowerCase().match(he)||[""],null==h.crossDomain&&(l=dt.exec(h.url.toLowerCase()),h.crossDomain=!(!l||l[1]===bt[1]&&l[2]===bt[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(bt[3]||("http:"===bt[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=X.param(h.data,h.traditional)),L(pt,h,t,C),2===y)return C;u=X.event&&h.global,u&&0==X.active++&&X.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!ht.test(h.type),r=h.url,h.hasContent||(h.data&&(r=h.url+=(st.test(r)?"&":"?")+h.data,delete h.data),!1===h.cache&&(h.url=lt.test(r)?r.replace(lt,"$1_="+ot++):r+(st.test(r)?"&":"?")+"_="+ot++)),h.ifModified&&(X.lastModified[r]&&C.setRequestHeader("If-Modified-Since",X.lastModified[r]),X.etag[r]&&C.setRequestHeader("If-None-Match",X.etag[r])),(h.data&&h.hasContent&&!1!==h.contentType||t.contentType)&&C.setRequestHeader("Content-Type",h.contentType),C.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+mt+"; q=0.01":""):h.accepts["*"]);for(c in h.headers)C.setRequestHeader(c,h.headers[c]);if(h.beforeSend&&(!1===h.beforeSend.call(f,C,h)||2===y))return C.abort();R="abort";for(c in{success:1,error:1,complete:1})C[c](h[c]);if(i=L(gt,h,t,C)){C.readyState=1,u&&d.trigger("ajaxSend",[C,h]),h.async&&h.timeout>0&&(a=setTimeout(function(){C.abort("timeout")},h.timeout));try{y=1,i.send(v,n)}catch(e){if(!(y<2))throw e;n(-1,e)}}else n(-1,"No Transport");return C},getJSON:function(e,t,n){return X.get(e,t,n,"json")},getScript:function(e,t){return X.get(e,void 0,t,"script")}}),X.each(["get","post"],function(e,t){X[t]=function(e,n,i,r){return X.isFunction(n)&&(r=r||i,i=n,n=void 0),X.ajax({url:e,type:t,dataType:r,data:n,success:i})}}),X._evalUrl=function(e){return X.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},X.fn.extend({wrapAll:function(e){var t;return X.isFunction(e)?this.each(function(t){X(this).wrapAll(e.call(this,t))}):(this[0]&&(t=X(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return X.isFunction(e)?this.each(function(t){X(this).wrapInner(e.call(this,t))}):this.each(function(){var t=X(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=X.isFunction(e);return this.each(function(n){X(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){X.nodeName(this,"body")||X(this).replaceWith(this.childNodes)}).end()}}),X.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},X.expr.filters.visible=function(e){return!X.expr.filters.hidden(e)};var yt=/%20/g,Rt=/\[\]$/,Ct=/\r?\n/g,wt=/^(?:submit|button|image|reset|file)$/i,xt=/^(?:input|select|textarea|keygen)/i;X.param=function(e,t){var n,i=[],r=function(e,t){t=X.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=X.ajaxSettings&&X.ajaxSettings.traditional),X.isArray(e)||e.jquery&&!X.isPlainObject(e))X.each(e,function(){r(this.name,this.value)});else for(n in e)U(n,e[n],t,r);return i.join("&").replace(yt,"+")},X.fn.extend({serialize:function(){return X.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=X.prop(this,"elements");return e?X.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!X(this).is(":disabled")&&xt.test(this.nodeName)&&!wt.test(e)&&(this.checked||!we.test(e))}).map(function(e,t){var n=X(this).val();return null==n?null:X.isArray(n)?X.map(n,function(e){return{name:t.name,value:e.replace(Ct,"\r\n")}}):{name:t.name,value:n.replace(Ct,"\r\n")}}).get()}}),X.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var kt=0,St={},Tt={0:200,1223:204},Pt=X.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in St)St[e]()}),Q.cors=!!Pt&&"withCredentials"in Pt,Q.ajax=Pt=!!Pt,X.ajaxTransport(function(e){var t;if(Q.cors||Pt&&!e.crossDomain)return{send:function(n,i){var r,o=e.xhr(),s=++kt;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)o[r]=e.xhrFields[r];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(r in n)o.setRequestHeader(r,n[r]);t=function(e){return function(){t&&(delete St[s],t=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?i(o.status,o.statusText):i(Tt[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=t(),o.onerror=t("error"),t=St[s]=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),X.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return X.globalEval(e),e}}}),X.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),X.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,r){t=X("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),Y.head.appendChild(t[0])},abort:function(){n&&n()}}}});var _t=[],It=/(=)\?(?=&|$)|\?\?/;X.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=_t.pop()||X.expando+"_"+ot++;return this[e]=!0,e}}),X.ajaxPrefilter("json jsonp",function(t,n,i){var r,o,s,a=!1!==t.jsonp&&(It.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&It.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=X.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(It,"$1"+r):!1!==t.jsonp&&(t.url+=(st.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||X.error(r+" was not called"),s[0]},t.dataTypes[0]="json",o=e[r],e[r]=function(){s=arguments},i.always(function(){e[r]=o,t[r]&&(t.jsonpCallback=n.jsonpCallback,_t.push(r)),s&&X.isFunction(o)&&o(s[0]),s=o=void 0}),"script"}),X.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||Y;var i=oe.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=X.buildFragment([e],t,r),r&&r.length&&X(r).remove(),X.merge([],i.childNodes))};var qt=X.fn.load;X.fn.load=function(e,t,n){if("string"!=typeof e&&qt)return qt.apply(this,arguments);var i,r,o,s=this,a=e.indexOf(" ");return a>=0&&(i=X.trim(e.slice(a)),e=e.slice(0,a)),X.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),s.length>0&&X.ajax({url:e,type:r,dataType:"html",data:t}).done(function(e){o=arguments,s.html(i?X("<div>").append(X.parseHTML(e)).find(i):e)}).complete(n&&function(e,t){s.each(n,o||[e.responseText,t,e])}),this},X.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){X.fn[t]=function(e){return this.on(t,e)}}),X.expr.filters.animated=function(e){return X.grep(X.timers,function(t){return e===t.elem}).length};var jt=e.document.documentElement;X.offset={setOffset:function(e,t,n){var i,r,o,s,a,l,u,c=X.css(e,"position"),h=X(e),f={};"static"===c&&(e.style.position="relative"),a=h.offset(),o=X.css(e,"top"),l=X.css(e,"left"),u=("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1,u?(i=h.position(),s=i.top,r=i.left):(s=parseFloat(o)||0,r=parseFloat(l)||0),X.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(f.top=t.top-a.top+s),null!=t.left&&(f.left=t.left-a.left+r),"using"in t?t.using.call(e,f):h.css(f)}},X.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){X.offset.setOffset(this,e,t)});var t,n,i=this[0],r={top:0,left:0},o=i&&i.ownerDocument;if(o)return t=o.documentElement,X.contains(t,i)?(void 0!==i.getBoundingClientRect&&(r=i.getBoundingClientRect()),n=F(o),{top:r.top+n.pageYOffset-t.clientTop,left:r.left+n.pageXOffset-t.clientLeft}):r},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===X.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),X.nodeName(e[0],"html")||(i=e.offset()),i.top+=X.css(e[0],"borderTopWidth",!0),i.left+=X.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-X.css(n,"marginTop",!0),left:t.left-i.left-X.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||jt;e&&!X.nodeName(e,"html")&&"static"===X.css(e,"position");)e=e.offsetParent;return e||jt})}}),X.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var i="pageYOffset"===n;X.fn[t]=function(r){return pe(this,function(t,r,o){var s=F(t);if(void 0===o)return s?s[n]:t[r];s?s.scrollTo(i?e.pageXOffset:o,i?o:e.pageYOffset):t[r]=o},t,r,arguments.length,null)}}),X.each(["top","left"],function(e,t){X.cssHooks[t]=w(Q.pixelPosition,function(e,n){if(n)return n=C(e,t),Oe.test(n)?X(e).position()[t]+"px":n})}),X.each({Height:"height",Width:"width"},function(e,t){X.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){X.fn[i]=function(i,r){var o=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===r?"margin":"border");return pe(this,function(t,n,i){var r;return X.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===i?X.css(t,n,s):X.style(t,n,i,s)},t,o?i:void 0,o,null)}})}),X.fn.size=function(){return this.length},X.fn.andSelf=X.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return X});var Et=e.jQuery,Nt=e.$;return X.noConflict=function(t){return e.$===X&&(e.$=Nt),t&&e.jQuery===X&&(e.jQuery=Et),X},void 0===t&&(e.jQuery=e.$=X),X}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function t(t,i){var r,o,s,a=t.nodeName.toLowerCase();return"area"===a?(r=t.parentNode,o=r.name,!(!t.href||!o||"map"!==r.nodeName.toLowerCase())&&(!!(s=e("img[usemap='#"+o+"']")[0])&&n(s))):(/^(input|select|textarea|button|object)$/.test(a)?!t.disabled:"a"===a?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var n=this.css("position"),i="absolute"===n,r=t?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var t=e(this);return(!i||"static"!==t.css("position"))&&r.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&o.length?o:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])},focusable:function(n){return t(n,!isNaN(e.attr(n,"tabindex")))},tabbable:function(n){var i=e.attr(n,"tabindex"),r=isNaN(i);return(r||i>=0)&&t(n,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,n){function i(t,n,i,o){return e.each(r,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),o&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var r="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(t){return void 0===t?s["inner"+n].call(this):this.each(function(){e(this).css(o,i(this,t)+"px")})},e.fn["outer"+n]=function(t,r){return"number"!=typeof t?s["outer"+n].call(this,t):this.each(function(){e(this).css(o,i(this,t,!0,r)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(n,i){return"number"==typeof n?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),i&&i.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var n,i,r=e(this[0]);r.length&&r[0]!==document;){if(("absolute"===(n=r.css("position"))||"relative"===n||"fixed"===n)&&(i=parseInt(r.css("zIndex"),10),!isNaN(i)&&0!==i))return i;r=r.parent()}return 0}}),e.ui.plugin={add:function(t,n,i){var r,o=e.ui[t].prototype;for(r in i)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([n,i[r]])},call:function(e,t,n,i){var r,o=e.plugins[t];if(o&&(i||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(r=0;r<o.length;r++)e.options[o[r][0]]&&o[r][1].apply(e.element,n)}};var i=0,r=Array.prototype.slice;e.cleanData=function(t){return function(n){var i,r,o;for(o=0;null!=(r=n[o]);o++)try{i=e._data(r,"events"),i&&i.remove&&e(r).triggerHandler("remove")}catch(e){}t(n)}}(e.cleanData),e.widget=function(t,n,i){var r,o,s,a,l={},u=t.split(".")[0];return t=t.split(".")[1],r=u+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[u]=e[u]||{},o=e[u][t],s=e[u][t]=function(e,t){if(!this._createWidget)return new s(e,t);arguments.length&&this._createWidget(e,t)},e.extend(s,o,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),a=new n,a.options=e.widget.extend({},a.options),e.each(i,function(t,i){if(!e.isFunction(i))return void(l[t]=i);l[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,o=this._superApply;return this._super=e,this._superApply=r,t=i.apply(this,arguments),this._super=n,this._superApply=o,t}}()}),s.prototype=e.widget.extend(a,{widgetEventPrefix:o?a.widgetEventPrefix||t:t},l,{constructor:s,namespace:u,widgetName:t,widgetFullName:r}),o?(e.each(o._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,s,n._proto)}),delete o._childConstructors):n._childConstructors.push(s),e.widget.bridge(t,s),s},e.widget.extend=function(t){for(var n,i,o=r.call(arguments,1),s=0,a=o.length;s<a;s++)for(n in o[s])i=o[s][n],o[s].hasOwnProperty(n)&&void 0!==i&&(e.isPlainObject(i)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],i):e.widget.extend({},i):t[n]=i);return t},e.widget.bridge=function(t,n){var i=n.prototype.widgetFullName||t;e.fn[t]=function(o){var s="string"==typeof o,a=r.call(arguments,1),l=this;return s?this.each(function(){var n,r=e.data(this,i);return"instance"===o?(l=r,!1):r?e.isFunction(r[o])&&"_"!==o.charAt(0)?(n=r[o].apply(r,a),n!==r&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+o+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'")}):(a.length&&(o=e.widget.extend.apply(null,[o].concat(a))),this.each(function(){var t=e.data(this,i);t?(t.option(o||{}),t._init&&t._init()):e.data(this,i,new n(o,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var i,r,o,s=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(s={},i=t.split("."),t=i.shift(),i.length){for(r=s[t]=e.widget.extend({},this.options[t]),o=0;o<i.length-1;o++)r[i[o]]=r[i[o]]||{},r=r[i[o]];if(t=i.pop(),1===arguments.length)return void 0===r[t]?null:r[t];r[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];s[t]=n}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,n,i){var r,o=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=r=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),e.each(i,function(i,s){function a(){if(t||!0!==o.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof s?o[s]:s).apply(o,arguments)}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),u=l[1]+o.eventNamespace,c=l[2];c?r.delegate(c,u,a):n.bind(u,a)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(n).undelegate(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var r,o,s=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(e.isFunction(s)&&!1===s.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,r,o){"string"==typeof r&&(r={effect:r});var s,a=r?!0===r||"number"==typeof r?n:r.effect||n:t;r=r||{},"number"==typeof r&&(r={duration:r}),s=!e.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),s&&e.effects&&e.effects.effect[a]?i[t](r):a!==t&&i[a]?i[a](r.duration,r.easing,o):i.queue(function(n){e(this)[t](),o&&o.call(i[0]),n()})}});var o=(e.widget,!1);e(document).mouseup(function(){o=!1});e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!o){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t
;var n=this,i=1===t.which,r=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(i&&!r&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),o=!0,!0))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),o=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});!function(){function t(e,t,n){return[parseFloat(e[0])*(d.test(e[0])?t/100:1),parseFloat(e[1])*(d.test(e[1])?n/100:1)]}function n(t,n){return parseInt(e.css(t,n),10)||0}function i(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var r,o,s=Math.max,a=Math.abs,l=Math.round,u=/left|center|right/,c=/top|center|bottom/,h=/[\+\-]\d+(\.[\d]+)?%?/,f=/^\w+/,d=/%$/,p=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==r)return r;var t,n,i=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=i.children()[0];return e("body").append(i),t=o.offsetWidth,i.css("overflow","scroll"),n=o.offsetWidth,t===n&&(n=i[0].clientWidth),i.remove(),r=t-n},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),r="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight?e.position.scrollbarWidth():0,height:r?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]),r=!!n[0]&&9===n[0].nodeType;return{element:n,isWindow:i,isDocument:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i||r?n.width():n.outerWidth(),height:i||r?n.height():n.outerHeight()}}},e.fn.position=function(r){if(!r||!r.of)return p.apply(this,arguments);r=e.extend({},r);var d,g,m,v,b,y,R=e(r.of),C=e.position.getWithinInfo(r.within),w=e.position.getScrollInfo(C),x=(r.collision||"flip").split(" "),k={};return y=i(R),R[0].preventDefault&&(r.at="left top"),g=y.width,m=y.height,v=y.offset,b=e.extend({},v),e.each(["my","at"],function(){var e,t,n=(r[this]||"").split(" ");1===n.length&&(n=u.test(n[0])?n.concat(["center"]):c.test(n[0])?["center"].concat(n):["center","center"]),n[0]=u.test(n[0])?n[0]:"center",n[1]=c.test(n[1])?n[1]:"center",e=h.exec(n[0]),t=h.exec(n[1]),k[this]=[e?e[0]:0,t?t[0]:0],r[this]=[f.exec(n[0])[0],f.exec(n[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===r.at[0]?b.left+=g:"center"===r.at[0]&&(b.left+=g/2),"bottom"===r.at[1]?b.top+=m:"center"===r.at[1]&&(b.top+=m/2),d=t(k.at,g,m),b.left+=d[0],b.top+=d[1],this.each(function(){var i,u,c=e(this),h=c.outerWidth(),f=c.outerHeight(),p=n(this,"marginLeft"),y=n(this,"marginTop"),S=h+p+n(this,"marginRight")+w.width,T=f+y+n(this,"marginBottom")+w.height,P=e.extend({},b),_=t(k.my,c.outerWidth(),c.outerHeight());"right"===r.my[0]?P.left-=h:"center"===r.my[0]&&(P.left-=h/2),"bottom"===r.my[1]?P.top-=f:"center"===r.my[1]&&(P.top-=f/2),P.left+=_[0],P.top+=_[1],o||(P.left=l(P.left),P.top=l(P.top)),i={marginLeft:p,marginTop:y},e.each(["left","top"],function(t,n){e.ui.position[x[t]]&&e.ui.position[x[t]][n](P,{targetWidth:g,targetHeight:m,elemWidth:h,elemHeight:f,collisionPosition:i,collisionWidth:S,collisionHeight:T,offset:[d[0]+_[0],d[1]+_[1]],my:r.my,at:r.at,within:C,elem:c})}),r.using&&(u=function(e){var t=v.left-P.left,n=t+g-h,i=v.top-P.top,o=i+m-f,l={target:{element:R,left:v.left,top:v.top,width:g,height:m},element:{element:c,left:P.left,top:P.top,width:h,height:f},horizontal:n<0?"left":t>0?"right":"center",vertical:o<0?"top":i>0?"bottom":"middle"};g<h&&a(t+n)<g&&(l.horizontal="center"),m<f&&a(i+o)<m&&(l.vertical="middle"),s(a(t),a(n))>s(a(i),a(o))?l.important="horizontal":l.important="vertical",r.using.call(this,e,l)}),c.offset(e.extend(P,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n,i=t.within,r=i.isWindow?i.scrollLeft:i.offset.left,o=i.width,a=e.left-t.collisionPosition.marginLeft,l=r-a,u=a+t.collisionWidth-o-r;t.collisionWidth>o?l>0&&u<=0?(n=e.left+l+t.collisionWidth-o-r,e.left+=l-n):e.left=u>0&&l<=0?r:l>u?r+o-t.collisionWidth:r:l>0?e.left+=l:u>0?e.left-=u:e.left=s(e.left-a,e.left)},top:function(e,t){var n,i=t.within,r=i.isWindow?i.scrollTop:i.offset.top,o=t.within.height,a=e.top-t.collisionPosition.marginTop,l=r-a,u=a+t.collisionHeight-o-r;t.collisionHeight>o?l>0&&u<=0?(n=e.top+l+t.collisionHeight-o-r,e.top+=l-n):e.top=u>0&&l<=0?r:l>u?r+o-t.collisionHeight:r:l>0?e.top+=l:u>0?e.top-=u:e.top=s(e.top-a,e.top)}},flip:{left:function(e,t){var n,i,r=t.within,o=r.offset.left+r.scrollLeft,s=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,u=e.left-t.collisionPosition.marginLeft,c=u-l,h=u+t.collisionWidth-s-l,f="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,d="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,p=-2*t.offset[0];c<0?((n=e.left+f+d+p+t.collisionWidth-s-o)<0||n<a(c))&&(e.left+=f+d+p):h>0&&((i=e.left-t.collisionPosition.marginLeft+f+d+p-l)>0||a(i)<h)&&(e.left+=f+d+p)},top:function(e,t){var n,i,r=t.within,o=r.offset.top+r.scrollTop,s=r.height,l=r.isWindow?r.scrollTop:r.offset.top,u=e.top-t.collisionPosition.marginTop,c=u-l,h=u+t.collisionHeight-s-l,f="top"===t.my[1],d=f?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,g=-2*t.offset[1];c<0?((i=e.top+d+p+g+t.collisionHeight-s-o)<0||i<a(c))&&(e.top+=d+p+g):h>0&&((n=e.top-t.collisionPosition.marginTop+d+p+g-l)>0||a(n)<h)&&(e.top+=d+p+g)}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,i,r,s,a=document.getElementsByTagName("body")[0],l=document.createElement("div");t=document.createElement(a?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&e.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in i)t.style[s]=i[s];t.appendChild(l),n=a||document.documentElement,n.insertBefore(t,n.firstChild),l.style.cssText="position: absolute; left: 10.7432222px;",r=e(l).offset().left,o=r>10&&r<11,t.innerHTML="",n.removeChild(t)}()}();e.ui.position,e.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var n=e(t.target);!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),n.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var n=e(t.currentTarget);n.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var n,i,r,o,s=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:s=!1,i=this.previousFilter||"",r=String.fromCharCode(t.keyCode),o=!1,clearTimeout(this.filterTimer),r===i?o=!0:r=i+r,n=this._filterMenuItems(r),n=o&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n,n.length||(r=String.fromCharCode(t.keyCode),n=this._filterMenuItems(r)),n.length?(this.focus(t,n),this.previousFilter=r,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}s&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(e):this.select(e))},refresh:function(){var t,n,i=this,r=this.options.icons.submenu,o=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),o.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.parent(),i=e("<span>").addClass("ui-menu-icon ui-icon "+r).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",n.attr("id"))}),t=o.add(this.element),n=t.find(this.options.items),n.not(".ui-menu-item").each(function(){var t=e(this);i._isDivider(t)&&t.addClass("ui-widget-content ui-menu-divider")}),n.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),n.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},focus:function(e,t){var n,i;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),i=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&e&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,i,r,o,s,a;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,r=t.offset().top-this.activeMenu.offset().top-n-i,o=this.activeMenu.scrollTop(),s=this.activeMenu.height(),a=t.outerHeight(),r<0?this.activeMenu.scrollTop(o+r):r+a>s&&this.activeMenu.scrollTop(o+r-s+a))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var i=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(t),this.activeMenu=i},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var i;this.active&&(i="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.find(this.options.items)[t]()),this.focus(n,i)},nextPage:function(t){var n,i,r;if(!this.active)return void this.next(t);this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,r=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-i-r<0}),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))},previousPage:function(t){var n,i,r;if(!this.active)return void this.next(t);this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,r=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-i+r>0}),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items).first()))},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)},_filterMenuItems:function(t){var n=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),i=new RegExp("^"+n,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return i.test(e.trim(e(this).text()))})}});e.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,n,i,r=this.element[0].nodeName.toLowerCase(),o="textarea"===r,s="input"===r;this.isMultiLine=!!o||!s&&this.element.prop("isContentEditable"),this.valueMethod=this.element[o||s?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(r){if(this.element.prop("readOnly"))return t=!0,i=!0,void(n=!0);t=!1,i=!1,n=!1;var o=e.ui.keyCode;switch(r.keyCode){case o.PAGE_UP:t=!0,this._move("previousPage",r);break;case o.PAGE_DOWN:t=!0,this._move("nextPage",r);break;case o.UP:t=!0,this._keyEvent("previous",r);break;case o.DOWN:t=!0,this._keyEvent("next",r);break;case o.ENTER:this.menu.active&&(t=!0,r.preventDefault(),this.menu.select(r));break;case o.TAB:this.menu.active&&this.menu.select(r);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(r),r.preventDefault());break;default:n=!0,this._searchTimeout(r)}},keypress:function(i){if(t)return t=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||i.preventDefault());if(!n){var r=e.ui.keyCode;switch(i.keyCode){case r.PAGE_UP:this._move("previousPage",i);break;case r.PAGE_DOWN:this._move("nextPage",i);break;case r.UP:this._keyEvent("previous",i);break;case r.DOWN:this._keyEvent("next",i)}}},input:function(e){if(i)return i=!1,void e.preventDefault();this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){if(this.cancelBlur)return void delete this.cancelBlur;clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(i){i.target===t.element[0]||i.target===n||e.contains(n,i.target)||t.close()})})},menufocus:function(t,n){var i,r;if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});r=n.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:r})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(r.value),(i=n.item.attr("aria-label")||r.value)&&e.trim(i).length&&(this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion))},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),i=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,n,i=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,i){i(e.ui.autocomplete.filter(t,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,r){i.xhr&&i.xhr.abort(),i.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){r(e)},error:function(){r([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),n=this.menu.element.is(":visible"),i=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;t&&(!t||n||i)||(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),--this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var n=this.menu.element.empty();this._renderMenu(n,t),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var i=this;e.each(n,function(e,n){i._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").text(n.label).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var i=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return i.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var n;this._superApply(arguments),this.options.disabled||this.cancelSearch||(n=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(n).appendTo(this.liveRegion))}});e.ui.autocomplete,e.widget("ui.slider",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,n,i=this.options,r=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o=[];for(n=i.values&&i.values.length||1,r.length>n&&(r.slice(n).remove(),r=r.slice(0,n)),t=r.length;t<n;t++)o.push("<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>");this.handles=r.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,n="";t.range?(!0===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),n="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(n+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,i,r,o,s,a,l,u=this,c=this.options;return!c.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(n),r=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(i-u.values(t));(r>n||r===n&&(t===u._lastChangedValue||u.values(t)===c.min))&&(r=n,o=e(this),s=t)}),!1!==this._start(t,s)&&(this._mouseSliding=!0,this._handleIndex=s,o.addClass("ui-state-active").focus(),a=o.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-a.left-o.width()/2,top:t.pageY-a.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,s,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,i,r,o;return"horizontal"===this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),i=n/t,i>1&&(i=1),i<0&&(i=0),"vertical"===this.orientation&&(i=1-i),r=this._valueMax()-this._valueMin(),o=this._valueMin()+i*r,this._trimAlignValue(o)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var i,r,o;this.options.values&&this.options.values.length?(i=this.values(t?0:1),2===this.options.values.length&&!0===this.options.range&&(0===t&&n>i||1===t&&n<i)&&(n=i),n!==this.values(t)&&(r=this.values(),r[t]=n,o=this._trigger("slide",e,{handle:this.handles[t],value:n,values:r}),i=this.values(t?0:1),!1!==o&&this.values(t,n))):n!==this.value()&&!1!==(o=this._trigger("slide",e,{handle:this.handles[t],value:n}))&&this.value(n)},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,n)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,n){var i,r,o;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(i=this.options.values,r=arguments[0],o=0;o<i.length;o+=1)i[o]=this._trimAlignValue(r[o]),this._change(null,o);this._refreshValue()},_setOption:function(t,n){var i,r=0;switch("range"===t&&!0===this.options.range&&("min"===n?(this.options.value=this._values(0),this.options.values=null):"max"===n&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(r=this.options.values.length),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!n),this._super(t,n),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===n?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;i<r;i+=1)this._change(null,i);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),
this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n,i;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,i=e-n;return 2*Math.abs(n)>=t&&(i+=n>0?t:-t),parseFloat(i.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),n=this.options.step;e=Math.floor(+(e-t).toFixed(this._precision())/n)*n+t,this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return-1===n?0:t.length-n-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var t,n,i,r,o,s=this.options.range,a=this.options,l=this,u=!this._animateOff&&a.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(i){n=(l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=n+"%",e(this).stop(1,1)[u?"animate":"css"](c,a.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[u?"animate":"css"]({left:n+"%"},a.animate),1===i&&l.range[u?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:a.animate})):(0===i&&l.range.stop(1,1)[u?"animate":"css"]({bottom:n+"%"},a.animate),1===i&&l.range[u?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:a.animate}))),t=n}):(i=this.value(),r=this._valueMin(),o=this._valueMax(),n=o!==r?(i-r)/(o-r)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[u?"animate":"css"](c,a.animate),"min"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:n+"%"},a.animate),"max"===s&&"horizontal"===this.orientation&&this.range[u?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:a.animate}),"min"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:n+"%"},a.animate),"max"===s&&"vertical"===this.orientation&&this.range[u?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:a.animate}))},_handleEvents:{keydown:function(t){var n,i,r,o=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),!1===this._start(t,o)))return}switch(r=this.options.step,n=i=this.options.values&&this.options.values.length?this.values(o):this.value(),t.keyCode){case e.ui.keyCode.HOME:i=this._valueMin();break;case e.ui.keyCode.END:i=this._valueMax();break;case e.ui.keyCode.PAGE_UP:i=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(n===this._valueMax())return;i=this._trimAlignValue(n+r);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n===this._valueMin())return;i=this._trimAlignValue(n-r)}this._slide(t,o,i)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}}),e.widget("ui.tabs",{version:"1.11.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var n,i;t=t.cloneNode(!1),n=t.href.replace(e,""),i=location.href.replace(e,"");try{n=decodeURIComponent(n)}catch(e){}try{i=decodeURIComponent(i)}catch(e){}return t.hash.length>1&&n===i}}(),_create:function(){var t=this,n=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",n.collapsible),this._processTabs(),n.active=this._initialActive(),e.isArray(n.disabled)&&(n.disabled=e.unique(n.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(n.active):this.active=e(),this._refresh(),this.active.length&&this.load(n.active)},_initialActive:function(){var t=this.options.active,n=this.options.collapsible,i=location.hash.substring(1);return null===t&&(i&&this.tabs.each(function(n,r){if(e(r).attr("aria-controls")===i)return t=n,!1}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==t&&-1!==t||(t=!!this.tabs.length&&0)),!1!==t&&-1===(t=this.tabs.index(this.tabs.eq(t)))&&(t=!n&&0),!n&&!1===t&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var n=e(this.document[0].activeElement).closest("li"),i=this.tabs.index(n),r=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:i++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:r=!1,i--;break;case e.ui.keyCode.END:i=this.anchors.length-1;break;case e.ui.keyCode.HOME:i=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(i);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(i!==this.options.active&&i);default:return}t.preventDefault(),clearTimeout(this.activating),i=this._focusNextTab(i,r),t.ctrlKey||t.metaKey||(n.attr("aria-selected","false"),this.tabs.eq(i).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",i)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,n){for(var i=this.tabs.length-1;-1!==e.inArray(function(){return t>i&&(t=0),t<0&&(t=i),t}(),this.options.disabled);)t=n?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?void this._activate(t):"disabled"===e?void this._setupDisabled(t):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||!1!==this.options.active||this._activate(0)),"event"===e&&this._setupEvents(t),void("heightStyle"===e&&this._setupHeightStyle(t)))},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,n=this.tablist.children(":has(a[href])");t.disabled=e.map(n.filter(".ui-state-disabled"),function(e){return n.index(e)}),this._processTabs(),!1!==t.active&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,n=this.tabs,i=this.anchors,r=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(n,i){var r,o,s,a=e(i).uniqueId().attr("id"),l=e(i).closest("li"),u=l.attr("aria-controls");t._isLocal(i)?(r=i.hash,s=r.substring(1),o=t.element.find(t._sanitizeSelector(r))):(s=l.attr("aria-controls")||e({}).uniqueId()[0].id,r="#"+s,o=t.element.find(r),o.length||(o=t._createPanel(s),o.insertAfter(t.panels[n-1]||t.tablist)),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),u&&l.data("ui-tabs-aria-controls",u),l.attr({"aria-controls":s,"aria-labelledby":a}),o.attr("aria-labelledby",a)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel"),n&&(this._off(n.not(this.tabs)),this._off(i.not(this.anchors)),this._off(r.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var n,i=0;n=this.tabs[i];i++)!0===t||-1!==e.inArray(i,t)?e(n).addClass("ui-state-disabled").attr("aria-disabled","true"):e(n).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var n={};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,i=this.element.parent();"fill"===t?(n=i.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),i=t.css("position");"absolute"!==i&&"fixed"!==i&&(n-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){n-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(n=0,this.panels.each(function(){n=Math.max(n,e(this).height("").height())}).height(n))},_eventHandler:function(t){var n=this.options,i=this.active,r=e(t.currentTarget),o=r.closest("li"),s=o[0]===i[0],a=s&&n.collapsible,l=a?e():this._getPanelForTab(o),u=i.length?this._getPanelForTab(i):e(),c={oldTab:i,oldPanel:u,newTab:a?e():o,newPanel:l};t.preventDefault(),o.hasClass("ui-state-disabled")||o.hasClass("ui-tabs-loading")||this.running||s&&!n.collapsible||!1===this._trigger("beforeActivate",t,c)||(n.active=!a&&this.tabs.index(o),this.active=s?e():o,this.xhr&&this.xhr.abort(),u.length||l.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(o),t),this._toggle(t,c))},_toggle:function(t,n){function i(){o.running=!1,o._trigger("activate",t,n)}function r(){n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),s.length&&o.options.show?o._show(s,o.options.show,i):(s.show(),i())}var o=this,s=n.newPanel,a=n.oldPanel;this.running=!0,a.length&&this.options.hide?this._hide(a,this.options.hide,function(){n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r()}):(n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a.hide(),r()),a.attr("aria-hidden","true"),n.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),s.length&&a.length?n.oldTab.attr("tabIndex",-1):s.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),s.attr("aria-hidden","false"),n.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var n,i=this._findActive(t);i[0]!==this.active[0]&&(i.length||(i=this.active),n=i.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return!1===t?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var n=this.options.disabled;!1!==n&&(void 0===t?n=!1:(t=this._getIndex(t),n=e.isArray(n)?e.map(n,function(e){return e!==t?e:null}):e.map(this.tabs,function(e,n){return n!==t?n:null})),this._setupDisabled(n))},disable:function(t){var n=this.options.disabled;if(!0!==n){if(void 0===t)n=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,n))return;n=e.isArray(n)?e.merge([t],n).sort():[t]}this._setupDisabled(n)}},load:function(t,n){t=this._getIndex(t);var i=this,r=this.tabs.eq(t),o=r.find(".ui-tabs-anchor"),s=this._getPanelForTab(r),a={tab:r,panel:s},l=function(e,t){"abort"===t&&i.panels.stop(!1,!0),r.removeClass("ui-tabs-loading"),s.removeAttr("aria-busy"),e===i.xhr&&delete i.xhr};this._isLocal(o[0])||(this.xhr=e.ajax(this._ajaxSettings(o,n,a)),this.xhr&&"canceled"!==this.xhr.statusText&&(r.addClass("ui-tabs-loading"),s.attr("aria-busy","true"),this.xhr.done(function(e,t,r){setTimeout(function(){s.html(e),i._trigger("load",n,a),l(r,t)},1)}).fail(function(e,t){setTimeout(function(){l(e,t)},1)})))},_ajaxSettings:function(t,n,i){var r=this;return{url:t.attr("href"),beforeSend:function(t,o){return r._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:o},i))}}},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}})}),function(e,t){function n(t,n,i,r){var o={data:r||(n?n.data:{}),_wrap:n?n._wrap:null,tmpl:null,parent:n||null,nodes:[],calls:c,nest:h,wrap:f,html:d,update:p};return t&&e.extend(o,t,{nodes:[],parent:n}),i&&(o.tmpl=i,o._ctnt=o._ctnt||o.tmpl(e,o),o.key=++w,(k.length?R:y)[w]=o),o}function i(t,n,o){var s,a=o?e.map(o,function(e){return"string"==typeof e?t.key?e.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+v+'="'+t.key+'" $2'):e:i(e,t,e._ctnt)}):t;return n?a:(a=a.join(""),a.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(t,n,i,o){s=e(i).get(),u(s),n&&(s=r(n).concat(s)),o&&(s=s.concat(r(o)))}),s||r(a))}function r(t){var n=document.createElement("div");return n.innerHTML=t,e.makeArray(n.childNodes)}function o(t){return new Function("jQuery","$item","var $=jQuery,call,_=[],$data=$item.data;with($data){_.push('"+e.trim(t).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(t,n,i,r,o,s,l){var u,c,h,f=e.tmpl.tag[i];if(!f)throw"Template command not found: "+i;return u=f._default||[],s&&!/\w$/.test(o)&&(o+=s,s=""),o?(o=a(o),l=l?","+a(l)+")":s?")":"",c=s?o.indexOf(".")>-1?o+s:"("+o+").call($item"+l:o,h=s?c:"(typeof("+o+")==='function'?("+o+").call($item):("+o+"))"):h=c=u.$1||"null",r=a(r),"');"+f[n?"close":"open"].split("$notnull_1").join(o?"typeof("+o+")!=='undefined' && ("+o+")!=null":"true").split("$1a").join(h).split("$1").join(c).split("$2").join(r?r.replace(/\s*([^\(]+)\s*(\((.*?)\))?/g,function(e,t,n,i){return i=i?","+i+")":n?")":"",i?"("+t+").call($item"+i:e}):u.$2||"")+"_.push('"})+"');}return _;")}function s(t,n){t._wrap=i(t,!0,e.isArray(n)?n:[b.test(n)?n:e(n).html()]).join("")}function a(e){return e?e.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function l(e){var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}function u(t){function i(t){function i(e){e+=u,s=c[e]=c[e]||n(s,y[s.parent.key+u]||s.parent,null,!0)}var r,o,s,a,l=t;if(a=t.getAttribute(v)){for(;l.parentNode&&1===(l=l.parentNode).nodeType&&!(r=l.getAttribute(v)););r!==a&&(l=l.parentNode?11===l.nodeType?0:l.getAttribute(v)||0:0,(s=y[a])||(s=R[a],s=n(s,y[l]||R[l],null,!0),s.key=++w,y[w]=s),x&&i(a)),t.removeAttribute(v)}else x&&(s=e.data(t,"tmplItem"))&&(i(s.key),y[s.key]=s,l=e.data(t.parentNode,"tmplItem"),l=l?l.key:0);if(s){for(o=s;o&&o.key!=l;)o.nodes.push(t),o=o.parent;delete s._ctnt,delete s._wrap,e.data(t,"tmplItem",s)}}var r,o,s,a,l,u="_"+x,c={};for(s=0,a=t.length;s<a;s++)if(1===(r=t[s]).nodeType){for(o=r.getElementsByTagName("*"),l=o.length-1;l>=0;l--)i(o[l]);i(r)}}function c(e,t,n,i){if(!e)return k.pop();k.push({_:e,tmpl:t,item:this,data:n,options:i})}function h(t,n,i){return e.tmpl(e.template(t),n,i,this)}function f(t,n){var i=t.options||{};return i.wrapped=n,e.tmpl(e.template(t.tmpl),t.data,i,t.item)}function d(t,n){var i=this._wrap;return e.map(e(e.isArray(i)?i.join(""):i).filter(t||"*"),function(e){return n?e.innerText||e.textContent:e.outerHTML||l(e)})}function p(){var t=this.nodes;e.tmpl(null,null,null,this).insertBefore(t[0]),e(t).remove()}var g,m=e.fn.domManip,v="_tmplitem",b=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,y={},R={},C={key:0,data:{}},w=0,x=0,k=[];e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,n){e.fn[t]=function(i){var r,o,s,a,l=[],u=e(i),c=1===this.length&&this[0].parentNode;if(g=y||{},c&&11===c.nodeType&&1===c.childNodes.length&&1===u.length)u[n](this[0]),l=this;else{for(o=0,s=u.length;o<s;o++)x=o,r=(o>0?this.clone(!0):this).get(),e.fn[n].apply(e(u[o]),r),l=l.concat(r);x=0,l=this.pushStack(l,t,u.selector)}return a=g,g=null,e.tmpl.complete(a),l}}),e.fn.extend({tmpl:function(t,n,i){return e.tmpl(this[0],t,n,i)},tmplItem:function(){return e.tmplItem(this[0])},template:function(t){return e.template(t,this[0])},domManip:function(t,n,i,r){if(t[0]&&t[0].nodeType){for(var o,s=e.makeArray(arguments),a=t.length,l=0;l<a&&!(o=e.data(t[l++],"tmplItem")););a>1&&(s[0]=[e.makeArray(t)]),o&&x&&(s[2]=function(t){e.tmpl.afterManip(this,t,i)}),m.apply(this,s)}else m.apply(this,arguments);return x=0,g||e.tmpl.complete(y),this}}),e.extend({tmpl:function(t,r,o,a){var l,u=!a;if(u)a=C,t=e.template[t]||e.template(null,t),R={};else if(!t)return t=a.tmpl,y[a.key]=a,a.nodes=[],a.wrapped&&s(a,a.wrapped),e(i(a,null,a.tmpl(e,a)));return t?("function"==typeof r&&(r=r.call(a||{})),o&&o.wrapped&&s(o,o.wrapped),l=e.isArray(r)?e.map(r,function(e){return e?n(o,a,t,e):null}):[n(o,a,t,r)],u?e(i(a,null,l)):l):[]},tmplItem:function(t){var n;for(t instanceof e&&(t=t[0]);t&&1===t.nodeType&&!(n=e.data(t,"tmplItem"))&&(t=t.parentNode););return n||C},template:function(t,n){return n?("string"==typeof n?n=o(n):n instanceof e&&(n=n[0]||{}),n.nodeType&&(n=e.data(n,"tmpl")||e.data(n,"tmpl",o(n.innerHTML))),"string"==typeof t?e.template[t]=n:n):t?"string"!=typeof t?e.template(null,t):e.template[t]||e.template(null,b.test(t)?t:e(t)):null},encode:function(e){return(""+e).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}),e.extend(e.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){_=_.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(_,$1,$2);_=[];",close:"call=$item.calls();_=call._.concat($item.wrap(call,_));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},if:{open:"if(($notnull_1) && $1a){",close:"}"},else:{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){_.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){_.push($.encode($1a));}"},"!":{open:""}},complete:function(e){y={}},afterManip:function(t,n,i){var r=11===n.nodeType?e.makeArray(n.childNodes):1===n.nodeType?[n]:[];i.call(t,n),u(r),x++}})}(jQuery),function(e){var t=e.preload=function(n,i){function r(r){l.element=this,l.found="load"==r.type,l.image=this.src,l.index=this.index;var a=l.original=n[this.index];l[l.found?"loaded":"failed"]++,l.done++,i.enforceCache&&t.cache.push(e("<img/>").attr("src",l.image)[0]),i.placeholder&&a.src&&(a.src=l.found?l.image:i.notFound||a.src),i.onComplete&&i.onComplete(l),l.done<l.total?o(0,this):(u&&u.unbind&&u.unbind("load").unbind("error").unbind("abort"),u=null,s())}function o(e,r,s){return r.attachEvent&&l.next&&l.next%t.gap==0&&!s?(setTimeout(function(){o(e,r,!0)},0),!1):l.next!=l.total&&(r.index=l.next,r.src=a[l.next++],void(i.onRequest&&(l.index=r.index,l.element=r,l.image=r.src,l.original=n[l.next-1],i.onRequest(l))))}function s(){i.onFinish&&i.onFinish(l)}n.split&&(n=e(n)),i=e.extend({},t.defaults,i);var a=e.map(n,function(e){if(e){if(e.split)return i.base+e+i.ext;var t=e.src||e.href;return"string"==typeof i.placeholder&&e.src&&(e.src=i.placeholder),t&&i.find&&(t=t.replace(i.find,i.replace)),t||null}}),l={loaded:0,failed:0,next:0,done:0,total:a.length};if(!l.total)return s();var u=e(Array(i.threshold+1).join("<img/>")).load(r).error(r).bind("abort",r).each(o)};t.gap=14,t.cache=[],t.defaults={threshold:2,base:"",ext:"",replace:""},e.fn.preload=function(e){return t(this,e),this}}(jQuery),function(e){var t=function(t){this.origHtmlMargin=parseFloat(e("html").css("margin-top")),this.options=e.extend({},e.smartbanner.defaults,t);var n=navigator.standalone;if(this.options.force?this.type=this.options.force:null!=navigator.userAgent.match(/iPad|iPhone|iPod/i)?(window.Number(navigator.userAgent.substr(navigator.userAgent.indexOf("OS ")+3,3).replace("_","."))<6||null==navigator.userAgent.match(/Safari/i))&&(this.type="ios"):null!=navigator.userAgent.match(/Android/i)&&(this.type="android"),this.type&&!n&&!this.getCookie("sb-closed")&&!this.getCookie("sb-installed")){this.scale="auto"==this.options.scale?e(window).width()/window.screen.width:this.options.scale,this.scale<1&&(this.scale=1);var i=e("android"==this.type?'meta[name="google-play-app"]':'meta[name="apple-itunes-app"]');0!=i.length&&(this.appId=/app-id=([^\s,]+)/.exec(i.attr("content"))[1],this.title=this.options.title?this.options.title:e("title").text().replace(/\s*[|\-].*$/,""),this.author=this.options.author?this.options.author:e('meta[name="author"]').length?e('meta[name="author"]').attr("content"):window.location.hostname,this.create(),this.show(),this.listen())}};t.prototype={constructor:t,create:function(){var t,n=("android"==this.type?"market://details?id=":"https://itunes.apple.com/"+this.options.appStoreLanguage+"/app/id")+this.appId,i=this.options.price?this.options.price+" - "+("android"==this.type?this.options.inGooglePlay:this.options.inAppStore):"",r=null===this.options.iconGloss?"ios"==this.type:this.options.iconGloss;e("body").append('<div id="smartbanner" class="'+this.type+'"><div class="sb-container"><a href="#" class="sb-close">&times;</a><span class="sb-icon"></span><div class="sb-info"><strong>'+this.title+"</strong><span>"+this.author+"</span><span>"+i+'</span></div><a href="'+n+'" class="sb-button"><span>'+this.options.button+"</span></a></div></div>"),this.options.icon?t=this.options.icon:e('link[rel="apple-touch-icon-precomposed"]').length>0?(t=e('link[rel="apple-touch-icon-precomposed"]').attr("href"),null===this.options.iconGloss&&(r=!1)):e('link[rel="apple-touch-icon"]').length>0&&(t=e('link[rel="apple-touch-icon"]').attr("href")),t?(e("#smartbanner .sb-icon").css("background-image","url("+t+")"),r&&e("#smartbanner .sb-icon").addClass("gloss")):e("#smartbanner").addClass("no-icon"),this.bannerHeight=e("#smartbanner").outerHeight()+2,this.scale>1&&(e("#smartbanner").css("top",parseFloat(e("#smartbanner").css("top"))*this.scale).css("height",parseFloat(e("#smartbanner").css("height"))*this.scale),e("#smartbanner .sb-container").css("-webkit-transform","scale("+this.scale+")").css("-msie-transform","scale("+this.scale+")").css("-moz-transform","scale("+this.scale+")").css("width",e(window).width()/this.scale))},listen:function(){e("#smartbanner .sb-close").on("click",e.proxy(this.close,this)),e("#smartbanner .sb-button").on("click",e.proxy(this.install,this))},show:function(t){e("#smartbanner").stop().animate({top:0},this.options.speedIn).addClass("shown"),e("html").animate({marginTop:this.origHtmlMargin+this.bannerHeight*this.scale},this.options.speedIn,"swing",t)},hide:function(t){e("#smartbanner").stop().animate({top:-1*this.bannerHeight*this.scale},this.options.speedOut).removeClass("shown"),e("html").animate({marginTop:this.origHtmlMargin},this.options.speedOut,"swing",t)},close:function(e){e.preventDefault(),this.hide(),this.setCookie("sb-closed","true",this.options.daysHidden)},install:function(e){this.hide(),this.setCookie("sb-installed","true",this.options.daysReminder)},setCookie:function(e,t,n){var i=new Date;i.setDate(i.getDate()+n),t=escape(t)+(null==n?"":"; expires="+i.toUTCString()),document.cookie=e+"="+t+"; path=/;"},getCookie:function(e){var t,n,i,r=document.cookie.split(";");for(t=0;t<r.length;t++)if(n=r[t].substr(0,r[t].indexOf("=")),i=r[t].substr(r[t].indexOf("=")+1),(n=n.replace(/^\s+|\s+$/g,""))==e)return unescape(i);return null},switchType:function(){var t=this;this.hide(function(){t.type="android"==t.type?"ios":"android";var n=e("android"==t.type?'meta[name="google-play-app"]':'meta[name="apple-itunes-app"]').attr("content");t.appId=/app-id=([^\s,]+)/.exec(n)[1],e("#smartbanner").detach(),t.create(),t.show()})}},e.smartbanner=function(n){var i=e(window),r=i.data("typeahead"),o="object"==typeof n&&n;r||i.data("typeahead",r=new t(o)),"string"==typeof n&&r[n]()},e.smartbanner.defaults={title:null,author:null,price:"FREE",appStoreLanguage:"us",inAppStore:"On the App Store",inGooglePlay:"In Google Play",icon:null,iconGloss:null,button:"VIEW",scale:"auto",speedIn:300,speedOut:400,daysHidden:15,daysReminder:90,force:null},e.smartbanner.Constructor=t}(window.jQuery),function(e){function t(e){return"[object Function]"==Object.prototype.toString.call(e)}function n(e){return"[object Array]"==Object.prototype.toString.call(e)}function i(e,t){var n=/^\w+\:\/\//;return/^\/\/\/?/.test(e)?e=location.protocol+e:n.test(e)||"/"==e.charAt(0)||(e=(t||"")+e),n.test(e)?e:("/"==e.charAt(0)?v:m)+e}function r(e,t){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function o(e){for(var t=!1,n=0;n<e.scripts.length;n++)e.scripts[n].ready&&e.scripts[n].exec_trigger&&(t=!0,e.scripts[n].exec_trigger(),e.scripts[n].exec_trigger=null);return t}function s(e,t,n,i){e.onload=e.onreadystatechange=function(){e.readyState&&"complete"!=e.readyState&&"loaded"!=e.readyState||t[n]||(e.onload=e.onreadystatechange=null,i())}}function a(e){e.ready=e.finished=!0;for(var t=0;t<e.finished_listeners.length;t++)e.finished_listeners[t]();e.ready_listeners=[],e.finished_listeners=[]}function l(e,t,n,i,r){setTimeout(function(){var o,a,l=t.real_src;if("item"in b){if(!b[0])return void setTimeout(arguments.callee,25);b=b[0]}o=document.createElement("script"),t.type&&(o.type=t.type),t.charset&&(o.charset=t.charset),r?w?(n.elem=o,C?(o.preload=!0,o.onpreload=i):o.onreadystatechange=function(){"loaded"==o.readyState&&i()},o.src=l):r&&0==l.indexOf(v)&&e[h]?(a=new XMLHttpRequest,a.onreadystatechange=function(){4==a.readyState&&(a.onreadystatechange=function(){},n.text=a.responseText+"\n//@ sourceURL="+l,i())},a.open("GET",l),a.send()):(o.type="text/cache-script",s(o,n,"ready",function(){b.removeChild(o),i()}),o.src=l,b.insertBefore(o,b.firstChild)):x?(o.async=!1,s(o,n,"finished",i),o.src=l,b.insertBefore(o,b.firstChild)):(s(o,n,"finished",i),o.src=l,b.insertBefore(o,b.firstChild))},0)}function u(){function m(e,t,n){function i(){null!=r&&(r=null,a(n))}var r;T[t.src].finished||(e[d]||(T[t.src].finished=!0),r=n.elem||document.createElement("script"),t.type&&(r.type=t.type),t.charset&&(r.charset=t.charset),s(r,n,"finished",i),n.elem?n.elem=null:n.text?(r.onload=r.onreadystatechange=null,r.text=n.text):r.src=t.real_src,b.insertBefore(r,b.firstChild),n.text&&i())}function v(e,t,n,r){var o,s,u=function(){t.ready_cb(t,function(){m(e,t,o)})},c=function(){t.finished_cb(t,n)};t.src=i(t.src,e[g]),t.real_src=t.src+(e[p]?(/\?.*$/.test(t.src)?"&_":"?_")+~~(1e9*Math.random())+"=":""),T[t.src]||(T[t.src]={items:[],finished:!1}),s=T[t.src].items,e[d]||0==s.length?(o=s[s.length]={ready:!1,finished:!1,ready_listeners:[u],finished_listeners:[c]},l(e,t,o,r?function(){o.ready=!0;for(var e=0;e<o.ready_listeners.length;e++)o.ready_listeners[e]();o.ready_listeners=[]}:function(){a(o)},r)):(o=s[0],o.finished?c():o.finished_listeners.push(c))}function y(){function e(e,t){e.ready=!0,e.exec_trigger=t,s()}function i(e,t){e.ready=e.finished=!0,e.exec_trigger=null;for(var n=0;n<t.scripts.length;n++)if(!t.scripts[n].finished)return;t.finished=!0,s()}function s(){for(;d<h.length;)if(t(h[d]))try{h[d++]()}catch(e){}else{if(!h[d].finished){if(o(h[d]))continue;break}d++}d==h.length&&(p=!1,u=!1)}function a(){u&&u.scripts||h.push(u={scripts:[],finished:!0})}var l,u,c=r(C,{}),h=[],d=0,p=!1;return l={script:function(){for(var o=0;o<arguments.length;o++)!function(o,s){var h;n(o)||(s=[o]);for(var d=0;d<s.length;d++)a(),o=s[d],t(o)&&(o=o()),o&&(n(o)?(h=[].slice.call(o),h.unshift(d,1),[].splice.apply(s,h),d--):("string"==typeof o&&(o={src:o}),o=r(o,{ready:!1,ready_cb:e,finished:!1,finished_cb:i}),u.finished=!1,u.scripts.push(o),v(c,o,u,x&&p),p=!0,c[f]&&l.wait()))}(arguments[o],arguments[o]);return l},wait:function(){if(arguments.length>0){for(var e=0;e<arguments.length;e++)h.push(arguments[e]);u=h[h.length-1]}else u=!1;return s(),l}},{script:l.script,wait:l.wait,setOptions:function(e){return r(e,c),l}}}var R,C={},x=w||k,S=[],T={};return C[h]=!0,C[f]=!1,C[d]=!1,C[p]=!1,C[g]="",R={setGlobalDefaults:function(e){return r(e,C),R},setOptions:function(){return y().setOptions.apply(null,arguments)},script:function(){return y().script.apply(null,arguments)},wait:function(){return y().wait.apply(null,arguments)},queueScript:function(){return S[S.length]={type:"script",args:[].slice.call(arguments)},R},queueWait:function(){return S[S.length]={type:"wait",args:[].slice.call(arguments)},R},runQueue:function(){for(var e,t=R,n=S.length,i=n;--i>=0;)e=S.shift(),t=t[e.type].apply(null,e.args);return t},noConflict:function(){return e.$LAB=c,R},sandbox:function(){return u()}}}
var c=e.$LAB,h="UseLocalXHR",f="AlwaysPreserveOrder",d="AllowDuplicates",p="CacheBust",g="BasePath",m=/^[^?#]*\//.exec(location.href)[0],v=/^\w+\:\/\/\/?[^\/]+/.exec(m)[0],b=document.head||document.getElementsByTagName("head"),y=e.opera&&"[object Opera]"==Object.prototype.toString.call(e.opera)||"MozAppearance"in document.documentElement.style,R=document.createElement("script"),C="boolean"==typeof R.preload,w=C||R.readyState&&"uninitialized"==R.readyState,x=!w&&!0===R.async,k=!w&&!x&&!y;e.$LAB=u(),function(e,t,n){null==document.readyState&&document[e]&&(document.readyState="loading",document[e](t,n=function(){document.removeEventListener(t,n,!1),document.readyState="complete"},!1))}("addEventListener","DOMContentLoaded")}(this),function(){function e(e,t){if(e!==t){var n=null===e,i=e===y,r=e===e,o=null===t,s=t===y,a=t===t;if(e>t&&!o||!r||n&&!s&&a||i&&a)return 1;if(e<t&&!n||!a||o&&!i&&r||s&&r)return-1}return 0}function t(e,t,n){for(var i=e.length,r=n?i:-1;n?r--:++r<i;)if(t(e[r],r,e))return r;return-1}function n(e,t,n){if(t!==t)return h(e,n);n-=1;for(var i=e.length;++n<i;)if(e[n]===t)return n;return-1}function i(e){return"function"==typeof e||!1}function r(e){return"string"==typeof e?e:null==e?"":e+""}function o(e,t){for(var n=-1,i=e.length;++n<i&&-1<t.indexOf(e.charAt(n)););return n}function s(e,t){for(var n=e.length;n--&&-1<t.indexOf(e.charAt(n)););return n}function a(t,n){return e(t.a,n.a)||t.b-n.b}function l(e){return Le[e]}function u(e){return Me[e]}function c(e){return"\\"+Ue[e]}function h(e,t,n){var i=e.length;for(t+=n?0:-1;n?t--:++t<i;){var r=e[t];if(r!==r)return t}return-1}function f(e){return!!e&&"object"==typeof e}function d(e){return 160>=e&&9<=e&&13>=e||32==e||160==e||5760==e||6158==e||8192<=e&&(8202>=e||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function p(e,t){for(var n=-1,i=e.length,r=-1,o=[];++n<i;)e[n]===t&&(e[n]=B,o[++r]=n);return o}function g(e){for(var t=-1,n=e.length;++t<n&&d(e.charCodeAt(t)););return t}function m(e){for(var t=e.length;t--&&d(e.charCodeAt(t)););return t}function v(e){return Be[e]}function b(d){function Le(e){if(f(e)&&!(Ao(e)||e instanceof Oe)){if(e instanceof Be)return e;if(nr.call(e,"__chain__")&&nr.call(e,"__wrapped__"))return Fn(e)}return new Be(e)}function Me(){}function Be(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}function Oe(e){this.__wrapped__=e,this.__actions__=null,this.__dir__=1,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=Er,this.__views__=null}function Ue(){this.__data__={}}function Fe(e){var t=e?e.length:0;for(this.data={hash:Cr(null),set:new gr};t--;)this.push(e[t])}function $e(e,t){var n=e.data;return("string"==typeof t||gi(t)?n.set.has(t):n.hash[t])?0:-1}function He(e,t){var n=-1,i=e.length;for(t||(t=Fi(i));++n<i;)t[n]=e[n];return t}function ze(e,t){for(var n=-1,i=e.length;++n<i&&!1!==t(e[n],n,e););return e}function We(e,t){for(var n=-1,i=e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function Je(e,t){for(var n=-1,i=e.length,r=-1,o=[];++n<i;){var s=e[n];t(s,n,e)&&(o[++r]=s)}return o}function Ke(e,t){for(var n=-1,i=e.length,r=Fi(i);++n<i;)r[n]=t(e[n],n,e);return r}function Qe(e,t,n,i){var r=-1,o=e.length;for(i&&o&&(n=e[++r]);++r<o;)n=t(n,e[r],r,e);return n}function Ye(e,t){for(var n=-1,i=e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function Xe(e,t){return e===y?t:e}function Ze(e,t,n,i){return e!==y&&nr.call(i,n)?e:t}function et(e,t,n){for(var i=-1,r=Go(t),o=r.length;++i<o;){var s=r[i],a=e[s],l=n(a,t[s],s,e,t);(l===l?l===a:a!==a)&&(a!==y||s in e)||(e[s]=l)}return e}function tt(e,t){return null==t?e:it(t,Go(t),e)}function nt(e,t){for(var n=-1,i=null==e,r=!i&&_n(e),o=r?e.length:0,s=t.length,a=Fi(s);++n<s;){var l=t[n];a[n]=r?In(l,o)?e[l]:y:i?y:e[l]}return a}function it(e,t,n){n||(n={});for(var i=-1,r=t.length;++i<r;){var o=t[i];n[o]=e[o]}return n}function rt(e,t,n){var i=typeof e;return"function"==i?t===y?e:Ut(e,t,n):null==e?Li:"object"==i?Ct(e):t===y?Ui(e):wt(e,t)}function ot(e,t,n,i,r,o,s){var a;if(n&&(a=r?n(e,i,r):n(e)),a!==y)return a;if(!gi(e))return e;if(i=Ao(e)){if(a=kn(e),!t)return He(e,a)}else{var l=rr.call(e),u=l==z;if(l!=G&&l!=O&&(!u||r))return Ae[l]?Tn(e,l,t):r?e:{};if(a=Sn(u?{}:e),!t)return tt(a,e)}for(o||(o=[]),s||(s=[]),r=o.length;r--;)if(o[r]==e)return s[r];return o.push(e),s.push(a),(i?ze:pt)(e,function(i,r){a[r]=ot(i,t,n,r,e,o,s)}),a}function st(e,t,n){if("function"!=typeof e)throw new Qi(M);return mr(function(){e.apply(y,n)},t)}function at(e,t){var i=e?e.length:0,r=[];if(!i)return r;var o=-1,s=Cn(),a=s==n,l=a&&200<=t.length?Gr(t):null,u=t.length;l&&(s=$e,a=!1,t=l);e:for(;++o<i;)if(l=e[o],a&&l===l){for(var c=u;c--;)if(t[c]===l)continue e;r.push(l)}else 0>s(t,l,0)&&r.push(l);return r}function lt(e,t){var n=!0;return Fr(e,function(e,i,r){return n=!!t(e,i,r)}),n}function ut(e,t,n,i){var r=i,o=r;return Fr(e,function(e,s,a){s=+t(e,s,a),(n(s,r)||s===i&&s===o)&&(r=s,o=e)}),o}function ct(e,t){var n=[];return Fr(e,function(e,i,r){t(e,i,r)&&n.push(e)}),n}function ht(e,t,n,i){var r;return n(e,function(e,n,o){return t(e,n,o)?(r=i?n:e,!1):void 0}),r}function ft(e,t,n){for(var i=-1,r=e.length,o=-1,s=[];++i<r;){var a=e[i];if(f(a)&&_n(a)&&(n||Ao(a)||hi(a))){t&&(a=ft(a,t,n));for(var l=-1,u=a.length;++l<u;)s[++o]=a[l]}else n||(s[++o]=a)}return s}function dt(e,t){Hr(e,t,Si)}function pt(e,t){return Hr(e,t,Go)}function gt(e,t){return zr(e,t,Go)}function mt(e,t){for(var n=-1,i=t.length,r=-1,o=[];++n<i;){var s=t[n];Lo(e[s])&&(o[++r]=s)}return o}function vt(e,t,n){if(null!=e){n!==y&&n in On(e)&&(t=[n]),n=0;for(var i=t.length;null!=e&&n<i;)e=e[t[n++]];return n&&n==i?e:y}}function bt(e,t,n,i,r,o){if(e===t)e=!0;else if(null==e||null==t||!gi(e)&&!f(t))e=e!==e&&t!==t;else e:{var s=bt,a=Ao(e),l=Ao(t),u=U,c=U;a||(u=rr.call(e),u==O?u=G:u!=G&&(a=Ri(e))),l||(c=rr.call(t),c==O?c=G:c!=G&&Ri(t));var h=u==G,l=c==G,c=u==c;if(!c||a||h){if(!i&&(u=h&&nr.call(e,"__wrapped__"),l=l&&nr.call(t,"__wrapped__"),u||l)){e=s(u?e.value():e,l?t.value():t,n,i,r,o);break e}if(c){for(r||(r=[]),o||(o=[]),u=r.length;u--;)if(r[u]==e){e=o[u]==t;break e}r.push(e),o.push(t),e=(a?mn:bn)(e,t,s,n,i,r,o),r.pop(),o.pop()}else e=!1}else e=vn(e,t,u)}return e}function yt(e,t,n){var i=t.length,r=i,o=!n;if(null==e)return!r;for(e=On(e);i--;){var s=t[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<r;){var s=t[i],a=s[0],l=e[a],u=s[1];if(o&&s[2]){if(l===y&&!(a in e))return!1}else if(s=n?n(l,u,a):y,s===y?!bt(u,l,n,!0):!s)return!1}return!0}function Rt(e,t){var n=-1,i=_n(e)?Fi(e.length):[];return Fr(e,function(e,r,o){i[++n]=t(e,r,o)}),i}function Ct(e){var t=wn(e);if(1==t.length&&t[0][2]){var n=t[0][0],i=t[0][1];return function(e){return null!=e&&(e[n]===i&&(i!==y||n in On(e)))}}return function(e){return yt(e,t)}}function wt(e,t){var n=Ao(e),i=jn(e)&&t===t&&!gi(t),r=e+"";return e=Un(e),function(o){if(null==o)return!1;var s=r;if(o=On(o),!(!n&&i||s in o)){if(null==(o=1==e.length?o:vt(o,It(e,0,-1))))return!1;s=Gn(e),o=On(o)}return o[s]===t?t!==y||s in o:bt(t,o[s],y,!0)}}function xt(e,t,n,i,r){if(!gi(e))return e;var o=_n(t)&&(Ao(t)||Ri(t)),s=o?null:Go(t);return ze(s||t,function(a,l){if(s&&(l=a,a=t[l]),f(a)){i||(i=[]),r||(r=[]);e:{for(var u=l,c=i,h=r,d=c.length,p=t[u];d--;)if(c[d]==p){e[u]=h[d];break e}var d=e[u],g=n?n(d,p,u,e,t):y,m=g===y;m&&(g=p,_n(p)&&(Ao(p)||Ri(p))?g=Ao(d)?d:_n(d)?He(d):[]:Mo(p)||hi(p)?g=hi(d)?xi(d):Mo(d)?d:{}:m=!1),c.push(p),h.push(g),m?e[u]=xt(g,p,n,c,h):(g===g?g!==d:d===d)&&(e[u]=g)}}else u=e[l],c=n?n(u,a,l,e,t):y,(h=c===y)&&(c=a),c===y&&(!o||l in e)||!h&&(c===c?c===u:u!==u)||(e[l]=c)}),e}function kt(e){return function(t){return null==t?y:t[e]}}function St(e){var t=e+"";return e=Un(e),function(n){return vt(n,e,t)}}function Tt(e,t){for(var n=e?t.length:0;n--;){var i=t[n];if(i!=r&&In(i)){var r=i;vr.call(e,i,1)}}}function Pt(e,t){return e+hr(qr()*(t-e+1))}function _t(e,t,n,i,r){return r(e,function(e,r,o){n=i?(i=!1,e):t(n,e,r,o)}),n}function It(e,t,n){var i=-1,r=e.length;for(t=null==t?0:+t||0,0>t&&(t=-t>r?0:r+t),n=n===y||n>r?r:+n||0,0>n&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0,n=Fi(r);++i<r;)n[i]=e[i+t];return n}function qt(e,t){var n;return Fr(e,function(e,i,r){return!(n=t(e,i,r))}),!!n}function jt(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].c;return e}function Et(t,n,i){var r=yn(),o=-1;return n=Ke(n,function(e){return r(e)}),t=Rt(t,function(e){return{a:Ke(n,function(t){return t(e)}),b:++o,c:e}}),jt(t,function(t,n){var r;e:{r=-1;for(var o=t.a,s=n.a,a=o.length,l=i.length;++r<a;){var u=e(o[r],s[r]);if(u){r=r<l?u*(i[r]?1:-1):u;break e}}r=t.b-n.b}return r})}function Nt(e,t){var n=0;return Fr(e,function(e,i,r){n+=+t(e,i,r)||0}),n}function At(e,t){var i=-1,r=Cn(),o=e.length,s=r==n,a=s&&200<=o,l=a?Gr():null,u=[];l?(r=$e,s=!1):(a=!1,l=t?[]:u);e:for(;++i<o;){var c=e[i],h=t?t(c,i,e):c;if(s&&c===c){for(var f=l.length;f--;)if(l[f]===h)continue e;t&&l.push(h),u.push(c)}else 0>r(l,h,0)&&((t||a)&&l.push(h),u.push(c))}return u}function Dt(e,t){for(var n=-1,i=t.length,r=Fi(i);++n<i;)r[n]=e[t[n]];return r}function Lt(e,t,n,i){for(var r=e.length,o=i?r:-1;(i?o--:++o<r)&&t(e[o],o,e););return n?It(e,i?0:o,i?o+1:r):It(e,i?o+1:0,i?r:o)}function Mt(e,t){var n=e;n instanceof Oe&&(n=n.value());for(var i=-1,r=t.length;++i<r;){var n=[n],o=t[i];pr.apply(n,o.args),n=o.func.apply(o.thisArg,n)}return n}function Bt(e,t,n){var i=0,r=e?e.length:i;if("number"==typeof t&&t===t&&r<=Ar){for(;i<r;){var o=i+r>>>1,s=e[o];(n?s<=t:s<t)&&null!==s?i=o+1:r=o}return r}return Ot(e,t,Li,n)}function Ot(e,t,n,i){t=n(t);for(var r=0,o=e?e.length:0,s=t!==t,a=null===t,l=t===y;r<o;){var u=hr((r+o)/2),c=n(e[u]),h=c!==y,f=c===c;(s?f||i:a?f&&h&&(i||null!=c):l?f&&(i||h):null==c?0:i?c<=t:c<t)?r=u+1:o=u}return Tr(o,Nr)}function Ut(e,t,n){if("function"!=typeof e)return Li;if(t===y)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)};case 5:return function(n,i,r,o,s){return e.call(t,n,i,r,o,s)}}return function(){return e.apply(t,arguments)}}function Ft(e){return lr.call(e,0)}function $t(e,t,n){for(var i=n.length,r=-1,o=Sr(e.length-i,0),s=-1,a=t.length,l=Fi(o+a);++s<a;)l[s]=t[s];for(;++r<i;)l[n[r]]=e[r];for(;o--;)l[s++]=e[r++];return l}function Ht(e,t,n){for(var i=-1,r=n.length,o=-1,s=Sr(e.length-r,0),a=-1,l=t.length,u=Fi(s+l);++o<s;)u[o]=e[o];for(s=o;++a<l;)u[s+a]=t[a];for(;++i<r;)u[s+n[i]]=e[o++];return u}function zt(e,t){return function(n,i,r){var o=t?t():{};if(i=yn(i,r,3),Ao(n)){r=-1;for(var s=n.length;++r<s;){var a=n[r];e(o,a,i(a,r,n),n)}}else Fr(n,function(t,n,r){e(o,t,i(t,n,r),r)});return o}}function Wt(e){return ui(function(t,n){var i=-1,r=null==t?0:n.length,o=2<r?n[r-2]:y,s=2<r?n[2]:y,a=1<r?n[r-1]:y;for("function"==typeof o?(o=Ut(o,a,5),r-=2):(o="function"==typeof a?a:y,r-=o?1:0),s&&qn(n[0],n[1],s)&&(o=3>r?y:o,r=1);++i<r;)(s=n[i])&&e(t,s,o);return t})}function Gt(e,t){return function(n,i){var r=n?Jr(n):0;if(!Nn(r))return e(n,i);for(var o=t?r:-1,s=On(n);(t?o--:++o<r)&&!1!==i(s[o],o,s););return n}}function Vt(e){return function(t,n,i){var r=On(t);i=i(t);for(var o=i.length,s=e?o:-1;e?s--:++s<o;){var a=i[s];if(!1===n(r[a],a,r))break}return t}}function Jt(e,t){function n(){return(this&&this!==Ge&&this instanceof n?i:e).apply(t,arguments)}var i=Qt(e);return n}function Kt(e){return function(t){var n=-1;t=Ni(_i(t));for(var i=t.length,r="";++n<i;)r=e(r,t[n],n);return r}}function Qt(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4])}var n=Ur(e.prototype),t=e.apply(n,t);return gi(t)?t:n}}function Yt(e){function t(n,i,r){return r&&qn(n,i,r)&&(i=null),n=gn(n,e,null,null,null,null,null,i),n.placeholder=t.placeholder,n}return t}function Xt(e,t){return function(n,i,r){if(r&&qn(n,i,r)&&(i=null),i=yn(i,r,3),1==i.length){r=n=Bn(n);for(var o=i,s=-1,a=r.length,l=t,u=l;++s<a;){var c=r[s],h=+o(c);e(h,l)&&(l=h,u=c)}if(r=u,!n.length||r!==t)return r}return ut(n,i,e,t)}}function Zt(e,n){return function(i,r,o){return r=yn(r,o,3),Ao(i)?(r=t(i,r,n),-1<r?i[r]:y):ht(i,r,e)}}function en(e){return function(n,i,r){return n&&n.length?(i=yn(i,r,3),t(n,i,e)):-1}}function tn(e){return function(t,n,i){return n=yn(n,i,3),ht(t,n,e,!0)}}function nn(e){return function(){for(var t,n=arguments.length,i=e?n:-1,r=0,o=Fi(n);e?i--:++i<n;){var s=o[r++]=arguments[i];if("function"!=typeof s)throw new Qi(M);!t&&Be.prototype.thru&&"wrapper"==Rn(s)&&(t=new Be([]))}for(i=t?-1:n;++i<n;){var s=o[i],r=Rn(s),a="wrapper"==r?Vr(s):null;t=a&&En(a[0])&&a[1]==(_|k|T|I)&&!a[4].length&&1==a[9]?t[Rn(a[0])].apply(t,a[3]):1==s.length&&En(s)?t[r]():t.thru(s)}return function(){var e=arguments;if(t&&1==e.length&&Ao(e[0]))return t.plant(e[0]).value();for(var i=0,e=n?o[i].apply(this,e):e[0];++i<n;)e=o[i].call(this,e);return e}}}function rn(e,t){return function(n,i,r){return"function"==typeof i&&r===y&&Ao(n)?e(n,i):t(n,Ut(i,r,3))}}function on(e){return function(t,n,i){return("function"!=typeof n||i!==y)&&(n=Ut(n,i,3)),e(t,n,Si)}}function sn(e){return function(t,n,i){return("function"!=typeof n||i!==y)&&(n=Ut(n,i,3)),e(t,n)}}function an(e){return function(t,n,i){var r={};return n=yn(n,i,3),pt(t,function(t,i,o){o=n(t,i,o),i=e?o:i,t=e?t:o,r[i]=t}),r}}function ln(e){return function(t,n,i){return t=r(t),(e?t:"")+fn(t,n,i)+(e?"":t)}}function un(e){var t=ui(function(n,i){var r=p(i,t.placeholder);return gn(n,e,null,i,r)});return t}function cn(e,t){return function(n,i,r,o){var s=3>arguments.length;return"function"==typeof i&&o===y&&Ao(n)?e(n,i,r,s):_t(n,yn(i,o,4),r,s,t)}}function hn(e,t,n,i,r,o,s,a,l,u){function c(){for(var R=arguments.length,x=R,k=Fi(R);x--;)k[x]=arguments[x];if(i&&(k=$t(k,i,r)),o&&(k=Ht(k,o,s)),g||v){var x=c.placeholder,S=p(k,x),R=R-S.length;if(R<u){var _=a?He(a):null,R=Sr(u-R,0),I=g?S:null,S=g?null:S,q=g?k:null,k=g?null:k;return t|=g?T:P,t&=~(g?P:T),m||(t&=~(C|w)),k=[e,t,n,q,I,k,S,_,l,R],_=hn.apply(y,k),En(e)&&Kr(_,k),_.placeholder=x,_}}if(x=f?n:this,_=d?x[e]:e,a)for(R=k.length,I=Tr(a.length,R),S=He(k);I--;)q=a[I],k[I]=In(q,R)?S[q]:y;return h&&l<k.length&&(k.length=l),this&&this!==Ge&&this instanceof c&&(_=b||Qt(e)),_.apply(x,k)}var h=t&_,f=t&C,d=t&w,g=t&k,m=t&x,v=t&S,b=d?null:Qt(e);return c}function fn(e,t,n){return e=e.length,t=+t,e<t&&xr(t)?(t-=e,n=null==n?" ":n+"",ji(n,ur(t/n.length)).slice(0,t)):""}function dn(e,t,n,i){function r(){for(var t=-1,a=arguments.length,l=-1,u=i.length,c=Fi(a+u);++l<u;)c[l]=i[l];for(;a--;)c[l++]=arguments[++t];return(this&&this!==Ge&&this instanceof r?s:e).apply(o?n:this,c)}var o=t&C,s=Qt(e);return r}function pn(e){return function(t,n,i,r){var o=yn(i);return null==i&&o===rt?Bt(t,n,e):Ot(t,n,o(i,r,1),e)}}function gn(e,t,n,i,r,o,s,a){var l=t&w;if(!l&&"function"!=typeof e)throw new Qi(M);var u=i?i.length:0;if(u||(t&=~(T|P),i=r=null),u-=r?r.length:0,t&P){var c=i,h=r;i=r=null}var f=l?null:Vr(e);return n=[e,t,n,i,r,c,h,o,s,a],f&&(i=n[1],t=f[1],a=i|t,r=t==_&&i==k||t==_&&i==I&&n[7].length<=f[8]||t==(_|I)&&i==k,(a<_||r)&&(t&C&&(n[2]=f[2],a|=i&C?0:x),(i=f[3])&&(r=n[3],n[3]=r?$t(r,i,f[4]):He(i),n[4]=r?p(n[3],B):He(f[4])),(i=f[5])&&(r=n[5],n[5]=r?Ht(r,i,f[6]):He(i),n[6]=r?p(n[5],B):He(f[6])),(i=f[7])&&(n[7]=He(i)),t&_&&(n[8]=null==n[8]?f[8]:Tr(n[8],f[8])),null==n[9]&&(n[9]=f[9]),n[0]=f[0],n[1]=a),t=n[1],a=n[9]),n[9]=null==a?l?0:e.length:Sr(a-u,0)||0,(f?Wr:Kr)(t==C?Jt(n[0],n[2]):t!=T&&t!=(C|T)||n[4].length?hn.apply(y,n):dn.apply(y,n),n)}function mn(e,t,n,i,r,o,s){var a=-1,l=e.length,u=t.length;if(l!=u&&(!r||u<=l))return!1;for(;++a<l;){var c=e[a],u=t[a],h=i?i(r?u:c,r?c:u,a):y;if(h!==y){if(h)continue;return!1}if(r){if(!Ye(t,function(e){return c===e||n(c,e,i,r,o,s)}))return!1}else if(c!==u&&!n(c,u,i,r,o,s))return!1}return!0}function vn(e,t,n){switch(n){case F:case $:return+e==+t;case H:return e.name==t.name&&e.message==t.message;case W:return e!=+e?t!=+t:e==+t;case V:case J:return e==t+""}return!1}function bn(e,t,n,i,r,o,s){var a=Go(e),l=a.length,u=Go(t).length;if(l!=u&&!r)return!1;for(u=l;u--;){var c=a[u];if(!(r?c in t:nr.call(t,c)))return!1}for(var h=r;++u<l;){var c=a[u],f=e[c],d=t[c],p=i?i(r?d:f,r?f:d,c):y;if(p===y?!n(f,d,i,r,o,s):!p)return!1;h||(h="constructor"==c)}return!(!h&&(n=e.constructor,i=t.constructor,n!=i&&"constructor"in e&&"constructor"in t&&!("function"==typeof n&&n instanceof n&&"function"==typeof i&&i instanceof i)))}function yn(e,t,n){var i=Le.callback||Ai,i=i===Ai?rt:i;return n?i(e,t,n):i}function Rn(e){for(var t=e.name,n=Br[t],i=n?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==e)return r.name}return t}function Cn(e,t,i){var r=Le.indexOf||Wn,r=r===Wn?n:r;return e?r(e,t,i):r}function wn(e){e=Ti(e);for(var t=e.length;t--;){var n=e[t][1];e[t][2]=n===n&&!gi(n)}return e}function xn(e,t){var n=null==e?y:e[t];return mi(n)?n:y}function kn(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&nr.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Sn(e){return e=e.constructor,"function"==typeof e&&e instanceof e||(e=Vi),new e}function Tn(e,t,n){var i=e.constructor;switch(t){case K:return Ft(e);case F:case $:return new i(+e);case Q:case Y:case X:case Z:case ee:case te:case ne:case ie:case re:return t=e.buffer,new i(n?Ft(t):t,e.byteOffset,e.length);case W:case J:return new i(e);case V:var r=new i(e.source,xe.exec(e));r.lastIndex=e.lastIndex}return r}function Pn(e,t,n){return null==e||jn(t,e)||(t=Un(t),e=1==t.length?e:vt(e,It(t,0,-1)),t=Gn(t)),t=null==e?e:e[t],null==t?y:t.apply(e,n)}function _n(e){return null!=e&&Nn(Jr(e))}function In(e,t){return e="number"==typeof e||Te.test(e)?+e:-1,t=null==t?Lr:t,-1<e&&0==e%1&&e<t}function qn(e,t,n){if(!gi(n))return!1;var i=typeof t;return!!("number"==i?_n(n)&&In(t,n.length):"string"==i&&t in n)&&(t=n[t],e===e?e===t:t!==t)}function jn(e,t){var n=typeof e;return!!("string"==n&&me.test(e)||"number"==n)||!Ao(e)&&(!ge.test(e)||null!=t&&e in On(t))}function En(e){var t=Rn(e);return t in Oe.prototype&&(t=Le[t],e===t||!!(t=Vr(t))&&e===t[0])}function Nn(e){return"number"==typeof e&&-1<e&&0==e%1&&e<=Lr}function An(e,t){e=On(e);for(var n=-1,i=t.length,r={};++n<i;){var o=t[n];o in e&&(r[o]=e[o])}return r}function Dn(e,t){var n={};return dt(e,function(e,i,r){t(e,i,r)&&(n[i]=e)}),n}function Ln(e){var t;if(!f(e)||rr.call(e)!=G||!(nr.call(e,"constructor")||"function"!=typeof(t=e.constructor)||t instanceof t))return!1;var n;return dt(e,function(e,t){n=t}),n===y||nr.call(e,n)}function Mn(e){for(var t=Si(e),n=t.length,i=n&&e.length,r=!!i&&Nn(i)&&(Ao(e)||hi(e)),o=-1,s=[];++o<n;){var a=t[o];(r&&In(a,i)||nr.call(e,a))&&s.push(a)}return s}function Bn(e){return null==e?[]:_n(e)?gi(e)?e:Vi(e):Pi(e)}function On(e){return gi(e)?e:Vi(e)}function Un(e){if(Ao(e))return e;var t=[];return r(e).replace(ve,function(e,n,i,r){t.push(i?r.replace(Ce,"$1"):n||e)}),t}function Fn(e){return e instanceof Oe?e.clone():new Be(e.__wrapped__,e.__chain__,He(e.__actions__))}function $n(e,t,n){return e&&e.length?((n?qn(e,t,n):null==t)&&(t=1),It(e,0>t?0:t)):[]}function Hn(e,t,n){var i=e?e.length:0;return i?((n?qn(e,t,n):null==t)&&(t=1),t=i-(+t||0),It(e,0,0>t?0:t)):[]}function zn(e){return e?e[0]:y}function Wn(e,t,i){var r=e?e.length:0;if(!r)return-1;if("number"==typeof i)i=0>i?Sr(r+i,0):i;else if(i)return i=Bt(e,t),e=e[i],(t===t?t===e:e!==e)?i:-1;return n(e,t,i||0)}function Gn(e){var t=e?e.length:0;return t?e[t-1]:y}function Vn(e){return $n(e,1)}function Jn(e,t,i,r){if(!e||!e.length)return[];null!=t&&"boolean"!=typeof t&&(r=i,i=qn(e,t,r)?null:t,t=!1);var o=yn();if((null!=i||o!==rt)&&(i=o(i,r,3)),t&&Cn()==n){t=i;var s;i=-1,r=e.length;for(var o=-1,a=[];++i<r;){var l=e[i],u=t?t(l,i,e):l;i&&s===u||(s=u,a[++o]=l)}e=a}else e=At(e,i);return e}function Kn(e){if(!e||!e.length)return[];var t=-1,n=0;e=Je(e,function(e){return _n(e)?(n=Sr(e.length,n),!0):void 0});for(var i=Fi(n);++t<n;)i[t]=Ke(e,kt(t));return i}function Qn(e,t,n){return e&&e.length?(e=Kn(e),null==t?e:(t=Ut(t,n,4),Ke(e,function(e){return Qe(e,t,y,!0)}))):[]}function Yn(e,t){var n=-1,i=e?e.length:0,r={};for(!i||t||Ao(e[0])||(t=[]);++n<i;){var o=e[n];t?r[o]=t[n]:o&&(r[o[0]]=o[1])}return r}function Xn(e){return e=Le(e),e.__chain__=!0,e}function Zn(e,t,n){return t.call(n,e)}function ei(e,t,n){var i=Ao(e)?We:lt;return n&&qn(e,t,n)&&(t=null),("function"!=typeof t||n!==y)&&(t=yn(t,n,3)),i(e,t)}function ti(e,t,n){var i=Ao(e)?Je:ct;return t=yn(t,n,3),i(e,t)}function ni(e,t,n,i){var r=e?Jr(e):0;return Nn(r)||(e=Pi(e),r=e.length),!!r&&(n="number"!=typeof n||i&&qn(t,n,i)?0:0>n?Sr(r+n,0):n||0,"string"==typeof e||!Ao(e)&&yi(e)?n<r&&-1<e.indexOf(t,n):-1<Cn(e,t,n))}function ii(e,t,n){var i=Ao(e)?Ke:Rt;return t=yn(t,n,3),i(e,t)}function ri(e,t,n){if(n?qn(e,t,n):null==t){e=Bn(e);var i=e.length;return 0<i?e[Pt(0,i-1)]:y}n=-1,e=wi(e);var i=e.length,r=i-1;for(t=Tr(0>t?0:+t||0,i);++n<t;){var i=Pt(n,r),o=e[i];e[i]=e[n],e[n]=o}return e.length=t,e}function oi(e,t,n){var i=Ao(e)?Ye:qt;return n&&qn(e,t,n)&&(t=null),("function"!=typeof t||n!==y)&&(t=yn(t,n,3)),i(e,t)}function si(e,t){var n;if("function"!=typeof t){if("function"!=typeof e)throw new Qi(M);var i=e;e=t,t=i}return function(){return 0<--e&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}}function ai(e,t,n){function i(){var n=t-(Co()-u);0>=n||n>t?(a&&cr(a),n=f,a=h=f=y,n&&(d=Co(),l=e.apply(c,s),h||a||(s=c=null))):h=mr(i,n)}function r(){h&&cr(h),a=h=f=y,(g||p!==t)&&(d=Co(),l=e.apply(c,s),h||a||(s=c=null))}function o(){if(s=arguments,u=Co(),c=this,f=g&&(h||!m),!1===p)var n=m&&!h;else{a||m||(d=u);var o=p-(u-d),v=0>=o||o>p;v?(a&&(a=cr(a)),d=u,l=e.apply(c,s)):a||(a=mr(r,o))}return v&&h?h=cr(h):h||t===p||(h=mr(i,t)),n&&(v=!0,l=e.apply(c,s)),!v||h||a||(s=c=null),l}var s,a,l,u,c,h,f,d=0,p=!1,g=!0;if("function"!=typeof e)throw new Qi(M);if(t=0>t?0:+t||0,!0===n)var m=!0,g=!1;else gi(n)&&(m=n.leading,p="maxWait"in n&&Sr(+n.maxWait||0,t),g="trailing"in n?n.trailing:g);return o.cancel=function(){h&&cr(h),a&&cr(a),a=h=f=y},o}function li(e,t){function n(){var i=arguments,r=t?t.apply(this,i):i[0],o=n.cache;return o.has(r)?o.get(r):(i=e.apply(this,i),n.cache=o.set(r,i),i)}if("function"!=typeof e||t&&"function"!=typeof t)throw new Qi(M);return n.cache=new li.Cache,n}function ui(e,t){if("function"!=typeof e)throw new Qi(M);return t=Sr(t===y?e.length-1:+t||0,0),function(){for(var n=arguments,i=-1,r=Sr(n.length-t,0),o=Fi(r);++i<r;)o[i]=n[t+i];switch(t){case 0:return e.call(this,o);case 1:return e.call(this,n[0],o);case 2:return e.call(this,n[0],n[1],o)}for(r=Fi(t+1),i=-1;++i<t;)r[i]=n[i];return r[t]=o,e.apply(this,r)}}function ci(e,t){return e>t}function hi(e){return f(e)&&_n(e)&&rr.call(e)==O}function fi(e){return!!e&&1===e.nodeType&&f(e)&&-1<rr.call(e).indexOf("Element")}function di(e,t,n,i){return i=(n="function"==typeof n?Ut(n,i,3):y)?n(e,t):y,i===y?bt(e,t,n):!!i}function pi(e){return f(e)&&"string"==typeof e.message&&rr.call(e)==H}function gi(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function mi(e){return null!=e&&(rr.call(e)==z?sr.test(tr.call(e)):f(e)&&Se.test(e))}function vi(e){return"number"==typeof e||f(e)&&rr.call(e)==W}function bi(e){return f(e)&&rr.call(e)==V}function yi(e){return"string"==typeof e||f(e)&&rr.call(e)==J}function Ri(e){return f(e)&&Nn(e.length)&&!!Ne[rr.call(e)]}function Ci(e,t){return e<t}function wi(e){var t=e?Jr(e):0;return Nn(t)?t?He(e):[]:Pi(e)}function xi(e){return it(e,Si(e))}function ki(e){return mt(e,Si(e))}function Si(e){if(null==e)return[];gi(e)||(e=Vi(e));for(var t=e.length,t=t&&Nn(t)&&(Ao(e)||hi(e))&&t||0,n=e.constructor,i=-1,n="function"==typeof n&&n.prototype===e,r=Fi(t),o=0<t;++i<t;)r[i]=i+"";for(var s in e)o&&In(s,t)||"constructor"==s&&(n||!nr.call(e,s))||r.push(s);return r}function Ti(e){e=On(e);for(var t=-1,n=Go(e),i=n.length,r=Fi(i);++t<i;){var o=n[t];r[t]=[o,e[o]]}return r}function Pi(e){return Dt(e,Go(e))}function _i(e){return(e=r(e))&&e.replace(Pe,l).replace(Re,"")}function Ii(e){return(e=r(e))&&ye.test(e)?e.replace(be,"\\$&"):e}function qi(e,t,n){return n&&qn(e,t,n)&&(t=0),Ir(e,t)}function ji(e,t){var n="";if(e=r(e),1>(t=+t)||!e||!xr(t))return n;do{t%2&&(n+=e),t=hr(t/2),e+=e}while(t);return n}function Ei(e,t,n){var i=e;return(e=r(e))?(n?qn(i,t,n):null==t)?e.slice(g(e),m(e)+1):(t+="",e.slice(o(e,t),s(e,t)+1)):e}function Ni(e,t,n){return n&&qn(e,t,n)&&(t=null),e=r(e),e.match(t||qe)||[]}function Ai(e,t,n){return n&&qn(e,t,n)&&(t=null),f(e)?Mi(e):rt(e,t)}function Di(e){return function(){return e}}function Li(e){return e}function Mi(e){return Ct(ot(e,!0))}function Bi(e,t,n){if(null==n){var i=gi(t),r=i?Go(t):null;((r=r&&r.length?mt(t,r):null)?r.length:i)||(r=!1,n=t,t=e,e=this)}r||(r=mt(t,Go(t)));var o=!0,i=-1,s=Lo(e),a=r.length;!1===n?o=!1:gi(n)&&"chain"in n&&(o=n.chain);for(;++i<a;){n=r[i];var l=t[n];e[n]=l,s&&(e.prototype[n]=function(t){return function(){var n=this.__chain__;if(o||n){var i=e(this.__wrapped__);return(i.__actions__=He(this.__actions__)).push({func:t,args:arguments,thisArg:e}),i.__chain__=n,i}return n=[this.value()],pr.apply(n,arguments),t.apply(e,n)}}(l))}return e}function Oi(){}function Ui(e){return jn(e)?kt(e):St(e)}d=d?Ve.defaults(Ge.Object(),d,Ve.pick(Ge,Ee)):Ge;var Fi=d.Array,$i=d.Date,Hi=d.Error,zi=d.Function,Wi=d.Math,Gi=d.Number,Vi=d.Object,Ji=d.RegExp,Ki=d.String,Qi=d.TypeError,Yi=Fi.prototype,Xi=Vi.prototype,Zi=Ki.prototype,er=(er=d.window)?er.document:null,tr=zi.prototype.toString,nr=Xi.hasOwnProperty,ir=0,rr=Xi.toString,or=d._,sr=Ji("^"+Ii(tr.call(nr)).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ar=xn(d,"ArrayBuffer"),lr=xn(ar&&new ar(0),"slice"),ur=Wi.ceil,cr=d.clearTimeout,hr=Wi.floor,fr=xn(Vi,"getPrototypeOf"),dr=d.parseFloat,pr=Yi.push,gr=xn(d,"Set"),mr=d.setTimeout,vr=Yi.splice,br=xn(d,"Uint8Array"),yr=xn(d,"WeakMap"),Rr=function(){try{var e=xn(d,"Float64Array"),t=new e(new ar(10),0,1)&&e}catch(e){}return t||null}(),Cr=xn(Vi,"create"),wr=xn(Fi,"isArray"),xr=d.isFinite,kr=xn(Vi,"keys"),Sr=Wi.max,Tr=Wi.min,Pr=xn($i,"now"),_r=xn(Gi,"isFinite"),Ir=d.parseInt,qr=Wi.random,jr=Gi.NEGATIVE_INFINITY,Er=Gi.POSITIVE_INFINITY,Nr=4294967294,Ar=2147483647,Dr=Rr?Rr.BYTES_PER_ELEMENT:0,Lr=9007199254740991,Mr=yr&&new yr,Br={},Or=Le.support={};!function(e){function t(){this.x=e}var n=[];t.prototype={valueOf:e,y:e};for(var i in new t)n.push(i);try{Or.dom=11===er.createDocumentFragment().nodeType}catch(e){Or.dom=!1}}(1),Le.templateSettings={escape:fe,evaluate:de,interpolate:pe,variable:"",imports:{_:Le}};var Ur=function(){function e(){}return function(t){if(gi(t)){e.prototype=t;var n=new e;e.prototype=null}return n||{}}}(),Fr=Gt(pt),$r=Gt(gt,!0),Hr=Vt(),zr=Vt(!0),Wr=Mr?function(e,t){return Mr.set(e,t),e}:Li;lr||(Ft=ar&&br?function(e){var t=e.byteLength,n=Rr?hr(t/Dr):0,i=n*Dr,r=new ar(t);if(n){var o=new Rr(r,0,n);o.set(new Rr(e,0,n))}return t!=i&&(o=new br(r,i),o.set(new br(e,i))),r}:Di(null));var Gr=Cr&&gr?function(e){return new Fe(e)}:Di(null),Vr=Mr?function(e){return Mr.get(e)}:Oi,Jr=kt("length"),Kr=function(){var e=0,t=0;return function(n,i){var r=Co(),o=N-(r-t);if(t=r,0<o){if(++e>=E)return n}else e=0;return Wr(n,i)}}(),Qr=ui(function(e,t){return _n(e)?at(e,ft(t,!1,!0)):[]}),Yr=en(),Xr=en(!0),Zr=ui(function(e){for(var t=e.length,i=t,r=Fi(c),o=Cn(),s=o==n,a=[];i--;){var l=e[i]=_n(l=e[i])?l:[];r[i]=s&&120<=l.length?Gr(i&&l):null}var s=e[0],u=-1,c=s?s.length:0,h=r[0];e:for(;++u<c;)if(l=s[u],0>(h?$e(h,l):o(a,l,0))){for(i=t;--i;){var f=r[i];if(0>(f?$e(f,l):o(e[i],l,0)))continue e}h&&h.push(l),a.push(l)}return a}),eo=ui(function(t,n){n=ft(n);var i=nt(t,n);return Tt(t,n.sort(e)),i}),to=pn(),no=pn(!0),io=ui(function(e){return At(ft(e,!1,!0))}),ro=ui(function(e,t){return _n(e)?at(e,t):[]}),oo=ui(Kn),so=ui(function(e){var t=e.length,n=2<t?e[t-2]:y,i=1<t?e[t-1]:y;return 2<t&&"function"==typeof n?t-=2:(n=1<t&&"function"==typeof i?(--t,i):y,i=y),e.length=t,Qn(e,n,i)}),ao=ui(function(e,t){return nt(e,ft(t))}),lo=zt(function(e,t,n){nr.call(e,n)?++e[n]:e[n]=1}),uo=Zt(Fr),co=Zt($r,!0),ho=rn(ze,Fr),fo=rn(function(e,t){for(var n=e.length;n--&&!1!==t(e[n],n,e););return e},$r),po=zt(function(e,t,n){nr.call(e,n)?e[n].push(t):e[n]=[t]}),go=zt(function(e,t,n){e[n]=t}),mo=ui(function(e,t,n){var i=-1,r="function"==typeof t,o=jn(t),s=_n(e)?Fi(e.length):[];return Fr(e,function(e){var a=r?t:o&&null!=e?e[t]:null;s[++i]=a?a.apply(e,n):Pn(e,t,n)}),s}),vo=zt(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),bo=cn(Qe,Fr),yo=cn(function(e,t,n,i){var r=e.length;for(i&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n},$r),Ro=ui(function(e,t){if(null==e)return[];var n=t[2];return n&&qn(t[0],t[1],n)&&(t.length=1),Et(e,ft(t),[])}),Co=Pr||function(){return(new $i).getTime()},wo=ui(function(e,t,n){var i=C;if(n.length)var r=p(n,wo.placeholder),i=i|T;return gn(e,i,t,n,r)}),xo=ui(function(e,t){t=t.length?ft(t):ki(e);for(var n=-1,i=t.length;++n<i;){var r=t[n];e[r]=gn(e[r],C,e)}return e}),ko=ui(function(e,t,n){var i=C|w;if(n.length)var r=p(n,ko.placeholder),i=i|T;return gn(t,i,e,n,r)}),So=Yt(k),To=Yt(S),Po=ui(function(e,t){return st(e,1,t)}),_o=ui(function(e,t,n){return st(e,t,n)}),Io=nn(),qo=nn(!0),jo=un(T),Eo=un(P),No=ui(function(e,t){return gn(e,I,null,null,null,ft(t))}),Ao=wr||function(e){return f(e)&&Nn(e.length)&&rr.call(e)==U};Or.dom||(fi=function(e){return!!e&&1===e.nodeType&&f(e)&&!Mo(e)});var Do=_r||function(e){return"number"==typeof e&&xr(e)},Lo=i(/x/)||br&&!i(br)?function(e){return rr.call(e)==z}:i,Mo=fr?function(e){if(!e||rr.call(e)!=G)return!1;var t=xn(e,"valueOf"),n=t&&(n=fr(t))&&fr(n);return n?e==n||fr(e)==n:Ln(e)}:Ln,Bo=Wt(function(e,t,n){return n?et(e,t,n):tt(e,t)}),Oo=ui(function(e){var t=e[0];return null==t?t:(e.push(Xe),Bo.apply(y,e))}),Uo=tn(pt),Fo=tn(gt),$o=on(Hr),Ho=on(zr),zo=sn(pt),Wo=sn(gt),Go=kr?function(e){var t=null==e?null:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&_n(e)?Mn(e):gi(e)?kr(e):[]}:Mn,Vo=an(!0),Jo=an(),Ko=Wt(xt),Qo=ui(function(e,t){if(null==e)return{};if("function"!=typeof t[0])return t=Ke(ft(t),Ki),An(e,at(Si(e),t));var n=Ut(t[0],t[1],3);return Dn(e,function(e,t,i){return!n(e,t,i)})}),Yo=ui(function(e,t){return null==e?{}:"function"==typeof t[0]?Dn(e,Ut(t[0],t[1],3)):An(e,ft(t))}),Xo=Kt(function(e,t,n){return t=t.toLowerCase(),e+(n?t.charAt(0).toUpperCase()+t.slice(1):t)}),Zo=Kt(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),es=ln(),ts=ln(!0);8!=Ir(je+"08")&&(qi=function(e,t,n){return(n?qn(e,t,n):null==t)?t=0:t&&(t=+t),e=Ei(e),Ir(e,t||(ke.test(e)?16:10))});var ns=Kt(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),is=Kt(function(e,t,n){return e+(n?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),rs=ui(function(e,t){try{return e.apply(y,t)}catch(e){return pi(e)?e:new Hi(e)}}),os=ui(function(e,t){return function(n){return Pn(n,e,t)}}),ss=ui(function(e,t){return function(n){return Pn(e,n,t)}}),as=Xt(ci,jr),ls=Xt(Ci,Er);return Le.prototype=Me.prototype,Be.prototype=Ur(Me.prototype),Be.prototype.constructor=Be,Oe.prototype=Ur(Me.prototype),Oe.prototype.constructor=Oe,Ue.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Ue.prototype.get=function(e){return"__proto__"==e?y:this.__data__[e]},Ue.prototype.has=function(e){return"__proto__"!=e&&nr.call(this.__data__,e)},Ue.prototype.set=function(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this},Fe.prototype.push=function(e){var t=this.data;"string"==typeof e||gi(e)?t.set.add(e):t.hash[e]=!0},li.Cache=Ue,Le.after=function(e,t){if("function"!=typeof t){if("function"!=typeof e)throw new Qi(M);var n=e;e=t,t=n}return e=xr(e=+e)?e:0,function(){return 1>--e?t.apply(this,arguments):void 0}},Le.ary=function(e,t,n){return n&&qn(e,t,n)&&(t=null),t=e&&null==t?e.length:Sr(+t||0,0),gn(e,_,null,null,null,null,t)},Le.assign=Bo,Le.at=ao,Le.before=si,Le.bind=wo,Le.bindAll=xo,Le.bindKey=ko,Le.callback=Ai,Le.chain=Xn,Le.chunk=function(e,t,n){t=(n?qn(e,t,n):null==t)?1:Sr(+t||1,1),n=0;for(var i=e?e.length:0,r=-1,o=Fi(ur(i/t));n<i;)o[++r]=It(e,n,n+=t);return o},Le.compact=function(e){for(var t=-1,n=e?e.length:0,i=-1,r=[];++t<n;){var o=e[t];o&&(r[++i]=o)}return r},Le.constant=Di,Le.countBy=lo,Le.create=function(e,t,n){var i=Ur(e);return n&&qn(e,t,n)&&(t=null),t?tt(i,t):i},Le.curry=So,Le.curryRight=To,
Le.debounce=ai,Le.defaults=Oo,Le.defer=Po,Le.delay=_o,Le.difference=Qr,Le.drop=$n,Le.dropRight=Hn,Le.dropRightWhile=function(e,t,n){return e&&e.length?Lt(e,yn(t,n,3),!0,!0):[]},Le.dropWhile=function(e,t,n){return e&&e.length?Lt(e,yn(t,n,3),!0):[]},Le.fill=function(e,t,n,i){var r=e?e.length:0;if(!r)return[];for(n&&"number"!=typeof n&&qn(e,t,n)&&(n=0,i=r),r=e.length,n=null==n?0:+n||0,0>n&&(n=-n>r?0:r+n),i=i===y||i>r?r:+i||0,0>i&&(i+=r),r=n>i?0:i>>>0,n>>>=0;n<r;)e[n++]=t;return e},Le.filter=ti,Le.flatten=function(e,t,n){var i=e?e.length:0;return n&&qn(e,t,n)&&(t=!1),i?ft(e,t):[]},Le.flattenDeep=function(e){return e&&e.length?ft(e,!0):[]},Le.flow=Io,Le.flowRight=qo,Le.forEach=ho,Le.forEachRight=fo,Le.forIn=$o,Le.forInRight=Ho,Le.forOwn=zo,Le.forOwnRight=Wo,Le.functions=ki,Le.groupBy=po,Le.indexBy=go,Le.initial=function(e){return Hn(e,1)},Le.intersection=Zr,Le.invert=function(e,t,n){n&&qn(e,t,n)&&(t=null),n=-1;for(var i=Go(e),r=i.length,o={};++n<r;){var s=i[n],a=e[s];t?nr.call(o,a)?o[a].push(s):o[a]=[s]:o[a]=s}return o},Le.invoke=mo,Le.keys=Go,Le.keysIn=Si,Le.map=ii,Le.mapKeys=Vo,Le.mapValues=Jo,Le.matches=Mi,Le.matchesProperty=function(e,t){return wt(e,ot(t,!0))},Le.memoize=li,Le.merge=Ko,Le.method=os,Le.methodOf=ss,Le.mixin=Bi,Le.negate=function(e){if("function"!=typeof e)throw new Qi(M);return function(){return!e.apply(this,arguments)}},Le.omit=Qo,Le.once=function(e){return si(2,e)},Le.pairs=Ti,Le.partial=jo,Le.partialRight=Eo,Le.partition=vo,Le.pick=Yo,Le.pluck=function(e,t){return ii(e,Ui(t))},Le.property=Ui,Le.propertyOf=function(e){return function(t){return vt(e,Un(t),t+"")}},Le.pull=function(){var e=arguments,t=e[0];if(!t||!t.length)return t;for(var n=0,i=Cn(),r=e.length;++n<r;)for(var o=0,s=e[n];-1<(o=i(t,s,o));)vr.call(t,o,1);return t},Le.pullAt=eo,Le.range=function(e,t,n){n&&qn(e,t,n)&&(t=n=null),e=+e||0,n=null==n?1:+n||0,null==t?(t=e,e=0):t=+t||0;var i=-1;t=Sr(ur((t-e)/(n||1)),0);for(var r=Fi(t);++i<t;)r[i]=e,e+=n;return r},Le.rearg=No,Le.reject=function(e,t,n){var i=Ao(e)?Je:ct;return t=yn(t,n,3),i(e,function(e,n,i){return!t(e,n,i)})},Le.remove=function(e,t,n){var i=[];if(!e||!e.length)return i;var r=-1,o=[],s=e.length;for(t=yn(t,n,3);++r<s;)n=e[r],t(n,r,e)&&(i.push(n),o.push(r));return Tt(e,o),i},Le.rest=Vn,Le.restParam=ui,Le.set=function(e,t,n){if(null==e)return e;var i=t+"";t=null!=e[i]||jn(t,e)?[i]:Un(t);for(var i=-1,r=t.length,o=r-1,s=e;null!=s&&++i<r;){var a=t[i];gi(s)&&(i==o?s[a]=n:null==s[a]&&(s[a]=In(t[i+1])?[]:{})),s=s[a]}return e},Le.shuffle=function(e){return ri(e,Er)},Le.slice=function(e,t,n){var i=e?e.length:0;return i?(n&&"number"!=typeof n&&qn(e,t,n)&&(t=0,n=i),It(e,t,n)):[]},Le.sortBy=function(e,t,n){if(null==e)return[];n&&qn(e,t,n)&&(t=null);var i=-1;return t=yn(t,n,3),e=Rt(e,function(e,n,r){return{a:t(e,n,r),b:++i,c:e}}),jt(e,a)},Le.sortByAll=Ro,Le.sortByOrder=function(e,t,n,i){return null==e?[]:(i&&qn(t,n,i)&&(n=null),Ao(t)||(t=null==t?[]:[t]),Ao(n)||(n=null==n?[]:[n]),Et(e,t,n))},Le.spread=function(e){if("function"!=typeof e)throw new Qi(M);return function(t){return e.apply(this,t)}},Le.take=function(e,t,n){return e&&e.length?((n?qn(e,t,n):null==t)&&(t=1),It(e,0,0>t?0:t)):[]},Le.takeRight=function(e,t,n){var i=e?e.length:0;return i?((n?qn(e,t,n):null==t)&&(t=1),t=i-(+t||0),It(e,0>t?0:t)):[]},Le.takeRightWhile=function(e,t,n){return e&&e.length?Lt(e,yn(t,n,3),!1,!0):[]},Le.takeWhile=function(e,t,n){return e&&e.length?Lt(e,yn(t,n,3)):[]},Le.tap=function(e,t,n){return t.call(n,e),e},Le.throttle=function(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new Qi(M);return!1===n?i=!1:gi(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),De.leading=i,De.maxWait=+t,De.trailing=r,ai(e,t,De)},Le.thru=Zn,Le.times=function(e,t,n){if(1>(e=hr(e))||!xr(e))return[];var i=-1,r=Fi(Tr(e,4294967295));for(t=Ut(t,n,1);++i<e;)4294967295>i?r[i]=t(i):t(i);return r},Le.toArray=wi,Le.toPlainObject=xi,Le.transform=function(e,t,n,i){var r=Ao(e)||Ri(e);return t=yn(t,i,4),null==n&&(r||gi(e)?(i=e.constructor,n=r?Ao(e)?new i:[]:Ur(Lo(i)?i.prototype:null)):n={}),(r?ze:pt)(e,function(e,i,r){return t(n,e,i,r)}),n},Le.union=io,Le.uniq=Jn,Le.unzip=Kn,Le.unzipWith=Qn,Le.values=Pi,Le.valuesIn=function(e){return Dt(e,Si(e))},Le.where=function(e,t){return ti(e,Ct(t))},Le.without=ro,Le.wrap=function(e,t){return t=null==t?Li:t,gn(t,T,null,[e],[])},Le.xor=function(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(_n(n))var i=i?at(i,n).concat(at(n,i)):n}return i?At(i):[]},Le.zip=oo,Le.zipObject=Yn,Le.zipWith=so,Le.backflow=qo,Le.collect=ii,Le.compose=qo,Le.each=ho,Le.eachRight=fo,Le.extend=Bo,Le.iteratee=Ai,Le.methods=ki,Le.object=Yn,Le.select=ti,Le.tail=Vn,Le.unique=Jn,Bi(Le,Le),Le.add=function(e,t){return(+e||0)+(+t||0)},Le.attempt=rs,Le.camelCase=Xo,Le.capitalize=function(e){return(e=r(e))&&e.charAt(0).toUpperCase()+e.slice(1)},Le.clone=function(e,t,n,i){return t&&"boolean"!=typeof t&&qn(e,t,n)?t=!1:"function"==typeof t&&(i=n,n=t,t=!1),"function"==typeof n?ot(e,t,Ut(n,i,1)):ot(e,t)},Le.cloneDeep=function(e,t,n){return"function"==typeof t?ot(e,!0,Ut(t,n,1)):ot(e,!0)},Le.deburr=_i,Le.endsWith=function(e,t,n){e=r(e),t+="";var i=e.length;return n=n===y?i:Tr(0>n?0:+n||0,i),0<=(n-=t.length)&&e.indexOf(t,n)==n},Le.escape=function(e){return(e=r(e))&&he.test(e)?e.replace(ue,u):e},Le.escapeRegExp=Ii,Le.every=ei,Le.find=uo,Le.findIndex=Yr,Le.findKey=Uo,Le.findLast=co,Le.findLastIndex=Xr,Le.findLastKey=Fo,Le.findWhere=function(e,t){return uo(e,Ct(t))},Le.first=zn,Le.get=function(e,t,n){return e=null==e?y:vt(e,Un(t),t+""),e===y?n:e},Le.gt=ci,Le.gte=function(e,t){return e>=t},Le.has=function(e,t){if(null==e)return!1;var n=nr.call(e,t);if(!n&&!jn(t)){if(t=Un(t),null==(e=1==t.length?e:vt(e,It(t,0,-1))))return!1;t=Gn(t),n=nr.call(e,t)}return n||Nn(e.length)&&In(t,e.length)&&(Ao(e)||hi(e))},Le.identity=Li,Le.includes=ni,Le.indexOf=Wn,Le.inRange=function(e,t,n){return t=+t||0,void 0===n?(n=t,t=0):n=+n||0,e>=Tr(t,n)&&e<Sr(t,n)},Le.isArguments=hi,Le.isArray=Ao,Le.isBoolean=function(e){return!0===e||!1===e||f(e)&&rr.call(e)==F},Le.isDate=function(e){return f(e)&&rr.call(e)==$},Le.isElement=fi,Le.isEmpty=function(e){return null==e||(_n(e)&&(Ao(e)||yi(e)||hi(e)||f(e)&&Lo(e.splice))?!e.length:!Go(e).length)},Le.isEqual=di,Le.isError=pi,Le.isFinite=Do,Le.isFunction=Lo,Le.isMatch=function(e,t,n,i){return n="function"==typeof n?Ut(n,i,3):y,yt(e,wn(t),n)},Le.isNaN=function(e){return vi(e)&&e!=+e},Le.isNative=mi,Le.isNull=function(e){return null===e},Le.isNumber=vi,Le.isObject=gi,Le.isPlainObject=Mo,Le.isRegExp=bi,Le.isString=yi,Le.isTypedArray=Ri,Le.isUndefined=function(e){return e===y},Le.kebabCase=Zo,Le.last=Gn,Le.lastIndexOf=function(e,t,n){var i=e?e.length:0;if(!i)return-1;var r=i;if("number"==typeof n)r=(0>n?Sr(i+n,0):Tr(n||0,i-1))+1;else if(n)return r=Bt(e,t,!0)-1,e=e[r],(t===t?t===e:e!==e)?r:-1;if(t!==t)return h(e,r,!0);for(;r--;)if(e[r]===t)return r;return-1},Le.lt=Ci,Le.lte=function(e,t){return e<=t},Le.max=as,Le.min=ls,Le.noConflict=function(){return d._=or,this},Le.noop=Oi,Le.now=Co,Le.pad=function(e,t,n){e=r(e),t=+t;var i=e.length;return i<t&&xr(t)?(i=(t-i)/2,t=hr(i),i=ur(i),n=fn("",i,n),n.slice(0,t)+e+n):e},Le.padLeft=es,Le.padRight=ts,Le.parseInt=qi,Le.random=function(e,t,n){n&&qn(e,t,n)&&(t=n=null);var i=null==e,r=null==t;return null==n&&(r&&"boolean"==typeof e?(n=e,e=1):"boolean"==typeof t&&(n=t,r=!0)),i&&r&&(t=1,r=!1),e=+e||0,r?(t=e,e=0):t=+t||0,n||e%1||t%1?(n=qr(),Tr(e+n*(t-e+dr("1e-"+((n+"").length-1))),t)):Pt(e,t)},Le.reduce=bo,Le.reduceRight=yo,Le.repeat=ji,Le.result=function(e,t,n){var i=null==e?y:e[t];return i===y&&(null==e||jn(t,e)||(t=Un(t),e=1==t.length?e:vt(e,It(t,0,-1)),i=null==e?y:e[Gn(t)]),i=i===y?n:i),Lo(i)?i.call(e):i},Le.runInContext=b,Le.size=function(e){var t=e?Jr(e):0;return Nn(t)?t:Go(e).length},Le.snakeCase=ns,Le.some=oi,Le.sortedIndex=to,Le.sortedLastIndex=no,Le.startCase=is,Le.startsWith=function(e,t,n){return e=r(e),n=null==n?0:Tr(0>n?0:+n||0,e.length),e.lastIndexOf(t,n)==n},Le.sum=function(e,t,n){n&&qn(e,t,n)&&(t=null);var i=yn(),r=null==t;if(r&&i===rt||(r=!1,t=i(t,n,3)),r){for(e=Ao(e)?e:Bn(e),t=e.length,n=0;t--;)n+=+e[t]||0;e=n}else e=Nt(e,t);return e},Le.template=function(e,t,n){var i=Le.templateSettings;n&&qn(e,t,n)&&(t=n=null),e=r(e),t=et(tt({},n||t),i,Ze),n=et(tt({},t.imports),i.imports,Ze);var o,s,a=Go(n),l=Dt(n,a),u=0;n=t.interpolate||_e;var h="__p+='";n=Ji((t.escape||_e).source+"|"+n.source+"|"+(n===pe?we:_e).source+"|"+(t.evaluate||_e).source+"|$","g");var f="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";if(e.replace(n,function(t,n,i,r,a,l){return i||(i=r),h+=e.slice(u,l).replace(Ie,c),n&&(o=!0,h+="'+__e("+n+")+'"),a&&(s=!0,h+="';"+a+";\n__p+='"),i&&(h+="'+((__t=("+i+"))==null?'':__t)+'"),u=l+t.length,t}),h+="';",(t=t.variable)||(h="with(obj){"+h+"}"),h=(s?h.replace(oe,""):h).replace(se,"$1").replace(ae,"$1;"),h="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(o?",__e=_.escape":"")+(s?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+h+"return __p}",t=rs(function(){return zi(a,f+"return "+h).apply(y,l)}),t.source=h,pi(t))throw t;return t},Le.trim=Ei,Le.trimLeft=function(e,t,n){var i=e;return(e=r(e))?e.slice((n?qn(i,t,n):null==t)?g(e):o(e,t+"")):e},Le.trimRight=function(e,t,n){var i=e;return(e=r(e))?(n?qn(i,t,n):null==t)?e.slice(0,m(e)+1):e.slice(0,s(e,t+"")+1):e},Le.trunc=function(e,t,n){n&&qn(e,t,n)&&(t=null);var i=q;if(n=j,null!=t)if(gi(t)){var o="separator"in t?t.separator:o,i="length"in t?+t.length||0:i;n="omission"in t?r(t.omission):n}else i=+t||0;if(e=r(e),i>=e.length)return e;if(1>(i-=n.length))return n;if(t=e.slice(0,i),null==o)return t+n;if(bi(o)){if(e.slice(i).search(o)){var s,a=e.slice(0,i);for(o.global||(o=Ji(o.source,(xe.exec(o)||"")+"g")),o.lastIndex=0;e=o.exec(a);)s=e.index;t=t.slice(0,null==s?i:s)}}else e.indexOf(o,i)!=i&&-1<(o=t.lastIndexOf(o))&&(t=t.slice(0,o));return t+n},Le.unescape=function(e){return(e=r(e))&&ce.test(e)?e.replace(le,v):e},Le.uniqueId=function(e){var t=++ir;return r(e)+t},Le.words=Ni,Le.all=ei,Le.any=oi,Le.contains=ni,Le.eq=di,Le.detect=uo,Le.foldl=bo,Le.foldr=yo,Le.head=zn,Le.include=ni,Le.inject=bo,Bi(Le,function(){var e={};return pt(Le,function(t,n){Le.prototype[n]||(e[n]=t)}),e}(),!1),Le.sample=ri,Le.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return ri(t,e)}):ri(this.value())},Le.VERSION=R,ze("bind bindKey curry curryRight partial partialRight".split(" "),function(e){Le[e].placeholder=Le}),ze(["dropWhile","filter","map","takeWhile"],function(e,t){var n=t!=L,i=t==A;Oe.prototype[e]=function(e,r){var o=this.__filtered__,s=o&&i?new Oe(this):this.clone();return(s.__iteratees__||(s.__iteratees__=[])).push({done:!1,count:0,index:0,iteratee:yn(e,r,1),limit:-1,type:t}),s.__filtered__=o||n,s}}),ze(["drop","take"],function(e,t){var n=e+"While";Oe.prototype[e]=function(n){var i=this.__filtered__,r=i&&!t?this.dropWhile():this.clone();return n=null==n?1:Sr(hr(n)||0,0),i?t?r.__takeCount__=Tr(r.__takeCount__,n):Gn(r.__iteratees__).limit=n:(r.__views__||(r.__views__=[])).push({size:n,type:e+(0>r.__dir__?"Right":"")}),r},Oe.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()},Oe.prototype[e+"RightWhile"]=function(e,t){return this.reverse()[n](e,t).reverse()}}),ze(["first","last"],function(e,t){var n="take"+(t?"Right":"");Oe.prototype[e]=function(){return this[n](1).value()[0]}}),ze(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");Oe.prototype[e]=function(){return this[n](1)}}),ze(["pluck","where"],function(e,t){var n=t?"filter":"map",i=t?Ct:Ui;Oe.prototype[e]=function(e){return this[n](i(e))}}),Oe.prototype.compact=function(){return this.filter(Li)},Oe.prototype.reject=function(e,t){return e=yn(e,t,1),this.filter(function(t){return!e(t)})},Oe.prototype.slice=function(e,t){e=null==e?0:+e||0;var n=this;return 0>e?n=this.takeRight(-e):e&&(n=this.drop(e)),t!==y&&(t=+t||0,n=0>t?n.dropRight(-t):n.take(t-e)),n},Oe.prototype.toArray=function(){return this.drop(0)},pt(Oe.prototype,function(e,t){var n=Le[t];if(n){var i=/^(?:filter|map|reject)|While$/.test(t),r=/^(?:first|last)$/.test(t);Le.prototype[t]=function(){function t(e){return e=[e],pr.apply(e,o),n.apply(Le,e)}var o=arguments,s=this.__chain__,a=this.__wrapped__,l=!!this.__actions__.length,u=a instanceof Oe,c=o[0],h=u||Ao(a);return h&&i&&"function"==typeof c&&1!=c.length&&(u=h=!1),u=u&&!l,r&&!s?u?e.call(a):n.call(Le,this.value()):h?(a=e.apply(u?a:new Oe(this),o),r||!l&&!a.__actions__||(a.__actions__||(a.__actions__=[])).push({func:Zn,args:[t],thisArg:Le}),new Be(a,s)):this.thru(t)}}}),ze("concat join pop push replace shift sort splice split unshift".split(" "),function(e){var t=(/^(?:replace|split)$/.test(e)?Zi:Yi)[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(e);Le.prototype[e]=function(){var e=arguments;return i&&!this.__chain__?t.apply(this.value(),e):this[n](function(n){return t.apply(n,e)})}}),pt(Oe.prototype,function(e,t){var n=Le[t];if(n){var i=n.name;(Br[i]||(Br[i]=[])).push({name:t,func:n})}}),Br[hn(null,w).name]=[{name:"wrapper",func:null}],Oe.prototype.clone=function(){var e=this.__actions__,t=this.__iteratees__,n=this.__views__,i=new Oe(this.__wrapped__);return i.__actions__=e?He(e):null,i.__dir__=this.__dir__,i.__filtered__=this.__filtered__,i.__iteratees__=t?He(t):null,i.__takeCount__=this.__takeCount__,i.__views__=n?He(n):null,i},Oe.prototype.reverse=function(){if(this.__filtered__){var e=new Oe(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e},Oe.prototype.value=function(){var e=this.__wrapped__.value();if(!Ao(e))return Mt(e,this.__actions__);var t,n=this.__dir__,i=0>n;t=e.length;for(var r=this.__views__,o=0,s=-1,a=r?r.length:0;++s<a;){var l=r[s],u=l.size;switch(l.type){case"drop":o+=u;break;case"dropRight":t-=u;break;case"take":t=Tr(t,o+u);break;case"takeRight":o=Sr(o,t-u)}}t={start:o,end:t},r=t.start,o=t.end,t=o-r,r=i?o:r-1,o=Tr(t,this.__takeCount__),a=(s=this.__iteratees__)?s.length:0,l=0,u=[];e:for(;t--&&l<o;){for(var r=r+n,c=-1,h=e[r];++c<a;){var f=s[c],d=f.iteratee,p=f.type;if(p==A){if(f.done&&(i?r>f.index:r<f.index)&&(f.count=0,f.done=!1),f.index=r,!(f.done||(p=f.limit,f.done=-1<p?f.count++>=p:!d(h))))continue e}else if(f=d(h),p==L)h=f;else if(!f){if(p==D)continue e;break e}}u[l++]=h}return u},Le.prototype.chain=function(){return Xn(this)},Le.prototype.commit=function(){return new Be(this.value(),this.__chain__)},Le.prototype.plant=function(e){for(var t,n=this;n instanceof Me;){var i=Fn(n);t?r.__wrapped__=i:t=i;var r=i,n=n.__wrapped__}return r.__wrapped__=e,t},Le.prototype.reverse=function(){var e=this.__wrapped__;return e instanceof Oe?(this.__actions__.length&&(e=new Oe(this)),new Be(e.reverse(),this.__chain__)):this.thru(function(e){return e.reverse()})},Le.prototype.toString=function(){return this.value()+""},Le.prototype.run=Le.prototype.toJSON=Le.prototype.valueOf=Le.prototype.value=function(){return Mt(this.__wrapped__,this.__actions__)},Le.prototype.collect=Le.prototype.map,Le.prototype.head=Le.prototype.first,Le.prototype.select=Le.prototype.filter,Le.prototype.tail=Le.prototype.rest,Le}var y,R="3.9.3",C=1,w=2,x=4,k=8,S=16,T=32,P=64,_=128,I=256,q=30,j="...",E=150,N=16,A=0,D=1,L=2,M="Expected a function",B="__lodash_placeholder__",O="[object Arguments]",U="[object Array]",F="[object Boolean]",$="[object Date]",H="[object Error]",z="[object Function]",W="[object Number]",G="[object Object]",V="[object RegExp]",J="[object String]",K="[object ArrayBuffer]",Q="[object Float32Array]",Y="[object Float64Array]",X="[object Int8Array]",Z="[object Int16Array]",ee="[object Int32Array]",te="[object Uint8Array]",ne="[object Uint8ClampedArray]",ie="[object Uint16Array]",re="[object Uint32Array]",oe=/\b__p\+='';/g,se=/\b(__p\+=)''\+/g,ae=/(__e\(.*?\)|\b__t\))\+'';/g,le=/&(?:amp|lt|gt|quot|#39|#96);/g,ue=/[&<>"'`]/g,ce=RegExp(le.source),he=RegExp(ue.source),fe=/<%-([\s\S]+?)%>/g,de=/<%([\s\S]+?)%>/g,pe=/<%=([\s\S]+?)%>/g,ge=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,me=/^\w*$/,ve=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,be=/[.*+?^${}()|[\]\/\\]/g,ye=RegExp(be.source),Re=/[\u0300-\u036f\ufe20-\ufe23]/g,Ce=/\\(\\)?/g,we=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xe=/\w*$/,ke=/^0[xX]/,Se=/^\[object .+?Constructor\]$/,Te=/^\d+$/,Pe=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,_e=/($^)/,Ie=/['\n\r\u2028\u2029\\]/g,qe=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?=[A-Z\\xc0-\\xd6\\xd8-\\xde][a-z\\xdf-\\xf6\\xf8-\\xff]+)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|[0-9]+","g"),je=" \t\v\f\ufeff\n\r\u2028\u2029",Ee="Array ArrayBuffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Math Number Object RegExp Set String _ clearTimeout document isFinite parseFloat parseInt setTimeout TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap window".split(" "),Ne={};Ne[Q]=Ne[Y]=Ne[X]=Ne[Z]=Ne[ee]=Ne[te]=Ne[ne]=Ne[ie]=Ne[re]=!0,Ne[O]=Ne[U]=Ne[K]=Ne[F]=Ne[$]=Ne[H]=Ne[z]=Ne["[object Map]"]=Ne[W]=Ne[G]=Ne[V]=Ne["[object Set]"]=Ne[J]=Ne["[object WeakMap]"]=!1;var Ae={};Ae[O]=Ae[U]=Ae[K]=Ae[F]=Ae[$]=Ae[Q]=Ae[Y]=Ae[X]=Ae[Z]=Ae[ee]=Ae[W]=Ae[G]=Ae[V]=Ae[J]=Ae[te]=Ae[ne]=Ae[ie]=Ae[re]=!0,Ae[H]=Ae[z]=Ae["[object Map]"]=Ae["[object Set]"]=Ae["[object WeakMap]"]=!1;var De={leading:!1,maxWait:0,trailing:!1},Le={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},Me={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Be={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Oe={function:!0,object:!0},Ue={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Fe=Oe[typeof exports]&&exports&&!exports.nodeType&&exports,$e=Oe[typeof module]&&module&&!module.nodeType&&module,He=Oe[typeof self]&&self&&self.Object&&self,ze=Oe[typeof window]&&window&&window.Object&&window,We=$e&&$e.exports===Fe&&Fe,Ge=Fe&&$e&&"object"==typeof global&&global&&global.Object&&global||ze!==(this&&this.window)&&ze||He||this,Ve=b();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Ge._=Ve,define(function(){return Ve})):Fe&&$e?We?($e.exports=Ve)._=Ve:Fe._=Ve:Ge._=Ve}.call(this),function(e,t){function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function i(e){return void 0===e}var r={},o=e.TraceKit,s=[].slice,a="?";r.noConflict=function(){return e.TraceKit=o,r},r.wrap=function(e){function t(){try{return e.apply(this,arguments)}catch(e){throw r.report(e),e}}return t},r.report=function(){function t(e){l(),f.push(e)}function i(e){for(var t=f.length-1;t>=0;--t)f[t]===e&&f.splice(t,1)}function o(e,t){var i=null;if(!t||r.collectWindowErrors){for(var o in f)if(n(f,o))try{f[o].apply(null,[e].concat(s.call(arguments,2)))}catch(e){i=e}if(i)throw i}}function a(e,t,n,i,s){var a=null;if(s)a=r.computeStackTrace(s);else if(p)r.computeStackTrace.augmentStackTraceWithInitialElement(p,t,n,e),a=p,p=null,d=null;else{var l={url:t,line:n,column:i};l.func=r.computeStackTrace.guessFunctionName(l.url,l.line),l.context=r.computeStackTrace.gatherContext(l.url,l.line),a={mode:"onerror",message:e,url:document.location.href,stack:[l],useragent:navigator.userAgent}}return o(a,"from window.onerror"),!!c&&c.apply(this,arguments)}function l(){!0!==h&&(c=e.onerror,e.onerror=a,h=!0)}function u(t){var n=s.call(arguments,1);if(p){if(d===t)return;var i=p;p=null,d=null,o.apply(null,[i,null].concat(n))}var a=r.computeStackTrace(t);throw p=a,d=t,e.setTimeout(function(){d===t&&(p=null,d=null,o.apply(null,[a,null].concat(n)))},a.incomplete?2e3:0),t}var c,h,f=[],d=null,p=null;return u.subscribe=t,u.unsubscribe=i,u}(),r.computeStackTrace=function(){function t(t){if("string"!=typeof t)return[];if(!r.remoteFetching)return"";try{var n=function(){try{return new e.XMLHttpRequest}catch(t){return new e.ActiveXObject("Microsoft.XMLHTTP")}}();return n.open("GET",t,!1),n.send(""),n.responseText}catch(e){return""}}function o(e){if(!n(w,e)){var i="";e=e||"",e.indexOf&&-1!==e.indexOf(document.domain)&&(i=t(e)),w[e]=i?i.split("\n"):[]}return w[e]}function s(e,t){var n,r=/function ([^(]*)\(([^)]*)\)/,s=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,l="",u=o(e);if(!u.length)return a;for(var c=0;10>c;++c)if(l=u[t-c]+l,!i(l)){if(n=s.exec(l))return n[1];if(n=r.exec(l))return n[1]}return a}function l(e,t){var n=o(e);if(!n.length)return null;var s=[],a=Math.floor(r.linesOfContext/2),l=a+r.linesOfContext%2,u=Math.max(0,t-a-1),c=Math.min(n.length,t+l-1);t-=1;for(var h=u;c>h;++h)i(n[h])||s.push(n[h]);return s.length>0?s:null}function u(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function c(e){return u(e).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function h(e,t){for(var n,i,r=0,s=t.length;s>r;++r)if((n=o(t[r])).length&&(n=n.join("\n"),i=e.exec(n)))return{url:t[r],line:n.substring(0,i.index).split("\n").length,column:i.index-n.lastIndexOf("\n",i.index)-1};return null}function f(e,t,n){var i,r=o(t),s=new RegExp("\\b"+u(e)+"\\b");return n-=1,r&&r.length>n&&(i=s.exec(r[n]))?i.index:null}function d(t){for(var n,i,r,o,s=[e.location.href],a=document.getElementsByTagName("script"),l=""+t,f=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,d=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,p=0;p<a.length;++p){var g=a[p];g.src&&s.push(g.src)}if(r=f.exec(l)){var m=r[1]?"\\s+"+r[1]:"",v=r[2].split(",").join("\\s*,\\s*");n=u(r[3]).replace(/;$/,";?"),i=new RegExp("function"+m+"\\s*\\(\\s*"+v+"\\s*\\)\\s*{\\s*"+n+"\\s*}")}else i=new RegExp(u(l).replace(/\s+/g,"\\s+"));if(o=h(i,s))return o;if(r=d.exec(l)){var b=r[1];if(n=c(r[2]),i=new RegExp("on"+b+"=[\\'\"]\\s*"+n+"\\s*[\\'\"]","i"),o=h(i,s[0]))return o;if(i=new RegExp(n),o=h(i,s))return o}return null}function p(e){if(!e.stack)return null;for(var t,n,i=/^\s*at (.*?) ?\(?((?:file|http|https|chrome-extension):.*?):(\d+)(?::(\d+))?\)?\s*$/i,r=/^\s*(.*?)(?:\((.*?)\))?@?((?:file|http|https|chrome):.*?):(\d+)(?::(\d+))?\s*$/i,o=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:ms-appx|http|https):.*?):(\d+)(?::(\d+))?\)?\s*$/i,u=e.stack.split("\n"),c=[],h=/^(.*) is undefined$/.exec(e.message),d=0,p=u.length;p>d;++d){if(t=r.exec(u[d]))n={url:t[3],func:t[1]||a,args:t[2]?t[2].split(","):"",line:+t[4],column:t[5]?+t[5]:null};else if(t=i.exec(u[d]))n={url:t[2],func:t[1]||a,line:+t[3],column:t[4]?+t[4]:null};else{if(!(t=o.exec(u[d])))continue;n={url:t[2],func:t[1]||a,line:+t[3],column:t[4]?+t[4]:null}}!n.func&&n.line&&(n.func=s(n.url,n.line)),n.line&&(n.context=l(n.url,n.line)),c.push(n)}return c[0]&&c[0].line&&!c[0].column&&h?c[0].column=f(h[1],c[0].url,c[0].line):c[0].column||void 0===e.columnNumber||(c[0].column=e.columnNumber+1),c.length?{mode:"stack",name:e.name,message:e.message,url:document.location.href,stack:c,useragent:navigator.userAgent}:null}function g(e){for(var t,n=e.stacktrace,i=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,r=n.split("\n"),o=[],a=0,u=r.length;u>a;a+=2)if(t=i.exec(r[a])){var c={line:+t[1],column:+t[2],func:t[3]||t[4],args:t[5]?t[5].split(","):[],url:t[6]};if(!c.func&&c.line&&(c.func=s(c.url,c.line)),c.line)try{c.context=l(c.url,c.line)}catch(e){}c.context||(c.context=[r[a+1]]),o.push(c)}return o.length?{mode:"stacktrace",name:e.name,message:e.message,url:document.location.href,stack:o,useragent:navigator.userAgent}:null}function m(t){var i=t.message.split("\n");if(i.length<4)return null;var r,a,u,f,d=/^\s*Line (\d+) of linked script ((?:file|http|https)\S+)(?:: in function (\S+))?\s*$/i,p=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|http|https)\S+)(?:: in function (\S+))?\s*$/i,g=/^\s*Line (\d+) of function script\s*$/i,m=[],v=document.getElementsByTagName("script"),b=[];for(a in v)n(v,a)&&!v[a].src&&b.push(v[a]);for(a=2,u=i.length;u>a;a+=2){var y=null;if(r=d.exec(i[a]))y={url:r[2],func:r[3],line:+r[1]};else if(r=p.exec(i[a])){y={url:r[3],func:r[4]};var R=+r[1],C=b[r[2]-1];if(C&&(f=o(y.url))){f=f.join("\n");var w=f.indexOf(C.innerText);w>=0&&(y.line=R+f.substring(0,w).split("\n").length)}}else if(r=g.exec(i[a])){var x=e.location.href.replace(/#.*$/,""),k=r[1],S=new RegExp(c(i[a+1]));f=h(S,[x]),y={url:x,line:f?f.line:k,func:""}}if(y){y.func||(y.func=s(y.url,y.line));var T=l(y.url,y.line),P=T?T[Math.floor(T.length/2)]:null;T&&P.replace(/^\s*/,"")===i[a+1].replace(/^\s*/,"")?y.context=T:y.context=[i[a+1]],m.push(y)}}return m.length?{mode:"multiline",name:t.name,message:i[0],url:document.location.href,stack:m,useragent:navigator.userAgent}:null}function v(e,t,n,i){var r={url:t,line:n};if(r.url&&r.line){e.incomplete=!1,r.func||(r.func=s(r.url,r.line)),r.context||(r.context=l(r.url,r.line));var o=/ '([^']+)' /.exec(i);if(o&&(r.column=f(o[1],r.url,r.line)),e.stack.length>0&&e.stack[0].url===r.url){if(e.stack[0].line===r.line)return!1;if(!e.stack[0].line&&e.stack[0].func===r.func)return e.stack[0].line=r.line,e.stack[0].context=r.context,!1}return e.stack.unshift(r),e.partial=!0,!0}return e.incomplete=!0,!1}function b(e,t){for(var n,i,o,l=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,u=[],c={},h=!1,p=b.caller;p&&!h;p=p.caller)if(p!==y&&p!==r.report){if(i={url:null,func:a,line:null,column:null},p.name?i.func=p.name:(n=l.exec(p.toString()))&&(i.func=n[1]),void 0===i.func)try{i.func=n.input.substring(0,n.input.indexOf("{"))}catch(e){}if(o=d(p)){i.url=o.url,i.line=o.line,i.func===a&&(i.func=s(i.url,i.line));var g=/ '([^']+)' /.exec(e.message||e.description);g&&(i.column=f(g[1],o.url,o.line))}c[""+p]?h=!0:c[""+p]=!0,u.push(i)}t&&u.splice(0,t);var m={mode:"callers",name:e.name,message:e.message,url:document.location.href,stack:u,useragent:navigator.userAgent};return v(m,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),m}function y(e,t){var n=null;t=null==t?0:+t;try{if(n=g(e))return n}catch(e){if(C)throw e}try{if(n=p(e))return n}catch(e){if(C)throw e}try{if(n=m(e))return n}catch(e){if(C)throw e}try{if(n=b(e,t+1))return n}catch(e){if(C)throw e}return{mode:"failed"}}function R(e){e=1+(null==e?0:+e);try{throw new Error}catch(t){return y(t,e+1)}}var C=!1,w={};return y.augmentStackTraceWithInitialElement=v,y.guessFunctionName=s,y.gatherContext=l,y.ofCaller=R,y}(),r.extendToAsynchronousCallbacks=function(){var t=function(t){var n=e[t];e[t]=function(){var e=s.call(arguments),t=e[0];return"function"==typeof t&&(e[0]=r.wrap(t)),n.apply?n.apply(this,e):n(e[0],e[1])}};t("setTimeout"),t("setInterval")},r.remoteFetching||(r.remoteFetching=!0),r.collectWindowErrors||(r.collectWindowErrors=!0),(!r.linesOfContext||r.linesOfContext<1)&&(r.linesOfContext=11),e.TraceKit=r}(window),function(e,t){"use strict";if(e){var n=e.event.add;e.event.add=function(i,r,o,s,a){var l;return o.handler?(l=o.handler,o.handler=t.wrap(o.handler)):(l=o,o=t.wrap(o)),l.guid?o.guid=l.guid:o.guid=l.guid=e.guid++,n.call(this,i,r,o,s,a)};var i=e.fn.ready;e.fn.ready=function(e){return i.call(this,t.wrap(e))};var r=e.ajax;e.ajax=function(n,i){"object"==typeof n&&(i=n,n=void 0),i=i||{};for(var o,s=["complete","error","success"];o=s.pop();)e.isFunction(i[o])&&(i[o]=t.wrap(i[o]));try{return n?r.call(this,n,i):r.call(this,i)}catch(e){throw t.report(e),e}}}}(window.jQuery,window.TraceKit);var raygunFactory=function(e,t,n){function i(e){var t=e,n=e.split("//")[1];if(n){var i=n.indexOf("?"),r=n.toString().substring(0,i),o=r.split("/").slice(0,4).join("/"),s=r.substring(0,48);(t=o.length<s.length?o:s)!==r&&(t+="..")}return t}function r(e,t,r,o){var s="AJAX Error: "+(t.statusText||"unknown")+" "+(r.type||"unknown")+" "+(i(r.url)||"unknown");(!E||t.getAllResponseHeaders())&&W.send(o||e.type,{status:t.status,statusText:t.statusText,type:r.type,url:r.url,ajaxErrorMessage:s,contentType:r.contentType,requestData:r.data&&r.data.slice?r.data.slice(0,10240):n,responseData:t.responseText&&t.responseText.slice?t.responseText.slice(0,10240):n,activeTarget:e.target&&e.target.activeElement?e.target.activeElement.outerHTML:n})}function o(){return!(!w||""===w)||(G.log("Raygun API key has not been configured, make sure you call Raygun.init(yourApiKey)"),!1)}function s(e,t){var n,i={};for(n in e)i[n]=e[n];for(n in t)i[n]=t[n];return i}function a(e,t){return null!=t?e.concat(t):e}function l(e,t){for(var n=0;n<e.length;n++)t.call(null,n,e[n])}function u(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function c(){return Math.floor(9007199254740992*Math.random())}function h(){var t=document.documentElement,n=document.getElementsByTagName("body")[0];return{width:e.innerWidth||t.clientWidth||n.clientWidth,height:e.innerHeight||t.clientHeight||n.clientHeight}}function f(e){var t=(new Date).toJSON();try{var n="raygunjs="+t+"="+c();void 0===localStorage[n]&&(localStorage[n]=e)}catch(e){G.log("Raygun4JS: LocalStorage full, cannot save exception")}}function d(){try{return"localStorage"in e&&null!==e.localStorage}catch(e){return!1}}function p(){if(d()&&localStorage&&localStorage.length>0)for(var e in localStorage)"raygunjs="===e.substring(0,9)&&(y(JSON.parse(localStorage[e])),localStorage.removeItem(e))}function g(){if(!x&&!L){var e,t="raygun4js-userid",n=G.readCookie(t);n?e=n:(e=G.getUuid(),G.createCookie(t,e,744)),W.setUser(e,!0,null,null,null,e)}}function m(e,t){if(S)for(var n=0;n<S.length;n++)if("object"==typeof S[n]&&"function"==typeof S[n].exec){if(null!==S[n].exec(e))return"[removed by filter]"}else if(S[n]===e)return"[removed by filter]";return t}function v(e,t){if(null==e)return e;if("[object Object]"!==Object.prototype.toString.call(e))return e;for(var n in e){var i=e[n];null!=i&&("[object Object]"===Object.prototype.toString.call(i)?("Details"!==t||"Client"!==n)&&(e[n]=v(m(n,i),n)):(void 0!==t||"OccurredOn"!==n)&&(e[n]=m(n,i)))}return e}function b(t,i){var r=[],o={};if(D){if(!t.stack||!t.stack.length)return void G.log("Raygun4JS: Cancelling send due to null stacktrace");var s=G.parseUrl("domain"),a="Script error",c=t.message||i.status||a;if(c.substring(0,a.length)===a&&null!==t.stack[0].url&&-1===t.stack[0].url.indexOf(s)&&(0===t.stack[0].line||"?"===t.stack[0].func))return void G.log("Raygun4JS: cancelling send due to third-party script error with no stacktrace and message");if(null!==t.stack[0].url&&-1===t.stack[0].url.indexOf(s)){var f=!1;for(var d in U)t.stack[0].url.indexOf(U[d])>-1&&(f=!0);if(!f)return void G.log("Raygun4JS: cancelling send due to error on non-origin, non-whitelisted domain")}}if($ instanceof Array)for(var p in $)if($.hasOwnProperty(p)&&e.location.hostname&&e.location.hostname.match($[p]))return void G.log("Raygun4JS: cancelling send as error originates from an excluded hostname");if(H instanceof Array)for(var b in H)if(H.hasOwnProperty(b)&&navigator.userAgent.match(H[b]))return void G.log("Raygun4JS: cancelling send as error originates from an excluded user agent");t.stack&&t.stack.length&&l(t.stack,function(e,t){r.push({LineNumber:t.line,ColumnNumber:t.column,ClassName:"line "+t.line+", column "+t.column,FileName:t.url,MethodName:t.func||"[anonymous]"})});var R=G.parseUrl("?");R.length>0&&l(R.split("&"),function(e,t){var n=t.split("=");if(n&&2===n.length){var i=decodeURIComponent(n[0]),r=m(i,n[1]);o[i]=r}}),i===n&&(i={}),u(i.customData)&&(i.customData="function"==typeof B?B():B),u(i.tags)&&(i.tags="function"==typeof O?O():O);var C,w=e.screen||{width:h().width,height:h().height,colorDepth:8},S=i.customData&&i.customData.ajaxErrorMessage;C="customData"===z?v(i.customData,"UserCustomData"):i.customData;try{JSON.stringify(C)}catch(e){
var c="Cannot add custom data; may contain circular reference";C={error:c},G.log("Raygun4JS: "+c)}var P=S||t.message||i.status||"Script error";P=P.substring(0,512);var _={OccurredOn:new Date,Details:{Error:{ClassName:t.name,Message:P,StackTrace:r},Environment:{UtcOffset:(new Date).getTimezoneOffset()/-60,"User-Language":navigator.userLanguage,"Document-Mode":document.documentMode,"Browser-Width":h().width,"Browser-Height":h().height,"Screen-Width":w.width,"Screen-Height":w.height,"Color-Depth":w.colorDepth,Browser:navigator.appCodeName,"Browser-Name":navigator.appName,"Browser-Version":navigator.appVersion,Platform:navigator.platform},Client:{Name:"raygun-js",Version:"1.18.3"},UserCustomData:C,Tags:i.tags,Request:{Url:[location.protocol,"//",location.host,location.pathname,location.hash].join(""),QueryString:o,Headers:{"User-Agent":navigator.userAgent,Referer:document.referrer,Host:document.domain}},Version:k||"Not supplied"}};if(g(),_.Details.User=x,"all"===z&&(_=v(_)),"function"==typeof T){var I=T(_);I&&y(I)}else y(_)}function y(e){if(o()){G.log("Sending exception data to Raygun:",e);C(F+"/entries?apikey="+encodeURIComponent(w),JSON.stringify(e))}}function R(t,n){var i;return i=new e.XMLHttpRequest,"withCredentials"in i?i.open(t,n,!0):e.XDomainRequest&&(j&&(n=n.slice(6)),i=new e.XDomainRequest,i.open(t,n)),i.timeout=1e4,i}function C(t,n){var i=R("POST",t,n);return"withCredentials"in i?(i.onreadystatechange=function(){4===i.readyState&&(202===i.status?p():A&&403!==i.status&&400!==i.status&&f(n))},i.onload=function(){G.log("logged error to Raygun")}):e.XDomainRequest&&(i.ontimeout=function(){A&&(G.log("Raygun: saved error locally"),f(n))},i.onload=function(){G.log("logged error to Raygun"),p()}),i.onerror=function(){G.log("failed to log error to Raygun")},i?void i.send(n):void G.log("CORS not supported")}var w,x,k,S,T,P,_=TraceKit,I=e.Raygun,q=!1,j=!1,E=!1,N=!1,A=!1,D=!1,L=!1,M=!1,B={},O=[],U=[],F="https://api.raygun.io",$=null,H=null,z="customData";t&&(P=t(document));var W={noConflict:function(){return e.Raygun=I,W},constructNewRaygun:function(){var t=e.raygunFactory(e,e.jQuery);return e.raygunJsUrlFactory(e,t),t},init:function(e,t,n){return w=e,_.remoteFetching=!1,B=n,t&&(j=t.allowInsecureSubmissions||!1,E=t.ignoreAjaxAbort||!1,N=t.ignoreAjaxError||!1,L=t.disableAnonymousUserTracking||!1,$=t.excludedHostnames||!1,H=t.excludedUserAgents||!1,void 0!==t.wrapAsynchronousCallbacks&&(M=t.wrapAsynchronousCallbacks),t.debugMode&&(q=t.debugMode),t.ignore3rdPartyErrors&&(D=!0)),p(),W},withCustomData:function(e){return B=e,W},withTags:function(e){return O=e,W},attach:function(){return o()?(_.report.subscribe(b),M&&_.extendToAsynchronousCallbacks(),P&&!N&&P.ajaxError(r),W):W},detach:function(){return _.report.unsubscribe(b),P&&P.unbind("ajaxError",r),W},send:function(e,t,n){try{b(_.computeStackTrace(e),{customData:"function"==typeof B?s(B(),t):s(B,t),tags:a(O,n)})}catch(t){if(e!==t)throw t}return W},setUser:function(e,t,n,i,r,o){return x={Identifier:e},void 0!==t&&(x.IsAnonymous=t),void 0!==n&&(x.Email=n),void 0!==i&&(x.FullName=i),void 0!==r&&(x.FirstName=r),void 0!==o&&(x.UUID=o),W},resetAnonymousUser:function(){G.clearCookie("raygun4js-userid")},setVersion:function(e){return k=e,W},saveIfOffline:function(e){return void 0!==e&&"boolean"==typeof e&&(A=e),W},filterSensitiveData:function(e){return S=e,W},setFilterScope:function(e){return("customData"===e||"all"===e)&&(z=e),W},whitelistCrossOriginDomains:function(e){return U=e,W},onBeforeSend:function(e){return T=e,W}},G=W._private=W._private||{},V=W._seal=W._seal||function(){delete W._private,delete W._seal,delete W._unseal},J=W._unseal=W._unseal||function(){W._private=G,W._seal=V,W._unseal=J};return G.getUuid=function(){function e(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return e()+e(!0)+e(!0)+e()},G.createCookie=function(e,t,n){var i;if(n){var r=new Date;r.setTime(r.getTime()+60*n*60*1e3),i="; expires="+r.toGMTString()}else i="";document.cookie=e+"="+t+i+"; path=/"},G.readCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null},G.clearCookie=function(e){G.createCookie(e,"",-1)},G.log=function(t,n){e.console&&e.console.log&&q&&(e.console.log(t),n&&e.console.log(n))},e.Raygun||(e.Raygun=W),W};raygunFactory(window,window.jQuery);var raygunJsUrlFactory=function(e,t){t._private.parseUrl=function(t,n){function i(e){return!isNaN(parseFloat(e))&&isFinite(e)}return function(t,n){var r=n||e.location.toString();if(!t)return r;t=t.toString(),"//"===r.substring(0,2)?r="http:"+r:1===r.split("://").length&&(r="http://"+r),n=r.split("/");var o={auth:""},s=n[2].split("@");1===s.length?s=s[0].split(":"):(o.auth=s[0],s=s[1].split(":")),o.protocol=n[0],o.hostname=s[0],o.port=s[1]||("https"===o.protocol.split(":")[0].toLowerCase()?"443":"80"),o.pathname=(n.length>3?"/":"")+n.slice(3,n.length).join("/").split("?")[0].split("#")[0];var a=o.pathname;"/"===a.charAt(a.length-1)&&(a=a.substring(0,a.length-1));var l=o.hostname,u=l.split("."),c=a.split("/");if("hostname"===t)return l;if("domain"===t)return/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/.test(l)?l:u.slice(-2).join(".");if("sub"===t)return u.slice(0,u.length-2).join(".");if("port"===t)return o.port;if("protocol"===t)return o.protocol.split(":")[0];if("auth"===t)return o.auth;if("user"===t)return o.auth.split(":")[0];if("pass"===t)return o.auth.split(":")[1]||"";if("path"===t)return o.pathname;if("."===t.charAt(0)){if(t=t.substring(1),i(t))return t=parseInt(t,10),u[0>t?u.length+t:t-1]||""}else{if(i(t))return t=parseInt(t,10),c[0>t?c.length+t:t]||"";if("file"===t)return c.slice(-1)[0];if("filename"===t)return c.slice(-1)[0].split(".")[0];if("fileext"===t)return c.slice(-1)[0].split(".")[1]||"";if("?"===t.charAt(0)||"#"===t.charAt(0)){var h=r,f=null;if("?"===t.charAt(0)?h=(h.split("?")[1]||"").split("#")[0]:"#"===t.charAt(0)&&(h=h.split("#")[1]||""),!t.charAt(1))return h;t=t.substring(1),h=h.split("&");for(var d=0,p=h.length;p>d;d++)if(f=h[d].split("="),f[0]===t)return f[1]||"";return null}}return""}(t,n)}};raygunJsUrlFactory(window,window.Raygun),window.Raygun._seal(),function(e){"use strict";function t(e){return this[e]||""}function n(e,t){var n=this.getString(e);t=[].concat(t||[]);for(var i=0,r=t.length;i<r;i++)n=n.replace(new RegExp("\\{"+i+"\\}","g"),t[i]);return n}e.Common.getString=t,e.FrontEnd.getString=t,e.Common.formatString=n,e.FrontEnd.formatString=n}(Resources);var RouteManager=function(){"use strict";function e(e){this.routeTable=e||{routes:{Default:{url:"{controller}/{action}/{id}",defaults:null,constraints:null}}};for(var t in this.routeTable.routes){var n=this.routeTable.routes[t];if(n.defaults)for(var i in n.defaults)"string"!=typeof n.defaults[i]&&(n.defaults[i]="")}}return e.prototype._replaceRouteData=function(e,t,n,i){for(var r in t){var o=new RegExp("{[*]?"+r+"}"),s=t[r];if(null!==s&&void 0!==s){if(n){var a=n[r];if(a&&"string"==typeof a){if(!new RegExp(a,"i").test(s))throw new Error("Route data failed to pass constraints test.")}}var l=e;e=e.replace(o,s),i&&e==l&&(i[r]=s)}}return e},e.prototype._hasParams=function(e){return-1!==e.search(/[{}]/)},e.prototype.buildUrl=function(e,t){var n=this,i=null,r=n.routeTable.routes,o=!0;"string"!=typeof e&&void 0===t&&(o=!1,t=e);for(var s in r)if(!o||s==e){var a=r[s],l=a.url;if(!o&&!this._hasParams(l))continue;var u={};try{l=n._replaceRouteData(l,t,a.constraints,u),a.defaults&&(l=n._replaceRouteData(l,a.defaults,a.constraints))}catch(e){}if(-1==l.search(/[{}]/)){var c={};for(var h in u)h in a.defaults&&u[h].toLowerCase()==a.defaults[h].toLowerCase()||(c[h]=u[h]);var f=$.param(c);f&&(l=l.replace(/[\/\\]$/,"")+"?"+f),i="/"==l[0]?l:"/"+l}if(o||i)break}return i},e}();window.routeTable={routes:{PluginsPage:{url:"plugins",defaults:{controller:"Content",action:"Plugins"}},Plugins:{url:"plugins/{Action}",defaults:{controller:"Plugins"}},ReportPlugins:{url:"api/plugins/report",defaults:{controller:"Plugins",action:"Report"}},VerseOfTheDay:{url:"bible/{resourceName}/verseoftheday",defaults:{controller:"Bible",action:"VerseOfTheDay"},constraints:{resourceName:"^[0-9.\\w -:]{2,}"}},VerseOfTheDayShort:{url:"verseoftheday",defaults:{controller:"Bible",action:"VerseOfTheDay"}},VerseOfTheDayShortDate:{url:"verseoftheday/{date}",defaults:{controller:"Bible",action:"VerseOfTheDay"},constraints:{date:"^[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9]"}},VerseOfTheDayWidget:{url:"api/plugins/verseoftheday/{resourceName}",defaults:{controller:"Bible",action:"VerseOfTheDayWidget"},constraints:{resourceName:"^[0-9.\\w -:]{2,}"}},VerseOfTheDayLightboxByDate:{url:"verseoftheday/lightbox/{date}",defaults:{controller:"Media",action:"VerseOfTheDayLightboxByDate"},constraints:{date:"^[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9]"}},VerseOfTheDayLightboxByIdentifier:{url:"verseoftheday/lightbox/{identifier}",defaults:{controller:"Media",action:"VerseOfTheDayLightboxByIdentifier",identifier:{}}},VerseOfTheDayInfo:{url:"verseoftheday/info/{date}",defaults:{controller:"Media",action:"VerseOfTheDayInfo"}},VerseOfTheDayAsFullsizeImageBackwardCompatible:{url:"api/plugins/verseoftheday/{resource}/fullsize.jpg",defaults:{controller:"Media",action:"VerseOfTheDayAsFullsizeImage"}},VerseOfTheDayAsFullsizeImage:{url:"verseoftheday/fullsize.jpg",defaults:{controller:"Media",action:"VerseOfTheDayAsFullsizeImage"}},VerseOfTheDayAsFullsizeImageByDate:{url:"verseoftheday/image/{date}",defaults:{controller:"Media",action:"VerseOfTheDayAsFullsizeImageByDate"},constraints:{date:"^[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9]"}},VerseOfTheDayAsFullsizeImageByIdentifier:{url:"verseoftheday/image/{identifier}",defaults:{controller:"Media",action:"VerseOfTheDayAsFullsizeImageByIdentifier"}},VerseOfTheDayMetroTileNotification:{url:"verseoftheday/metro/tile/notification",defaults:{controller:"Metro",action:"GetTileNotification"}},VerseOfTheDayMetroTileSquare:{url:"verseoftheday/metro/tile/square/{date}",defaults:{controller:"Metro",action:"GetTileSquare"},constraints:{date:"^[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9]"}},VerseOfTheDayMetroTileWide:{url:"verseoftheday/metro/tile/wide/{date}",defaults:{controller:"Metro",action:"GetTileWide"},constraints:{date:"^[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9]"}},VerseOfTheDaySingleImage:{url:"api/plugins/verseoftheday/{resource}/{theme}/{variant}.jpg",defaults:{controller:"Media",action:"VerseOfTheDayAsSingleImage"}},VerseOfTheDayImageWithExtension:{url:"bible/images/{directory}/{reference}.{extension}",defaults:{controller:"Media",action:"VerseOfTheDay"},constraints:{extension:"png|jpg"}},VerseOfTheDayImage:{url:"bible/images/{directory}/{reference}",defaults:{controller:"Media",action:"VerseOfTheDay"}},OembedJson:{url:"services/oembed.json",defaults:{controller:"Oembed",action:"GetOembedResponse"}},OembedXml:{url:"services/oembed.xml",defaults:{controller:"Oembed",action:"GetXmlErrorResponse"}},BibleSearchBox:{url:"api/plugins/biblesearchbox",defaults:{controller:"Search",action:"BibleSearchBox"}},BibleSearchResults:{url:"api/plugins/biblesearchresults",defaults:{controller:"Search",action:"BibleSearchResults"}},EmbeddedBible:{url:"api/plugins/embeddedbible",defaults:{controller:"Resource",action:"EmbeddedBible"}},EmbeddedPreview:{url:"api/plugins/embeddedpreview",defaults:{controller:"Resource",action:"EmbeddedPreview"}},BibleVerse:{url:"api/plugins/bibleverse",defaults:{controller:"Bible",action:"BibleVerseWidget"}},GetResourceReferenceInfo:{url:"books/{resourceName}/referenceinfo",defaults:{controller:"Resource",action:"GetResourceReferenceInformation"}},GetReferenceInfo:{url:"referenceinfo",defaults:{controller:"Resource",action:"GetReferenceInfo"}},HighlightEmbed:{url:"api/plugins/highlightwidget",defaults:{controller:"Resource",action:"Embed"}},FirstVerseInResource:{url:"books/{resourceName}/firstverse",defaults:{controller:"Resource",action:"GetFirstVerseReference"},constraints:{resourceName:"^[0-9.\\w -:]{2,}"}},Associated:{url:"books/associated/{resourceName}/{reference}",defaults:{controller:"Resource",action:"Associated",reference:{},pane:{}},constraints:{resourceName:"^[0-9.\\w -:]{2,}"}},Resolve:{url:"books/{resourceName}/resolve",defaults:{controller:"Resource",action:"Resolve"},constraints:{resourceName:"^[0-9.\\w -:]{2,}"}},UnauthorizedPreview:{url:"books/{resourceName}/preview",defaults:{controller:"Resource",action:"UnauthorizedPreview"},constraints:{resourceName:"^[0-9.\\w -:]{2,}"}},ResourceList:{url:"books",defaults:{controller:"Library",action:"List"}},PickerResourceList:{url:"resourcepicker",defaults:{controller:"Library",action:"ListResourcePicker"}},GetDynamicTranslations:{url:"books/{resourceName}/dynamicTranslations",defaults:{controller:"Library",action:"GetDynamicTranslations"}},GetBooksForMilestones:{url:"library/books/{resourceType}",defaults:{controller:"Library",action:"GetBooksForMilestones"}},Library:{url:"library",defaults:{controller:"Library",action:"List"}},Media:{url:"books/{resourceName}/media/path/{*path}",defaults:{controller:"Media",action:"Default"},constraints:{resourceName:"^[0-9.\\w -:]{2,}",path:{}}},MapImage:{url:"biblicalplaces/{mapName}/map.png",defaults:{controller:"Media",action:"MapImage"}},MediaThumbnails:{url:"books/{resourceName}/thumbnails",defaults:{controller:"Media",action:"GetMediaResourceThumbnails"},constraints:{resourceName:"^[0-9.\\w -:]{2,}"}},MediaDisplayOffset:{url:"books/{resourceName}/media/{offset}",defaults:{controller:"Media",action:"DisplayByOffset"},constraints:{resourceName:"^[0-9.\\w -:]{2,}",offset:{}}},MediaDisplayArticle:{url:"books/{resourceName}/media/article/{articleId}",defaults:{controller:"Media",action:"DisplayByArticle"},constraints:{resourceName:"^[0-9.\\w -:]{2,}"}},MediaDisplayStaticMedia:{url:"media/{mediaId}",defaults:{controller:"Media",action:"DisplayStaticMedia"}},MediaDisplaySharedMedia:{url:"media/shared/{mediaId}",defaults:{controller:"Media",action:"DisplaySharedMedia"}},MediaDisplayBiblicalPlaceMap:{url:"biblicalplaces/{mapName}",defaults:{controller:"Media",action:"DisplayBiblicalPlacesMap"}},ResourceReference:{url:"books/{resourceName}/{reference}",defaults:{controller:"Resource",action:"Reference",resourceName:{}},constraints:{resourceName:"^[0-9.\\w -:]{2,}",reference:"^[\\p{Pd}\\w\\d:\\$\\.\\(\\), +]+"}},BibleReference:{url:"bible/{resourceName}/{reference}",defaults:{controller:"Bible",action:"Reference",resourceName:{}},constraints:{resourceName:"^[0-9.\\w -:]{2,}",reference:"^[\\p{Pd}\\w\\d:\\$\\.\\(\\),; ]+"}},BibleVerseEmbed:{url:"embed/{resourcename}/{reference}",defaults:{controller:"Bible",action:"BibleVerseWidget",resourceName:{}}},ReferenceCompare:{url:"bible/compare",defaults:{controller:"bible",action:"ReferenceCompare"}},GetUrlSafeReferences:{url:"bible/urlreference",defaults:{controller:"bible",action:"GetUrlSafeRenderedReferences"}},ReferenceDefaultBible:{url:"bible/{reference}",defaults:{controller:"bible",action:"Reference"},constraints:{reference:"^[\\p{Pd}\\w\\d:\\$\\.\\(\\),; ]+"}},Reference:{url:"reference/{reference}",defaults:{controller:"Resource",action:"Reference"},constraints:{reference:"^[\\p{Pd}\\w\\d:\\$\\.\\(\\), +]+"}},ResourceHeadword:{url:"books/{resourceName}/word/{headword}",defaults:{controller:"Resource",action:"Headword"},constraints:{resourceName:"^[0-9.\\w -:]{2,}",headword:{}}},Headword:{url:"word/{headword}",defaults:{controller:"Resource",action:"HeadwordWithoutResource"},constraints:{headword:{}}},Article:{url:"books/{resourceName}/article/{*articleId}",defaults:{controller:"Resource",action:"Article"},constraints:{resourceName:"^[0-9.\\w -:]{2,}"}},ResourceDefault:{url:"books/{resourceName}",defaults:{controller:"Resource",action:"Default"}},Position:{url:"books/{resourceName}/percent/{position}",defaults:{controller:"Resource",action:"Position"},constraints:{resourceName:"^[0-9.\\w -:]{2,}",position:{}}},Offset:{url:"books/{resourceName}/offset/{offset}",defaults:{controller:"Resource",action:"IndexedOffset"},constraints:{resourceName:"^[0-9.\\w -:]{2,}",offset:{}}},TableOfContents:{url:"tableofcontents/{resourceName}/{pathToEntry}",defaults:{controller:"Resource",action:"TableOfContents",pathToEntry:{}},constraints:{resourceName:"^[0-9.\\w -:]{2,}"}},ResourceInformation:{url:"bookinfo/{resourceName}",defaults:{controller:"Resource",action:"GetInformation"},constraints:{resourceName:"^[0-9.\\w -:]{2,}"}},Content:{url:"content/{*path}",defaults:{controller:"Content",action:"Index"},constraints:{path:{}}},Tag:{url:"tag",defaults:{controller:"Content",action:"Tag"}},GetFsb:{url:"getfsb",defaults:{controller:"Content",action:"GetFsb"}},SearchDefault:{url:"search",defaults:{controller:"Search",action:"Default"}},Search:{url:"search/{resources}",defaults:{controller:"Search",action:"Default"},constraints:{resources:{}}},SitemapIndex:{url:"sitemap.xml",defaults:{controller:"Sitemap",action:"Index"}},FreeResourcesSitemap:{url:"sitemap-free.xml",defaults:{controller:"Sitemap",action:"FreeResources"}},BibleSitemap:{url:"sitemap-bible{index}.xml",defaults:{controller:"Sitemap",action:"Bible"},constraints:{index:{}}},SyncWriteReference:{url:"savereference/{resourceName}/{reference}/{pane}",defaults:{controller:"User",action:"SaveReferencePosition",pane:{}},constraints:{resourceName:"^[0-9.\\w -:]{2,}",reference:"^[\\p{Pd}\\w\\d:\\$\\.\\(\\), +]+"}},SyncWriteHeadword:{url:"saveword/{resourceName}/{headword}/{pane}",defaults:{controller:"User",action:"SaveHeadwordPosition",pane:{}},constraints:{resourceName:"^[0-9.\\w -:]{2,}",headword:{}}},SyncWriteOffset:{url:"saveoffset/{resourceName}/{offset}/{pane}",defaults:{controller:"User",action:"SaveOffsetPosition",pane:{}},constraints:{resourceName:"^[0-9.\\w -:]{2,}",offset:{}}},SyncWriteArticle:{url:"savearticle/{resourceName}/{articleId}/{pane}",defaults:{controller:"User",action:"SaveArticlePosition",pane:{}},constraints:{resourceName:"^[0-9.\\w -:]{2,}",articleId:{}}},SetDefaultBible:{url:"setdefaultbible/{resourceName}",defaults:{controller:"User",action:"SetDefaultBible"},constraints:{resourceName:"^[0-9.\\w -:]{2,}"}},SetResourceRating:{url:"setresourcerating/{resourceName}/{rating}",defaults:{controller:"User",action:"SetResourceRating"},constraints:{resourceName:"^[0-9.\\w -:]{2,}",rating:{}}},TrackReadSegment:{url:"readSegments",defaults:{controller:"User",action:"TrackReadSegments"}},ListFavorites:{url:"favorites",defaults:{controller:"Favorites",action:"Default"}},AddFavorite:{url:"favorites/add",defaults:{controller:"Favorites",action:"AddFavorite"}},DeleteFavorite:{url:"favorites/{favoriteId}/delete",defaults:{controller:"Favorites",action:"DeleteFavorite"}},GetReadingPlans:{url:"reading/plans",defaults:{controller:"ReadingPlan",action:"List"}},GetReadingPlanTemplates:{url:"reading/templates",defaults:{controller:"ReadingPlan",action:"GetReadingPlanTemplates"}},StartReading:{url:"reading/start",defaults:{controller:"ReadingPlan",action:"StartReading"}},StartReadingWithToken:{url:"reading/startwithtoken",defaults:{controller:"ReadingPlan",action:"StartReadingWithToken"}},ReadingPlanSummary:{url:"reading/{readingPlanId}/summary",defaults:{controller:"ReadingPlan",action:"Summary"}},ReadingPlanMarkRead:{url:"reading/{readingPlanId}/mark/{sessionDate}",defaults:{controller:"ReadingPlan",action:"MarkRead"}},ReadingPlanCatchUp:{url:"reading/{readingPlanId}/catchup",defaults:{controller:"ReadingPlan",action:"CatchUp"}},ReadingPlanQuit:{url:"reading/{readingPlanId}/quit",defaults:{controller:"ReadingPlan",action:"Quit"}},AddReadingPlan:{url:"reading/add",defaults:{controller:"ReadingPlan",action:"Add"}},ListDevotionals:{url:"devotions/list",defaults:{controller:"Devotions",action:"List"}},AvailableDevotionals:{url:"devotions/available",defaults:{controller:"Devotions",action:"ListAvailableDevotionalResources"}},AddDevotional:{url:"devotions/add",defaults:{controller:"Devotions",action:"Add"}},MarkDevotionalRead:{url:"devotions/{resourceName}/mark",defaults:{controller:"Devotions",action:"MarkRead"}},UpdateResourceDatabases:{url:"updateresourcedatabases",defaults:{controller:"ResourceLoaderManager",action:"UpdateDatabases"}},SignIn:{url:"user/signin",defaults:{controller:"User",action:"SignIn"}},SignInOrRegister:{url:"user/signinorregister",defaults:{controller:"User",action:"SignInOrRegister"},constraints:{method:{allowedMethods:["GET"]}}},SignOut:{url:"user/signout",defaults:{controller:"User",action:"SignOut"}},Register:{url:"user/register",defaults:{controller:"User",action:"Register"},constraints:{method:{allowedMethods:["POST"]}}},Buy:{url:"buy/{skus}/{couponcode}",defaults:{controller:"Commerce",action:"Buy"}},GetUserInput:{url:"books/{resourceName}/inputs/{inputId}",defaults:{controller:"UserInputs",action:"GetUserInput"},constraints:{method:{allowedMethods:["GET"]}}},UpdateUserInput:{url:"books/{resourceName}/inputs/{inputId}",defaults:{controller:"UserInputs",action:"UpdateUserInput"},constraints:{method:{allowedMethods:["POST"]}}},SetLanguage:{url:"setlanguage",defaults:{controller:"User",action:"SetLanguage"},constraints:{method:{allowedMethods:["POST"]}}},GetAppleAppSiteAssociation:{url:"apple-app-site-association",defaults:{controller:"AppleAppSiteAssociation",action:"GetAppleAppSiteAssociation"}},Default:{url:"{controller}/{action}",defaults:{controller:"Resource",action:"Default"},constraints:{controller:"Resource|Bible|Library|Search|User|ReadingPlan|Favorites|Devotions"}},CatchAll:{url:"{*path}",defaults:{controller:"Error",action:"NotFound"}}}},window.ROUTING=new RouteManager(window.routeTable),window.RESOURCE_ORDERS={relevance:"Relevance",priority:"Priority",title:"Title",authors:"Authors",rating:"Rating"},window.PANES={left:"Left",right:"Right"},window.MEDIA_KINDS={image:0,video:1},window.RESOURCE_TYPES={ancientLiterature:"lbx.ancientliterature",ancientManuscript:"text.monograph.ancient-manuscript",audio:"lbx.audio",bible:"text.monograph.bible",bibleCommentary:"text.monograph.commentary.bible",bibleConcordance:"text.monograph.concordance.bible",bibleCriticalApparatus:"text.monograph.critical-apparatus.bible",bibleCrossReferences:"text.monograph.cross-references.bible",bibleCrossReferencesDataset:"lbx.biblecrossreferences",bibleHarmony:"text.monograph.harmony.bible",bibleLectionary:"text.monograph.lectionary.bible",bibleNotes:"text.monograph.notes.bible",studyBible:"text.monograph.study.bible",bibleVisualization:"text.visualization.bible",biblicalClauses:"lbx.biblicalclauses",biblicalEvents:"lbx.biblicalevents",biblicalPeople:"lbx.biblicalpeople",biblicalPeopleDiagrams:"lbx.biblicalpeoplediagrams",biblicalPlaces:"lbx.biblicalplaces",biblicalPlacesMaps:"lbx.biblicalplacesmaps",biblicalThings:"lbx.biblicalthings",biographies:"lbx.biographies",calendarDevotional:"lbx.calendar-devotional",clauses:"lbx.clauses",commentary:"text.monograph.commentary",coursewareMonograph:"text.monograph.courseware",coursewareMedia:"lbx.media.courseware",criticalApparatus:"text.monograph.critical-apparatus",crossReferenceIndex:"text.monograph.cross-references",crossReferences:"lbx.crossreferences",dictionary:"text.monograph.dictionary",encyclopedia:"text.monograph.encyclopedia",excerpts:"lbx.excerpts",factbookMedia:"lbx.fbmedia",grammaticalRelationships:"lbx.grammar",grammar:"text.monograph.grammar",help:"lbx.ldls_help.addin",importantWords:"lbx.importantwords",interactive:"lbx.interactive",interlinearDatabase:"lbx.interlinear",journal:"text.serial.journal",lectionary:"text.monograph.lectionary",lemmas:"lbx.lemmas",lemmaList:"lbx.lemmalist",lexhamCulturalOntology:"lbx.lexhamculturalontology",lexhamSystematicTheologyOntology:"lbx.lexhamsystematictheologyontology",lexicon:"text.monograph.lexicon",literaryTyping:"lbx.literary.typing",logosControlledVocabulary:"lbx.logoscontrolledvocabulary",magazine:"text.serial.magazine",manual:"text.manual",media:"lbx.media",monograph:"text.monograph",namedTexts:"lbx.namedtexts",pericopeSets:"lbx.pericopesets",pericopeTextIndex:"lbx.pericope-text-index",phraseConcordance:"lbx.phraseconcordance",preachingThemes:"lbx.preachingthemes",pronunciations:"lbx.pronunciations",reportedSpeech:"lbx.reportedspeech",referentDatabase:"lbx.biblicalreferents",reverseInterlinear:"lbx.reverse-interlinear",serviceBook:"text.monograph.service-book",supplementalData:"lbx.supplementaldata",syntaxDatabase:"lbx.syntaxdatabase",systematicTheology:"text.monograph.systematic-theology",thesaurus:"text.monograph.thesaurus",thematicOutlines:"lbx.thematicoutlines",timelines:"lbx.timelines",unifiedAnnotationVocabulary:"lbx.unifiedannotationvocabulary",universalTimeline:"lbx.universaltimeline",wordSenses:"lbx.wordsenses"};var environmentUtil=function(e){"use strict";function t(t,n){var i,r,o=[{inPrefix:"local",outPrefix:n?"local":"internal"},{inPrefix:"internal",outPrefix:"internal"}];if(window.location&&window.location.href){var s=new RegExp("(https?://)(?:www.)?(?:"+e.map(o,function(e){return e.inPrefix+"."}).join("|")+")?(.*)");for(t=t.match(s).slice(1).join(""),i=0,r=o.length;i<r;i++){var a=new RegExp("https?://"+o[i].inPrefix+".");if(0==window.location.href.search(a)){var l=t.match(new RegExp("(https?://)(?:www.)?(.*)"));if(l&&3==l.length)return l[1]+o[i].outPrefix+"."+l[2]}}}return t}return{adjustUrlForEnvironment:t}}(_);window.embeddedFaithlifeManager=function(){function e(e,t){faithlife.embedded.load({url:e.url,container:e.container,error:function(){log.error("Error loading embedded view.")},identityToken:t,callback:function(t){t.bind("referenceClick",function(e){$(document).trigger(biblia.events.navigationRequest,new ResourceNavRequest({reference:e.reference}))}).bind("referencePost",function(e){$.ajax(ROUTING.buildUrl("GetResourceReferenceInfo",{internalReference:e.reference,resourceName:e.resource}),{success:function(e){$(document).trigger(biblia.events.insertCommunityNote,{reference:e.renderedReference})}})}).bind("referenceDelete",function(e){$.ajax(ROUTING.buildUrl("GetResourceReferenceInfo",{internalReference:e.reference,resourceName:e.resource}),{success:function(e){$(document).trigger(biblia.events.deleteCommunityNote,{reference:e.renderedReference})}})}),_.isFunction(e.callback)&&e.callback(t)}})}function t(){if(!n&&!i){var t=$("body").data("identitytoken");t&&(i=!0,$LAB.script(environmentUtil.adjustUrlForEnvironment("https://faithlife.com/scripts/api/faithlifeembedded.js",!1)).wait(function(){$.each(r,function(n,i){e(i,t)}),n=!0,i=!1}))}}var n=!1,i=!1,r=[];return{addEmbedded:function(i){n?e(i):(r.push(i),t())}}}(),window.biblia=function(e,t,n,i){"use strict";var r={biblia:"BIBLIA",faithlifeReader:"FAITHLIFEREADER",logosCloud:"LOGOSCLOUD",noetReader:"NOETREADER",verbum:"VERBUMREADER"},o={localStorage:{}};return o.localStorage[n.left]="biblia.panes.left.fontSize",o.localStorage[n.right]="biblia.panes.right.fontSize",{config:e(r),errors:{abstractMethod:function(e,t){return["Method ",t," of class ",e," is abstract and must be implemented in a child class"].join("")},invalidArgumentType:function(e,t,n){return["Argument ",t," of function ",e," must be of type ",n].join("")},invalidArgumentValue:function(e,t,n){return["Argument ",t," of function ",e," ",n].join("")}},events:{navigationRequest:"NAVIGATION_REQUEST",searchRequest:"SEARCH_REQUEST",resourceChange:"SELECTED_RESOURCE_CHANGE",primaryResourceChange:"PRIMARY_RESOURCE_CHANGE",locationMarkerChange:"LOCATION_MARKER_CHANGE",userJump:"USER_INITIATED_JUMP",userScroll:"USER_INITIATED_SCROLL",informationRequest:"INFORMATION_REQUEST",openResourceRequest:"OPEN_RESOURCE_INFO_REQUEST",resizePane:"RESIZE_PANE",paneResized:"PANE_RESIZED",info:"INFO_ALERT",markReadingPlan:"MARK_READING_PLAN",deleteReadingPlan:"QUIT_READING_PLAN",catchUpReadingPlan:"CATCH_UP_READING_PLAN",changeTab:"CHANGE_TAB",panelsLinked:"PANELS_LINKED",syncPosition:"SYNC_POSITION",communityNoteSelected:"COMMUNITY_NOTE_SELECTED",insertCommunityNote:"INSERT_COMMUNITY_NOTE",deleteCommunityNote:"DELETE_COMMUNITY_NOTE",reloadBibles:"RELOAD_BIBLES",dynamicSourceChange:"DYNAMIC_SOURCE_CHANGE",startReadingReadingPlan:"START_READING_READING_PLAN",readingPlanMarked:"READING_PLAN_MARKED",readingPlanError:"READING_PLAN_ERROR",paneClosed:"PANE_CLOSED",popupClosed:"POPUP_CLOSED",currentPaneChanged:"CURRENT_PANE_CHANGED",lazyLoad:"LAZY_LOAD",paneGroupChange:"PANE_GROUP_CHANGE",paneTitleUrlChanged:"PANE_TITLE_URL_CHANGED",updatePageTitleUrl:"UPDATE_PAGE_TITLE_URL",updateFavoriteLinks:"UPDATE_FAVORITE_LINKS",obtainLeftPaneBible:"OBTAIN_LEFT_PANE_BIBLE",atlasStyleChange:"ATLAS_STYLE_CHANGE",paneTransferRequest:"PANE_TRANSFER_REQUEST",updateTabTitle:"UPDATE_TAB_TITLE",setExpanded:"SET_EXPANDED"},keys:o,paneGroupClasses:{resource:"resource-pane-group",contentPage:"content-page-pane-group",library:"library-pane-group",expLanding:"landing-page-experiment"},panes:{left:0,right:1,fullContent:2,library:3},paneStates:{hidden:0,normal:1,expanded:2,fullscreen:3},resourcestrings:function(e){var t=function(e){var t=document.getElementById(e);return t?t.innerHTML:null};return{tooltipError:"<span>"+e.FrontEnd.getString("CannotLoadPreview")+"</span>",noTooltip:"",referenceCompareError:t("error-while-loading-comparison"),resourceChangeError:t("error-while-loading-book"),resourcePermissionError:t("error-no-permission-for-book"),resourceScrollError:t("error-while-loading-part-of-book"),resourcePickerNoResults:t("error-no-matches"),resourcePickerNoResources:e.FrontEnd.formatString("SignInForFreeBooks",['<a href="/User/SignIn" class="signin-link" onclick="biblia.signin.show(); return false;">'+e.FrontEnd.getString("SignIn").toLowerCase()+"</a>"])}}(i),tabs:t(),tenants:r,zindexes:{behind:-1,normal:0,popup:3,dropdown:6}}}(createBibliaConfig,createBibliaTabs,PANES,Resources);var bibliaHistory=function(){function e(){var e=[],t=[];return{hasBackState:function(){return e.length>1},hasForwardState:function(){return t.length>0},hasInitialState:function(){return!!e.length},getCurrentState:function(){return e[e.length-1]},pushState:function(t){if(void 0===t||null===t)throw new Error("stateObj is required to represent current state");t.shouldReplace=!0,e.push(t)},replaceState:function(n){if(void 0===n||null===n)throw new Error("stateObj is required to represent current state");if(e.pop(),this.hasInitialState()){var i=e[e.length-1];if(n.equals(i)||n.isEqualOrLessSpecificThan(i)||i.isEqualOrLessSpecificThan(n))return}t=[],e.push(n)},addScrollState:function(n){var i,r;if(n){if(e[e.length-1].shouldReplace)return n.isScrollRequest=!1,n.shouldReplace=!1,void this.replaceState(n);e[e.length-1].isScrollRequest&&e.pop(),i=e[e.length-1],n.equals(i)||n.isEqualOrLessSpecificThan(i)||i.isEqualOrLessSpecificThan(n)||(t.length&&t[t.length-1].isScrollRequest&&t.pop(),r=t.length?t[t.length-1]:null,r&&(n.equals(r)||n.isEqualOrLessSpecificThan(r)||r.isEqualOrLessSpecificThan(n))&&this.forward(),e.push(n))}},back:function(n){if(void 0===n&&(n=1),!n||+n!==n||n>e.length||n<=0)return null;n=Math.min(n,(e.length||1)-1);for(var i=0;i<n;i++)t.push(e.pop());return e.length>0&&n?e[e.length-1]:null},forward:function(n){if(void 0===n&&(n=1),!n||+n!==n||n>t.length||n<=0)return null;for(var i=0;i<n;i++)e.push(t.pop());return e[e.length-1]}}}return window._gaq=window._gaq||[],{trackPageView:function(e){var t=["_trackPageview"];e&&t.push(e),window._gaq.push(t)},getHistoryManager:e}}();biblia||(biblia={}),biblia.signin=function(){var e=$("#header .signin-section"),t={show:function(){e.animate({top:"0"},500),t.onDisplaySignin&&t.onDisplaySignin(),setTimeout(function(){e.click()},20)},hide:function(){e.animate({top:"-"+(e.outerHeight()+8)+"px"},500)},signout:function(){$.post("/user/signout",function(){window.location="/"})}};return t.init=function(){$(".signin-link").click(function(e){e.preventDefault(),t.show()}),$("#header .signin-section .x-close").click(function(e){e.preventDefault(),t.hide()}),$("#signout").click(function(e){e.preventDefault(),t.signout()
}),$("#content-container").on("click",".signin-link-section a, .register-link-section a, .register-link",function(){return $(".signin-or-register").find(".signin-section, .register-section").slideToggle(),!1}),util.submitOnEnter(e.find("form"))},t.setOnDisplaySignin=function(e){t.onDisplaySignin=e},t}(),function(e){e.widget("ui.infobar",{_create:function(){this.jqBar=this.element.hide(),this.jqMessageContainer=e('<div class="infobar-content"></div>').appendTo(this.jqBar),this.jqMessage=e("<p></p>"),this.jqSubMessage=e("<p></p>").addClass("subheading"),this.jqXClose=e("<a></a>").addClass("x-close"),this.jqMessageContainer.append(this.jqXClose),this.jqMessageContainer.append(this.jqMessage),this.jqMessageContainer.append(this.jqSubMessage)},_init:function(){var t=this;this._hideBar(),this.jqXClose.click(function(e){e.preventDefault(),t._hideBar()}),this._setLevel(e.fn.infobar.levels.info)},_destroy:function(){},_setLevel:function(t){this.nCurLevel!=t&&(t<e.fn.infobar.levels.length?(this.nCurLevel=t,this.jqBar.attr("class","shadow infobar infobar-"+this.levelInfos[t].cssclass)):log.error("Attempted to set the InfoBar level to an invalid value"))},_hideBar:function(e){this.fnCloseCallback&&this.fnCloseCallback(),e?this.jqBar.hide():this.jqBar.slideUp(this.options.animUpTime),this.fnCloseCallback=null,clearTimeout(this.tmrClose)},_quickHideBar:function(){this._hideBar(!0)},_setCloseTimer:function(t,n){n?n!=this.doNotClose&&(this.tmrClose=setTimeout(this._hideBar.bind(this),1e3*n)):t<e.fn.infobar.levels.length?this.levelInfos[t].closeSecs!=this.doNotClose&&(this.tmrClose=setTimeout(this._hideBar.bind(this),1e3*this.levelInfos[t].closeSecs)):log.error("Attempted to set the InfoBar close timeout with an invalid level")},_showBar:function(t,n,i,r,o,s,a){this.fnCloseCallback=a,t||(t=e.fn.infobar.levels.info),this._setLevel(t),t==e.fn.infobar.levels.onetime&&"1"==util.getCookieValue(o)||(s&&s(),this.jqMessage.html(n),i?this.jqSubMessage.html(i).show():this.jqSubMessage.hide(),this.jqBar.slideDown(this.options.animDownTime),clearTimeout(this.tmrClose),this._setCloseTimer(t,r),t==e.fn.infobar.levels.onetime&&(o?util.setCookie(o,"1",3650):log.error("No cookie name specified for onetime display of InfoBar")))},setPosition:function(e){this.jqBar.css("position",e)},showBar:function(e,t,n,i,r,o,s){var a=this,l=function(){a._showBar(e,t,n,i,r,o,s)};this.fnCloseCallback?(this._hideBar(),window.setTimeout(l,this.options.animUpTime)):l()},hideBar:function(){this._hideBar()},onetime:function(t,n,i,r){this.showBar(e.fn.infobar.levels.onetime,t,n||"",i,r)},info:function(t,n,i){this.showBar(e.fn.infobar.levels.info,t,n||"",i,null)},warning:function(t,n,i){this.showBar(e.fn.infobar.levels.warning,t,n||"",i,null)},error:function(t,n,i){this.showBar(e.fn.infobar.levels.error,t,n||"",i,null)},getAnimUpTime:function(){return this.options.animUpTime},getAnimDownTime:function(){return this.options.animDownTime},getBarHeight:function(){return this.options.height},doNotClose:-1,levelInfos:[{t:"INFO",cssclass:"info",closeSecs:-1},{t:"ONCE",cssclass:"info",closeSecs:-1},{t:"WARN",cssclass:"warning",closeSecs:8},{t:"ERR",cssclass:"error",closeSecs:8}],options:{timeoutSecs:8,animUpTime:400,animDownTime:400,height:"40px"}}),e.fn.infobar.levels={info:0,onetime:1,warning:2,error:3,length:4}}(jQuery),function(e){e.fn.baseTooltip=function(t,n){function i(e,t){e.data("display-status",t)}function r(e){return e.data("display-status")}function o(e,t,n){s(e,t),e.data(t,n);var i=h.data("tooltip-timers");i.push(n),h.data("tooltip-timers",i)}function s(e,t){if(e){var n=e.data(t);if(n){var i=h.data("tooltip-timers");util.removeArrayValue(i,n),h.data("tooltip-timers",i),clearTimeout(n),e.data(t,null)}}}function a(t,n,l){function f(t,n){var o=t.data("display-element");o&&o.length&&(o.isInDocument()||(o.data("anchor",t),o.hide().appendTo(e(document.body))),"stuck"!==r(t)&&i(t,t.data("display-has-content")?"open":"opening"),o.css("opacity","1"),o.fadeIn(u.fadeDuration,function(){o.first().css("filter","")}),function(){if(n){var i=e.extend({my:"left+16 top+16",at:"center top",of:n,offset:"16",collision:u.collision},u.fnPositioning(n,t));o.css({left:"0",top:"0"}).position(i),o.offset().top<0&&o.offset({top:4});var r=e(window).height(),s=o.outerHeight()-o.height();o.offset().top+o.outerHeight()>r&&o.height(r-s-8);var a=o.find(".tooltip-content");a.length&&a.height()>o.height()+2&&a.height(o.height())}}())}function d(t,n){function a(){if(!l.data("disabled")&&e.trim(_.toArray(arguments).join(""))){var i=r(t);return("opening"===i||"stuck"===i)&&(l.children(".loading-indicator").remove(),u.fnInsertContent.apply(l,arguments),s(t,"loading-timer"),f(t,n),!0)}return v(t,l),!1}s(t,"loading-timer");var l=t.data("display-element");if(l&&l.length)l.data("disabled",!1);else{l=c.clone(),t.data("display-element",l);var d=h.data("tooltips")||h.data("tooltips",[]).data("tooltips");d.push(l),h.data("tooltips",d)}i(t,"opening"),u.bShowLoading&&o(t,"loading-timer",setTimeout(function(){l.children().empty(),l.append(e('<p class="loading-indicator">'+Resources.Common.getString("LoadingEllipsis")+"</p>")),f(t,n)},u.loadingDelay)),u.fnGetContent(t,a)}function m(){e.each(e(document.body).children("."+u.containerClass),function(t,n){var i=e(n).stop();v(i.data("anchor"),i)})}function v(t,n){e.each(["display-timer","loading-timer"],function(i,r){s(t,r),n&&n.length&&e.each(n.find("a"),function(t,n){s(e(n),r)})}),i(t,"closing"),n&&n.length&&n.stop().fadeOut(u.fadeDuration,function(){n.detach(),i(t,"closed")})}u.bHoverShow&&t.delegate(u.selector,"mouseenter",function(t){var n=e(this);p&&!l||o(n,"display-timer",setTimeout(function(){d(n,t)},u.delay))}).delegate(u.selector,"mouseleave",function(t){var n=e(this),i=n.data("display-element");s(n,"display-timer"),s(n,"loading-timer");var o=r(n);"open"!=o&&"opening"!=o||!i||v(n,i)}),u.bClickStick&&t.delegate(u.selector,"click",function(t){function n(t){t.preventDefault(),t.stopPropagation(),l.removeClass("stuck"),v(o,l),e(document).unbind("click",g),l.undelegate(),p=!1,m()}var o=e(this),l=o.data("display-element");if(!0===p)return void g(t);if(t.stopPropagation(),t.preventDefault(),e.isFunction(u.fnClickStick)&&!u.fnClickStick(o))return v(o,l),void(u.onLinkClick&&u.onLinkClick(t));s(o,"display-timer"),s(o,"loading-timer");var c=r(o);c&&"closing"!=c&&"closed"!=c||d(o,t),l=o.data("display-element"),i(o,"stuck"),l.addClass("stuck"),a(l,!1,!0),l.delegate("a","click",function(e){e.preventDefault(),n(e),u.onLinkClick&&u.onLinkClick(e)}),p=!0,g=n.bind(this),l.click(function(t){u.exiterSelector&&0!==e(this).filter(u.exiterSelector).length||t.stopPropagation()}),u.exiterSelector&&l.delegate(u.exiterSelector,"click",g),e(document).click(g)})}var l={selector:"a[title]",exiterSelector:null,template:"<div></div>",delay:500,loadingDelay:150,fadeDuration:150,fnGetContent:null,fnInsertContent:null,fnClickStick:null,bClickStick:!0,bHoverShow:!0,bShowLoading:!1,onLinkClick:null,collision:"flip flip",fnPositioning:function(){return{}}};if(this.length>1)return this.each(function(i,r){e(r).baseTooltip(t,n)}),this;var u=e.extend(l,t),c=e(u.template),h=this;if(this.data("tooltips",this.data("tooltips")||[]),this.data("tooltip-timers",this.data("tooltip-timers")||[]),"destroy"==n||"cancel"==n){var f=this.data("tooltips"),d=this.data("tooltip-timers");return f&&f.length&&e.each(f,function(e,t){t.isInDocument()?t.remove():t.data("disabled",!0)}),e.each(this.find(u.selector),function(){i(e(this),"closed")}),d&&d.length&&e.each(d,function(e,t){clearTimeout(t)}),this.data("tooltip-timers",[]),"destroy"==n&&(this.undelegate(),this.data("tooltips",[])),this}if(!u.fnGetContent||!e.isFunction(u.fnGetContent))throw new Error("The fnGetContent option of baseTooltip must be a valid function.");if(!u.fnInsertContent||!e.isFunction(u.fnInsertContent))throw new Error("The fnInsertContent option of baseTooltip must be a valid function.");var p=!1,g=null;return a(this,u.clickStick),this}}(jQuery),function(e){e.fn.tooltip=function(t,n){var i={selector:"a[title]",containerClass:"tooltip",bShowLoading:!0,fnGetContent:function(t,n){n(e(t).attr("title"))}},r=e.extend(i,t),o='<div class="'+r.containerClass+' ui-corner-all"><div class="'+r.containerClass+'-content"></div><div class="'+r.containerClass+'-footer"></div></div>';e.extend(r,{template:o,fnPositioning:function(){return{collision:"flipfit flipfit",my:"top+16 top+16"}},fnInsertContent:function(t,n){if(t=t||"",n=n||"",t){var i=this.find("."+r.containerClass+"-content").first();i.empty().append(e(t)),i.next().text(n),n||i.next().hide()}}}),this.baseTooltip(r,n)}}(jQuery),function(e){e.fn.communityNotes=function(){this.baseTooltip({selector:".community-note",containerClass:"community-note-tooltip",bClickStick:!0,fnClickStick:function(){return!1},onLinkClick:function(t){var n=e(t.target).data();e(window.document).trigger(biblia.events.communityNoteSelected,{reference:n.reference,renderedReference:n.renderedReference,resource:n.resource,resourceVersion:n.resourceVersion,bForceFocus:!0})},fnGetContent:function(e,t){var n=e.data();t("<span><b>"+n.renderedReference+"</b> - "+n.count+" "+Resources.Common.getString("Notes").toLowerCase()+"</span>")},template:'<div class="community-note-tooltip"></div>',fnInsertContent:function(t,n){if(t){e(this).first().empty().append(e(t))}}})}}(jQuery),$.widget("ui.dropdown",{_create:function(){var e=this;if(this.jqBtn=this.element,this.jqPanel=this.options.jqPanel,!this.jqBtn||!this.jqPanel)throw Error("Dropdown requires a non-null button and panel to associate.");if(!this.jqBtn.length||!this.jqPanel.length)throw Error("Dropdown requires valid non-empty jQuery objects for the button and panel");var t="dropdown-wrapper";this.options.hideBorder&&(t+=" exp-dropdown-wrapper"),this.options.fullWidth&&(t+=" exp-dropdown-full-width"),this.jqPanel=$('<div class="'+t+'"></div>').append(this.jqPanel).appendTo($("body")),this.jqBtn.bind(this._getEvent(),function(t){1==t.which&&(e.jqBtn.hasClass("active")?e.hidePanel(t):e.displayPanel(t))})},_init:function(){},_getEvent:function(){return this.options.bUseMouseDown?"mousedown":"click"},hidePanel:function(e){this.displayed=!1,$(document).off(".clickHidePanel"),this.options.fnOnHide&&this.options.fnOnHide(e),this.options.strBtnActiveClass&&this.jqBtn.removeClass(this.options.strBtnActiveClass),this.jqPanel.css("visibility","hidden")},displayPanel:function(e){if(this.displayed)return this.displayed=!1,void this.hidePanel(e);this.options.strBtnActiveClass&&this.jqBtn.addClass(this.options.strBtnActiveClass),this.jqTopBorder&&this.jqTopBorder.width(this.jqPanel.outerWidth()),this.jqPanel.css({top:0,left:0}),this.jqPanel.css("visibility","visible"),this.jqPanel.position({my:this.options.strPnlPos,at:this.options.strBtnPos,of:this.jqBtn,offset:this.options.strOffset,collision:this.options.strCollision}),this.options.fnOnDisplay&&this.options.fnOnDisplay(e),this.jqPanel.bind(this._getEvent(),function(e){1==e.which&&e.stopPropagation()}),this.displayed=!0,$(document).on(this._getEvent()+".clickHidePanel",this.clickHidePanel.bind(this))},clickHidePanel:function(e){e.target==this.jqBtn.get(0)||function(e,t){for(;e.length&&e.parent().get(0)!=t;)e=e.parent();return e.parent().get(0)==t}($(e.target),this.jqBtn.get(0))||this.hidePanel()},destroy:function(){this.jqPanel.remove()},options:{jqPanel:null,fnOnDisplay:null,fnOnHide:null,bUseMouseDown:!0,strBtnActiveClass:"",strBtnPos:"left bottom",strPnlPos:"left top",strCollision:"fit fit",strOffset:"0 0",hideBorder:!1}}),$.widget("biblia.tabDropdown",{_create:function(){var e=this;if(this.source=this.element,this.container=this.options.container,!this.source||!this.source.length)throw Error("TabDropdown requires a non-null, valid jQuery objects for the source.");this.dropdownPanel=$("#tab-dropdown-template").tmpl({template:e.options.template,data:e.options.data,showCheckBack:e.options.showCheckBack,includeDocumentsLink:e.options.includeDocumentsLink}).appendTo(this.container),this.dropdownPanel.on("click","a, button, input[type=submit]",function(t){1===t.which&&e.hidePanel(t)}),this.source.bind(this._getEvent(),function(t){1==t.which&&(e.source.hasClass(e.options.sourceActiveClass)?e.hidePanel(t):e.displayPanel(t))})},_init:function(){},_getEvent:function(){return this.options.useMouseDown?"mousedown":"click"},hidePanel:function(e){$(document).unbind("click",this.clickHidePanel),this.options.onHide&&this.options.onHide(e),this.options.sourceActiveClass&&this.source.removeClass(this.options.sourceActiveClass),this.dropdownPanel.hide()},displayPanel:function(e){this.options.sourceActiveClass&&this.source.addClass(this.options.sourceActiveClass),this.dropdownPanel.css({top:0,left:0}),this.dropdownPanel.show(),this.dropdownPanel.position({my:this.options.dropdownPosition,at:this.options.sourcePosition,of:this.source,collision:this.options.collision}),this.options.onDisplay&&this.options.onDisplay(e),this.dropdownPanel.bind(this._getEvent(),function(e){1==e.which&&e.stopPropagation()}),$(document).bind(this._getEvent(),this.clickHidePanel.bind(this))},clickHidePanel:function(e){1!==e.which||e.target==this.source.get(0)||function(e,t){for(;e.length&&e.parent().get(0)!=t;)e=e.parent();return e.parent().get(0)==t}($(e.target),this.source.get(0))||this.hidePanel()},destroy:function(){this.dropdownPanel.remove()},options:{container:$("body"),template:null,data:null,onDisplay:null,onHide:null,useMouseDown:!0,showCheckBack:!1,sourceActiveClass:"selected",sourcePosition:"left bottom",dropdownPosition:"left top",collision:"fit none"}}),$.widget("ui.filterInput",{_create:function(){var e=this;this.jqWrapper=$('<div class="filter-holder"></div>').css({position:"relative",width:"100%"}),this.jqWrapper.appendTo(this.element.parent()),this.element.parent().children(":not(.filter-holder)").appendTo(this.jqWrapper),this.jqElement=this.element,this.options.showClear&&(this.jqClearBtn=$('<a href="#clear">Clear</a>').css({background:"url("+this.options.closeImage+") no-repeat "+this.options.closeImageX+"px "+this.options.closeImageY+"px",display:"none",position:"absolute",width:this.options.closeImageWidth+"px",height:this.options.closeImageHeight+"px",overflow:"hidden",right:this.options.rightMargin+"px","text-indent":"-9999px",top:"50%","margin-top":-this.options.closeImageHeight/2+"px"}).appendTo(this.jqWrapper),this.jqClearBtn.click(function(){return e.jqElement.val(""),e._hideClearBtn(),e.options.returnFocus?(e.jqElement.focus(),e.jqElement.change()):e.jqElement.blur(),e.options.submitOnClear&&e.jqElement.closest("form").submit(),!1})),this.options.showCount&&(this.jqResultCount=$('<span class="filtered-resource-count"></span>').disableSelection().css({position:"absolute",top:"50%",right:this.options.rightMargin+"px","margin-top":"-8px",color:"#999999","font-size":"10px",height:"16px","line-height":"16px","text-align":"right",cursor:"default",display:this.options.showCount?"inline-block":"none"}).appendTo(this.jqWrapper)),this.jqElement.val().length>=1&&!0===this.options.showOnLoad&&this._showClearBtn(),this.jqElement.keyup(function(){e.jqElement.val().length>=1?e._showClearBtn():e._hideClearBtn()}),this.jqElement.change(function(){""===$(this).val()&&e._hideClearBtn()}),this.jqElement.keypress(function(t){if(t.which==$.ui.keyCode.ENTER)return e.jqElement.closest("form").submit(),!1})},_showClearBtn:function(){this.jqClearBtn&&this.jqClearBtn.css({display:"block","margin-right":this.options.clearBtnRightMargin}),this.jqResultCount&&this.jqResultCount.css("right",this.options.rightMargin+(this.options.showClear?this.options.closeImageWidth+this.options.countClearPadding:0)+"px")},_hideClearBtn:function(){this.jqClearBtn&&this.jqClearBtn.hide(),this.jqResultCount&&this.jqResultCount.css("right",this.options.rightMargin+"px")},setResultCount:function(e){this.jqResultCount&&this.jqResultCount.text(e)},options:{borderAllowance:2,closeImage:"/public/images/icon-sprite.png?v=6",closeImageX:0,closeImageY:-268,closeImageHeight:14,closeImageWidth:14,rightMargin:6,countClearPadding:2,clearBtnRightMargin:-2,returnFocus:!0,submitOnClear:!0,showOnLoad:!1,showCount:!0,showClear:!0}}),$.widget("biblia.resourcepicker",{_create:function(){var e=this;$.preload.gap=13,this.jqPickerButton=this.element,this.jqDropDown=$('<div class="resource-picker-dropdown dropdown"><div class="resource-picker-toolbar"> </div></div>'),this.jqFilterInput=$('<input type="text" name="resource-filter" placeholder="'+Resources.FrontEnd.getString("FindPlaceholder")+'" class="hinted" />'),this.jqResultContainer=$('<div class="resource-picker-results"></div>'),this.jqLoadingIndicator=$('<div class="resource-picker-loading ui"><span><img src="/public/images/ajax-loader.gif" />'+Resources.Common.getString("LoadingEllipsis")+"</span></div>"),this.jqFilterInput.appendTo(this.jqDropDown.children(".resource-picker-toolbar").first()).filterInput(),this.jqResultContainer.appendTo(this.jqDropDown),this.bVisible=!1,this.bIgnoreNextBlur=!1,this.currentResourceInfo=null,this.jqPickerButton.css("white-space","nowrap");var t="",n=_.debounce(function(n){var i=e.jqFilterInput.val();i!=t&&(t=i,e._fetchResources(i))},200),i=function(e){return e.which==$.ui.keyCode.ENTER||e.which==$.ui.keyCode.UP||e.which==$.ui.keyCode.DOWN?null:n.apply(this,util.argumentsArray(arguments))};this.jqFilterInput.change(i).keyup(i),this.handleMouseDown=function(t){if(e.initialized&&e.bVisible){if(e.bIgnoreNextBlur)return void(e.bIgnoreNextBlur=!1);var n=$(t.target);n.length&&0===n.closest(".resource-picker-dropdown").length&&e._hideMenu()}},this.resizeSoon=_.debounce(function(t){e._onResize()},20),$(document).mousedown(this.handleMouseDown),this.options.isMobileExperiment||$(window).resize(this.resizeSoon),this.options.initialResourceInfo&&this.selectItem(this.options.initialResourceInfo),this.jqPickerButton.dropdown({jqPanel:this.jqDropDown,fnOnDisplay:function(t){t.preventDefault(),e.bVisible=!0,e.bIgnoreNextBlur=!0,e.jqFilterInput.focus().select(),e.initialized||(e._fetchResources(),e.initialized=!0);var n=e.jqDropDown.find("li.item.selected");n.length?e.jqResultContainer.ajaxscroll("scrollIntoView",n):e.jqDropDown.scroll(0)},strBtnPos:this.options.pickerButtonOrigin,strPnlPos:this.options.pickerDropDownOrigin,strBtnActiveClass:"active",hideBorder:this.options.isExperiment,fullWidth:this.options.isMobileExperiment}).click(function(e){e.preventDefault()}),this.jqDropDown.keydown(function(t){if(e.bVisible){var n=e.jqDropDown.find("li.selected:first");if(1!=!n.length)switch(t.keyCode||t.which){case $.ui.keyCode.UP:case $.ui.keyCode.LEFT:var i=n.prev("li.item");i.length||(i=n.closest("ul").prev("ul").find("li.item:last"),i.length||(i=n.closest(".content-chunk").prev(".content-chunk").find("li.item:last"))),i.length&&(n.removeClass("selected"),i.addClass("selected"),e.jqResultContainer.ajaxscroll("scrollIntoView",i));break;case $.ui.keyCode.DOWN:case $.ui.keyCode.RIGHT:var r=n.next("li.item");r.length||(r=n.closest("ul").next("ul").find("li.item:first"),r.length||(r=n.closest(".content-chunk").next(".content-chunk").find("li.item:first"))),r.length&&(n.removeClass("selected"),r.addClass("selected"),e.jqResultContainer.ajaxscroll("scrollIntoView",r));break;case $.ui.keyCode.ENTER:n.find("a").click();break;default:return}}}).delegate("li.item","mouseenter",function(){e.jqDropDown.find("li.selected:first").removeClass("selected"),$(this).addClass("selected")}),this.options.lazy||(this._fetchResources(),this.initialized=!0)},_init:function(){this.jqPickerButton.show(),this._selectedElement=null,this.jqLoadingIndicator.isInDocument()||this.jqDropDown.append(this.jqLoadingIndicator),this.options.initialResourceInfo&&this.selectItem(this.options.initialResourceInfo)},_hideMenu:function(){this.jqPickerButton.dropdown("hidePanel"),this.bVisible=!1},_itemClick:function(e){if(!this.options.isMobileExperiment){e.preventDefault();var t=e.data,n=[t,this.currentResourceInfo];this._hideMenu(),this.selectItem(t),this._trigger("change",0,n)}},_getPage:function(e){function t(e,t,n,i){return $.map(e,function(e,o){var s=r.options.isMobileExperiment?ROUTING.buildUrl("BibleReference",{resourceName:e.resourceName,reference:r.options.reference}):ROUTING.buildUrl("ResourceDefault",{resourceName:e.resourceName}),a=$('<a href="'+(s||"#")+'"><div class="resource-picker-item-icon"><img src="'+(e.coverUrl?e.coverUrl:"/error/404")+'" class="drop-shadow" alt="" /></div><div class="resource-picker-item-caption">'+util.ellipsisize(t(e),r.options.captionCharCount)+"</div>"+(n?'<div class="resource-picker-item-authors">'+util.ellipsisize(n(e).join("; "),r.options.authorsCharCount)+"</div>":"")+"</a>");a.bind("click",e,r._itemClick.bind(r)).attr("title",i?i(e):"");var l=$('<li class="item"></li>').append(a);return"CUSTOM"==e.type&&l.addClass("item-custom"),l})}function n(e,t){if(e.length){var n=$("<ul></ul>").attr("class",t);return $.each(e,function(e,t){t.appendTo(n)}),n}return null}function i(e){return $('<div class="resource-list-message" />').html(e)}var r=this,o=$('<div class="content-chunk" />'),s=null,a=e.resources;if(0!==e.start||e.filter||(a=this.options.injectResources.concat(a)),a){"number"==typeof e.count&&r.jqFilterInput.filterInput("setResultCount",e.count);var l=e.filter||e.start>0?0:this.options.topItemsCount,u=n(t(_.filter(a,function(e,t){return t<l}),function(e){return e.abbreviatedTitle},null,function(e){return e.title}),"resource-picker-features"),c=n(t(_.filter(a,function(e,t){return t>=l}),function(e){return e.userTitle||e.title},function(e){return e.authors||[]},function(e){return e.title}),"resource-picker-main-list");null!==u&&($('<li class="spacer"></li>').appendTo(u),o.append(u)),o.append(c),0===e.start&&o.find("li.item:first").addClass("selected"),o.find(".resource-picker-item-icon img").preload({placeholder:"/public/images/DefaultBookCover_small.png",notFound:"/public/images/DefaultBookCover_small.png"})}var h=e.start+e.limit;if(h<e.count){var f={client:this.options.client,type:this.options.itemSourceType,bias:this.options.itemBiasType,start:h,contentType:"js",reference:this.options.reference,publicResourcesOnly:this.options.publicResourcesOnly};e.filter&&(f.q=e.filter),s=ROUTING.buildUrl("PickerResourceList",f)}return e.count<=this.options.noResourcesThreshold&&!e.filter&&this.options.noResourcesAvailableMessage?o.append(i(this.options.noResourcesAvailableMessage)):!e.count&&e.filter&&this.options.noResultMessage&&o.append(i(this.options.noResultMessage)),{content:o,prevPageUrl:null,nextPageUrl:s,chunkloadData:e.start+e.limit<e.count}},_showLoading:function(e,t,n,i,r){r?this.jqResultContainer.find(".content-chunk:last ul:not(.resource-picker-features)").append(this.jqLoadingIndicator):this.jqLoadingIndicator.detach()},_fetchResources:function(e){var t={client:this.options.client,type:this.options.itemSourceType,bias:this.options.itemBiasType,contentType:"js",publicResourcesOnly:this.options.publicResourcesOnly};this.options.isExperiment&&(t.orderBy=e?"relevance":"priority"),e&&(t.q=e),null!==this.options.reference&&(t.reference=this.options.reference),e&&this.jqLoadingIndicator.detach(),this.jqResultContainer.ajaxscroll({fnGetPage:this._getPage.bind(this),chunkload:this._showLoading.bind(this),edgeTriggerDistance:400,unloadTriggerScreens:-1,bVirtualizeScrollPosition:!1,initialPageUrl:ROUTING.buildUrl("PickerResourceList",t),clearInitialContent:!0,bShowLoading:!!e})},_onResize:function(){this.currentResourceInfo&&this.setTitle(this.currentResourceInfo.title,this.currentResourceInfo.abbreviatedTitle),this.jqPickerButton.dropdown("hidePanel")},setTitle:function(e,t){if(this.options.changePickerText)if(!this.options.useAbbreviatedTitlesOnly&&e&&t){this.jqPickerButton.css("white-space","normal"),this.jqPickerButton.html(this.options.titleSuffix);var n=this.jqPickerButton.height();this.jqPickerButton.html(e+this.options.titleSuffix),n<this.jqPickerButton.height()&&this.jqPickerButton.html(t+this.options.titleSuffix),this.jqPickerButton.css("white-space","nowrap")}else this.options.useAbbreviatedTitlesOnly&&t&&this.jqPickerButton.html(t+this.options.titleSuffix)},selectItem:function(e){e&&(this.currentResourceInfo=e,this.setTitle(e.title,e.abbreviatedTitle))},destroy:function(){$(document).off("mousedown",this.handleMouseDown),$(window).off("resize",this.resizeSoon),this.jqPickerButton.dropdown("destroy")},options:{client:null,initialResourceInfo:null,reference:null,pickerDropDownOffset:"2 1",topItemsCount:5,itemBiasType:"bibles",itemSourceType:"",titleSuffix:"",publicResourcesOnly:!1,useAbbreviatedTitlesOnly:!1,pickerDropDownOrigin:"left top",pickerButtonOrigin:"left bottom",captionCharCount:80,authorsCharCount:50,noResultMessage:null,noResourcesAvailableMessage:null,noResourcesThreshold:5,injectResources:[],changePickerText:!0,change:null,isExperiment:!1,isMobileExperiment:!1}}),function(e){e.widget("biblia.passageResourcePicker",{_create:function(){this.initialized=!1,this.jqContainer=this.element},_init:function(){if(this.jqContainer.empty(),this.regenList=this._updateResources,this.options.isExperiment&&this.options.initialResourceInfo&&this.options.initialResourceInfo.title){var t=this.options.initialResourceInfo.title;this.options.isMobileExperiment&&this.options.initialResourceInfo.abbreviatedTitle&&(t=this.options.initialResourceInfo.abbreviatedTitle);var n=this.options.isMobileExperiment?'<div class="exp-picker-anchor-title">'+t+"</div>":t,i=this.options.initialResourceInfo&&this.options.initialResourceInfo.coverurl,r=e('<img class="exp-cover-image"></img>').attr("src",i),o=e('<img class="exp-picker-arrow"></img>').attr("src","/public/images/arrow-down.svg");this.jqMore=e('<a href="#" class="exp-picker-anchor">'+n+"</a>").append(o).prepend(r)}else this.jqMore=e('<a href="#">'+Resources.FrontEnd.getString("More")+" &raquo;</a>");this.jqMore.resourcepicker({initialResourceInfo:this.options.initialResourceInfo,reference:this.options.reference,change:function(e,t){var n=this.resCurrent,i=t;this.resCurrent=i,this.regenList(),this._trigger("change",0,[i,n])}.bind(this),itemSourceType:"bibles",topItemsCount:0,titleSuffix:"&nbsp;",pickerDropDownOrigin:"right top",pickerButtonOrigin:"right bottom",lazy:!0,noResultMessage:biblia.resourcestrings.resourcePickerNoResults,noResourcesAvailableMessage:biblia.resourcestrings.resourcePickerNoResources,changePickerText:!1,isExperiment:this.options.isExperiment,isMobileExperiment:this.options.isMobileExperiment}),this.jqLinksContainer=e('<div class="passage-resource-links"></div>').prependTo(this.jqContainer).delegate("a","click",this._onResourceClick.bind(this)),this.resCurrent=this.options.initialResourceInfo,this._updateResources()},_makeResourceLink:function(t){var n=e('<div><a href="'+ROUTING.buildUrl("BibleReference",{resourceName:t.resourceName,reference:this.options.reference})+'" title="'+t.title+'">'+t.abbreviatedTitle+'</a><div class="item-highlight"></div></div>');return n.data("resource",t),n},_updateResources:function(){var t=this,n=ROUTING.buildUrl("ResourceList",{type:"bibles",limit:this.options.numResourceLinks,contentType:"js",reference:this.options.reference});e.ajax({url:n,success:function(e){t.regenList=function(){for(var n=t.jqLinksContainer.detach().empty(),i=!1,r=function(e){var r=t._makeResourceLink(e);e.resourceName==t.resCurrent.resourceName&&(r.addClass("selected"),i=!0),n.append(r)},o=0,s=e.resources.length;o<s;o++)r(e.resources[o]);!i&&t.resCurrent&&r(t.resCurrent),n.prependTo(t.jqContainer),ui.update(n)},t.regenList(),t.initialized||(t.initialized=!0,t.jqContainer.append(t.jqMore)),t._trigger("load")}})},_onResourceClick:function(t){t.preventDefault();var n=e(t.target).closest("div");if(!n.hasClass("selected")){var i=n.data("resource");n.radioClass("selected");var r=this.resCurrent;this.resCurrent=i,this._trigger("change",0,[i,r])}},_destroy:function(){this.jqMore.resourcepicker("destroy")},options:{initialResourceInfo:null,reference:null,numResourceLinks:8,isExperiment:!1,isMobileExperiment:!1}})}(jQuery),function(e){e.fn.referenceCompare=function(t,n){var i=e.template(null,e("#reference-compare-template").html()),r=e.extend({},e.fn.referenceCompare.defaults,t,{template:'<div class="ref-compare ui-corner-all"></div>',containerClass:"ref-compare",fnGetContent:function(t,n){var i=t.tmplItem();if(!i||!i.data)return n(null);e.ajax({url:ROUTING.buildUrl("ReferenceCompare"),data:{reference:i.data.nav.reference.toUrlSafeString(),numVersions:e.fn.referenceCompare.defaults.numVersions,versionsToExclude:i.data.nav.resourceName},success:function(e){n(i.data.nav.reference.toUrlSafeString(),e)},error:function(){n(null,null)}})},fnInsertContent:function(t,n){var r=Resources.FrontEnd.getString("ErrorLoadingComparison");if(null===t&&null===n)return void this.text(r);var o=null;if(n&&n.results){var s=BibleReference.tryParse(t);if(!s)return void this.text(r);var a={reference:s,results:[]};for(var l in n.results){var u=n.results[l],c=new ResourceNavRequest({type:RESOURCE_TYPES.bible,resourceName:u.resourceName,reference:s});a.results.push({title:u.abbreviatedTitle,text:u.preview,nav:c})}o=e.tmpl(i,a);var h=this;this.delegate(".ref-compare-translation a","click",function(t){t.preventDefault();var n=e(this),i=n.tmplItem();i&&i.data&&i.data.nav&&h.trigger(biblia.events.navigationRequest,i.data.nav)})}this.children(".ref-compare-header, .ref-compare-content").remove(),o&&this.append(o)}});this.baseTooltip(r,n)},e.fn.referenceCompare.defaults={numVersions:4,selector:".result-compare",bHoverShow:!1,bShowLoading:!0,exiterSelector:"a.x-close",collision:"fit flip"}}(jQuery),function(e){function t(t,n){e.ajax(ROUTING.buildUrl("GetUserInput",{resourceName:t,inputId:n.attr("data-input-run-id")}),{success:function(i){n.html(i.html),n.attr("contentEditable",!0);var r=null,o=n.html();n.on("keyup",function(){var i=n.html();o!==i&&(o=i,n.addClass("unsaved"),window.clearTimeout(r),r=window.setTimeout(function(){e.ajax(ROUTING.buildUrl("UpdateUserInput",{resourceName:t,inputId:n.attr("data-input-run-id")}),{type:"POST",contentType:"application/json",data:JSON.stringify({html:n.html()}),success:function(){n.removeClass("unsaved failed-save")},error:function(){n.addClass("failed-save"),n.removeClass("unsaved")}})},1e3))})}})}e.fn.setupInputRuns=function(n){var i=this,r=i.find(".resource-user-input");if(r.length)for(var o=0,s=r.length;o<s;o++)t(n,e(r[o]))}}(jQuery),function(e){var t=[];e.fn.setupResourceContentToggles=function(n){var i=this;i.find(".resource-expand-toggle").each(function(){var n=e(this),i=n.data("toggleId");i&&-1!==t.indexOf(i)&&n.toggleClass("resource-expand-toggled",!0)}),i.find(".resource-expand-section").each(function(){var n=e(this),i=n.data("toggleIds");i&&_.intersection(t,i).length>0&&n.toggleClass("resource-expand-toggled",!0)}),n||this.delegate(".resource-expand-toggle","click",function(n){var r=e(this),o=r.data("toggleId"),s=-1==t.indexOf(o);s?(t.length>=100&&t.shift(),t.push(o)):t=_.without(t,o),r.toggleClass("resource-expand-toggled",s),i.find(".resource-expand-section").each(function(){var t=e(this),n=t.data("toggleIds");n&&-1!==n.indexOf(o)&&t.toggleClass("resource-expand-toggled",s)})})}}(jQuery),$.widget("biblia.autocompleter",{_create:function(){$.preload.gap=13,this.jqAutoCompleterInput=this.element},clearPreviousQuery:function(){this.previousQuery=null},_init:function(){function e(e){return t.suggestionTemplate.tmpl({title:e.suggestionTitle,subTitle:e.suggestionSubTitle,templatePath:"#autocomplete-"+e.iconId+"-template"})}var t=this;this.suggestionTemplate=$("#auto-complete-suggestion-template"),this.autoCompleteWidgetContainer=$("#autocomplete-widget-container"),this.jqAutoCompleterInput.show();var n=$("<div></div>").addClass("autocomplete-container").appendTo(this.autoCompleteWidgetContainer),i=$("<div></div>").addClass("autocomplete-loading-container").addClass("hidden").prepend($('<img src="/public/images/ajax-loader.gif">')).insertAfter(this.jqAutoCompleterInput),r=null;this.hideAfterResponse=!1
;var o=this.jqAutoCompleterInput.closest(".guide-panel").find(".guide-content-wrapper").data("kind");this.jqAutoCompleterInput.closest("form").on("submit",function(){r||(r=n.find(".ui-autocomplete")),r.is(":hidden")&&(t.hideAfterResponse=!0),window.setTimeout(function(){t.hideAfterResponse&&(i.removeClass("autocomplete-is-loading"),r.hide())},300)}),this.previousQuery=null,this.previousData=null,this.jqAutoCompleterInstance=this.jqAutoCompleterInput.autocomplete({source:function(r,s){n.find(".ui-autocomplete").hide(),t.previousQuery===r.term&&t.previousData?s(t.previousData):(t.hideAfterResponse||i.addClass("autocomplete-is-loading"),t.previousQuery=r.term,$.ajax({url:"/autocomplete/",dataType:"json",data:{query:r.term,category:o},success:function(r){if(i.removeClass("autocomplete-is-loading"),r&&r.suggestions){var o=r.suggestions.map(function(t){return{label:e(t),value:t.suggestionTitle,selectionText:t.selectionText,referenceValue:t.selectionReferenceValue}});t.previousData=o,s(o),t.hideAfterResponse&&(n.find(".ui-autocomplete").hide(),t.hideAfterResponse=!1)}else s([])},error:function(){t.previousQuery="",i.removeClass("autocomplete-is-loading"),s([]),t.hideAfterResponse&&(n.find(".ui-autocomplete").hide(),t.hideAfterResponse=!1)}}))},appendTo:n,select:function(e,n){return t.options.selectFunction?t.options.selectFunction(n.item):(t.element.val(n.item.selectionText),t.element.submit()),t.hideAfterResponse=!1,!1}}).data("ui-autocomplete"),this.jqAutoCompleterInstance._renderItem=function(e,t){return $("<li></li>").data("item.autocomplete",t).append($(t.label)).appendTo(e)},this.jqAutoCompleterInput.on("click",function(e){var n=$(this),i=n.val();t.previousQuery&&i&&t.previousQuery!==i&&(n.val(t.previousQuery),n.select(),n.autocomplete("search",null))})},options:{selectFunction:null}}),$.widget("biblia.multiautocompleter",{_create:function(){$.preload.gap=13,this.jqAutoCompleterInput=this.element},clearPreviousQuery:function(){this.previousQuery=null},getSelectedItems:function(){return this.selectedItems},setSelectedItems:function(e){this.selectedItems=e||[],this.resetInputValue()},getCurrentInput:function(){return this.jqAutoCompleterInput.val()},options:{getSuggestionsForTerms:null,getInputValueForItem:null,onSubmit:null,getBestItemFromCurrentInput:null,allowMultiSelect:!1},_init:function(){function e(){for(var e=l.jqAutoCompleterInput.val(),t=l.jqAutoCompleterInput[0].selectionStart,n=0,i=0;i<t;i++)","===e[i]&&n++;return n}function t(e){return e.split(/,\s*/)}function n(n){return l.options.allowMultiSelect?t(n)[e()]:n}function i(e,t){l.options.getSuggestionsForTerms?l.options.getSuggestionsForTerms(e,t):t({label:e,value:e,data:e})}function r(){var e;e=l.options.getInputValueForItem?l.selectedItems.map(function(e){return l.options.getInputValueForItem(e)}):l.selectedItems,l.options.allowMultiSelect&&l.selectedItems.length&&e.push(" "),l.jqAutoCompleterInput.val(e.join(", "))}function o(n){if(l.options.allowMultiSelect){for(var i=[],o=t(l.jqAutoCompleterInput.val()).length,s=e(),a=0;a<o;a++){var u=a===s?n:l.selectedItems[a];u&&i.push(u)}l.selectedItems=i}else l.selectedItems=[n];r()}function s(e){var t=n(l.jqAutoCompleterInput.val());l.options.getBestItemFromCurrentInput?l.options.getBestItemFromCurrentInput(t,e):e(null)}function a(){l.jqAutoCompleterInput.autocomplete("close"),l.options.onSubmit&&l.options.onSubmit()}var l=this;this.autoCompleteWidgetContainer=$("#autocomplete-widget-container"),this.autoCompleteContainer=$("<div></div>").addClass("autocomplete-container").appendTo(this.autoCompleteWidgetContainer),this.selectedItems=[],this.resetInputValue=r,this.jqAutoCompleterInput.closest("form").on("submit",function(e){e.preventDefault(),s(function(e){e&&o(e),a()})}),this.jqAutoCompleterInstance=l.jqAutoCompleterInput.autocomplete(_.extend(l.options,{minLength:0,source:function(e,t){i(n(e.term),function(e){t(e)})},focus:function(){return!l.options.allowMultiSelect},select:function(e,t){return o(t.item.data),l.options.allowMultiSelect||a(),!1},appendTo:l.options.appendTo||l.autoCompleteContainer})).data("ui-autocomplete"),this.jqAutoCompleterInstance._renderItem=function(e,t){return $("<li></li>").data("item.autocomplete",t).append($(t.label)).appendTo(e)},this.jqAutoCompleterInput.bind("keydown",function(e){l.jqAutoCompleterInstance.menu.active&&e.keyCode===$.ui.keyCode.TAB&&e.preventDefault(),l.options.allowMultiSelect&&e.keyCode===$.ui.keyCode.COMMA&&(l.jqAutoCompleterInstance.menu.active?(l.jqAutoCompleterInstance.menu.select(),e.preventDefault()):(s(function(e){e?o(e):r()}),e.preventDefault()))})}}),$.widget("biblia.referenceautocompleter",{_create:function(){this.jqInput=this.element},options:{referenceSelected:null,restoreLastQueryOnClick:!1},clearPreviousQuery:function(){this.previousTerm=null},getCurrentlySelectedReference:function(){return this.getReferenceText()},_init:function(){function e(e){return r.suggestionTemplate.tmpl({title:e.suggestionTitle,subTitle:e.suggestionSubTitle,templatePath:"#autocomplete-"+e.iconId+"-template"})}function t(t,n){function i(t){n(t.suggestions.map(function(t){return{label:e(t),value:t.suggestionTitle,data:t}}))}var o=r.previousData;t===r.previousTerm&&o?i(o):(r.previousTerm=t,$.ajax({url:"/autocomplete/",dataType:"json",data:{query:t},success:function(e){e&&e.suggestions?(r.previousData=e,i(e)):n([])},error:function(){n([])}}))}function n(){var e=r.getReferenceText(!0);r.options.referenceSelected&&r.options.referenceSelected(e)}function i(e){return e.selectionText}var r=this;this.suggestionTemplate=$("#auto-complete-suggestion-template"),r.previousTerm=null,r.previousData=null,this.getReferenceText=function(e){var t,n=r.jqInput.multiautocompleter("getSelectedItems")[0],i=r.jqInput.multiautocompleter("getCurrentInput");return n&&n.selectionText===i?(t=n.selectionReferenceValue,e&&r.jqInput.val(n.selectionText)):t=i,t},r.jqInput.multiautocompleter({getSuggestionsForTerms:t,getInputValueForItem:i,onSubmit:n,allowMultiSelect:!1}),r.options.restoreLastQueryOnClick&&r.jqInput.on("click",function(e){var t=$(this),n=t.val();r.previousTerm&&n&&r.previousTerm!==n&&(t.val(r.previousTerm),t.select(),t.autocomplete("search",null))})}}),$.widget("biblia.resourceselector",{_create:function(){this.jqInput=this.element},options:{fnResourcesSelected:null,multipleResources:!1,resourceProvider:null},getSelectedResources:function(){return this.jqInput.multiautocompleter("getSelectedItems")},setSelectedResources:function(e){this.jqInput.multiautocompleter("setSelectedItems",e)},_init:function(){function e(){var e=o.jqInput.multiautocompleter("getSelectedItems");o.options.fnResourcesSelected(e)}function t(e){return e.abbreviatedTitle}function n(e){return o.suggestionTemplate.tmpl(e)}function i(e,t){o.options.appendTo.addClass("getting-resources"),o.options.resourceProvider.getResources(e,function(e){o.options.appendTo.removeClass("getting-resources");var i=e.map(function(e){return{label:n(e),value:e.abbreviatedTitle,data:e}});t(i)})}function r(e,t){return e?i(e,function(e){t(e[0]?e[0].data:null)}):t(null),null}var o=this;this.suggestionTemplate=$("#resource-suggestion-template"),o.options.appendTo||(this.autoCompleteWidgetContainer=$("#autocomplete-widget-container"),o.options.appendTo=$("<div></div>").addClass("resource-selector-results-container").appendTo(this.autoCompleteWidgetContainer)),o.jqInput.multiautocompleter(_.extend(o.options,{getSuggestionsForTerms:i,getInputValueForItem:t,getBestItemFromCurrentInput:r,onSubmit:e,allowMultiSelect:o.options.multipleResources})),window.setTimeout(o.refreshAvailableResources,50)}}),$.widget("biblia.dropdownresourceselector",{_create:function(){this.jqResourceButtonContainer=this.element},options:{resourceProvider:null,resourceSelected:null,defaultSelectedResource:{},customResourceButton:null,onDisplay:null,onHide:null},hideDropdown:function(){this.resourceButtonDropdownInstance.hidePanel(this.resourceButton.get())},displayDropdown:function(){this.resourceButtonDropdownInstance.displayPanel(this.resourceButton.get())},_init:function(){function e(e){var t=e[0];t&&(s.options.customResourceButton||u.find(".selected-resource").html(t.title),o.hidePanel(u.get()),i.val(""),s.options.resourceSelected(t))}var t,n,i,r,o,s=this,a=$("#resource-selector-dropdown-template"),l=$("#resource-selector-button-template"),u=s.options.customResourceButton||$(l.tmpl({displayValue:s.options.defaultSelectedResource.title})).appendTo(this.jqResourceButtonContainer),c=$(a.tmpl());o=u.dropdown({jqPanel:c,strPnlPos:"left top+5px",fnOnHide:function(e){t&&t.close(),s.options.onHide&&s.options.onHide()},fnOnDisplay:function(e){t&&t.search(i.val()),s.options.onDisplay&&s.options.onDisplay()}}).data("ui-dropdown"),this.resourceButtonDropdownInstance=o,this.resourceButton=u,c=o.jqPanel,n=c.find(".resource-selector-results-container").first(),i=c.find("input").first(),r=s.options.resourceProvider,i.resourceselector({fnResourcesSelected:e,resourceProvider:r,close:function(){"visible"===c.css("visibility")&&t.search(i.val())},appendTo:n,minLength:0,position:{of:n,my:"center",at:"center"}}),t=i.data("ui-autocomplete")}});var util={abortRequest:function(e){return e&&e.abort(),null},sanitizeIdForSelector:function(e){return e?e.replace(/([.])/g,"\\$1"):null},extend:function(e){function t(){}return t.prototype=e.prototype||e,new t},argumentsArray:function(e){return Array.prototype.slice.call(e)},getFormUrl:function(e,t){var n=e.attr("action"),i=$.param(t);return[n,n.indexOf("?")>=0?"&":"?",i,i?"&":"",e.serialize()].join("")},escapeHTML:function(e){return e.split("&").join("&amp;").split("<").join("&lt;").split('"').join("&quot;")},qualifyURL:function(e){var t=document.createElement("div");return t.innerHTML='<a href="'+util.escapeHTML(e)+'">x</a>',t.firstChild.href},getCookieValue:function(e){if(document.cookie.length>0){var t=document.cookie.indexOf(e+"=");if(-1!=t){t+=e.length+1;var n=document.cookie.indexOf(";",t);return-1==n&&(n=document.cookie.length),unescape(document.cookie.substring(t,n))}}return""},setCookie:function(e,t,n){var i=new Date;i.setDate(i.getDate()+n),this.deleteCookie(e),document.cookie=[e,"=",escape(t),"number"!=typeof n?"":"; expires="+i.toUTCString(),"; path=/; domain=",util.getCookieDomain()].join("")},deleteCookie:function(e){var t=new Date;t.setDate(t.getDate()-1),document.cookie=[e,"=; expires=",t.toUTCString(),"; path=/; domain=",util.getCookieDomain()].join("")},getCookieDomain:function(){return location.host.substring(location.host.substring(0,location.host.lastIndexOf(".")).lastIndexOf("."))},getTitlePart:function(e,t){var n,i,r="",o="",s=[];if(e&&"string"!=typeof e&&e.render&&_.isFunction(e.render)&&(e=e.render()),e&&-1!==e.indexOf(";")){n=e.split(";");for(var a=0,l=n.length;a<l;a++)(i=BibleReference.tryParse(n[a]))&&s.push(i);e=util.ellipsisize($.map(s,function(e){return e.toString(!1,!0)}).join(", "),30)}t&&(r=t.title||"",o=t.abbreviatedTitle||"");var u=e||r,c=[u];return o&&c.push(" (",o,")"),c.join("")},referenceToUrl:function(e){return e.toUrlSafeString?e.toUrlSafeString():e},renderReference:function(e){return e.render?e.render():e},addUrlParameter:function(e,t,n){return e+(/[?]/.test(e)?"&":"?")+t+"="+n},ellipsisize:function(e,t,n,i){if(e=e||"",n=void 0===n||n,i=void 0===i||i,e.length>t&&e.length>"...".length){var r=e.charAt(t-"...".length);e=e.substring(0,t-"...".length),n&&/\w/.test(r)&&/\w/.test(e[t-"...".length-1])&&(e=e.replace(/[\w]*$/,"")),i&&(e=e.replace(/\s*$/,"")),e+="..."}return e},defaultTo:function(e,t){return void 0===e?t:e},submitOnEnter:function(e){e.each(function(e,t){$(t).keydown(function(e){if(e.which==$.ui.keyCode.ENTER){e.preventDefault();var n=$(t).closest("form");n.length&&n.submit()}})})},lazyLoadImage:function(e,t){var n=$("<img />",e);n[0].complete||4===n[0].readyState?t.call(n):n.load(t)},fitImage:function(e,t,n,i){if(e.height()!=i){var r=i/n;e.css({width:Math.min(Math.max(Math.round(t*r),20),t)+"px"})}},scaleDimensionsToFit:function(e,t,n,i){var r,o,s=e/t,a=n/i;return e<n&&t<i?(o=e,r=t):s<a?(r=i,o=r*s):(o=n,r=o/s),{width:o,height:r}},slide:function(e,t,n,i,r){var o="",s="",a=t.outerWidth()+"px";"left"==n?s="-":o="-",t.css({left:o+a,right:s+a}).animate({left:"0",right:"0"},r||800),e.animate({left:s+a,right:o+a},r?$.extend({},r,{complete:i}):800)},removeArrayValue:function(e,t){var n=e.indexOf(t);-1!=n&&e.splice(n,1)},findElementAtTopOfScollingContainer:function(e,t,n,i,r){return util.findTopInFrame(e,t,null,n,i,r)},findTopInFrame:function(e,t,n,i,r,o){var s=e.find(r),a=null;return o||(s=s.filter(":visible")),s.binarySearch(null,function(e){var r=$(e),o=r.iposition();return i+o.top>t&&(null===n||i+o.top<n)?(a=r,1):-1}),a},findElementAtBottomOfScrollingContainer:function(e,t,n,i){var r=e.outerHeight(),o=e.find(i).filter(":visible"),s=null;return o.binarySearch(null,function(e){var i=$(e),o=i.iposition();return n+o.top+i.height()<t+r?(n+o.top>t&&(s=i),-1):1}),s},showLoadingMask:function(e){var t=$.tmpl($("#loading-mask-template").template());e.append(t)},hideLoadingMask:function(e){e.find(".loading-mask").remove()},setUpSocialMediaPlugins:function(){!function(e,t,n){var i,r=e.getElementsByTagName(t)[0];e.getElementById(n)||(i=e.createElement(t),i.id=n,i.src="https://connect.facebook.net/en_GB/all.js#xfbml=1",r.parentNode.insertBefore(i,r))}(document,"script","facebook-jssdk"),function(e,t,n){var i,r=e.getElementsByTagName(t)[0];e.getElementById(n)||(i=e.createElement(t),i.id=n,i.src="https://platform.twitter.com/widgets.js",r.parentNode.insertBefore(i,r))}(document,"script","twitter-wjs"),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://apis.google.com/js/plusone.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()},timezoneOffset:(new Date).getTimezoneOffset()/-60};Date.prototype.toISOString||function(){function e(e){var t=String(e);return 1===t.length&&(t="0"+t),t}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(),window.log=function(){function e(e){!n||!i&&s&&s.log||n.apply(r,e)}function t(e){return l>0?l>e:u.length+l<=e}for(var n,i,r=window,o=Array.prototype.slice,s=r.console,a={},l=9,u=["error","warn","info","debug","log"],c="assert clear count dir dirxml group groupEnd profile profileEnd time timeEnd trace".split(" "),h=c.length,f=[];--h>=0;)!function(e){a[e]=function(){0!==l&&s&&s[e]&&s[e].apply(s,arguments)}}(c[h]);for(h=u.length;--h>=0;)!function(n,i){a[i]=function(){var a=o.call(arguments),l=[i].concat(a);f.push(l),e(l),s&&t(n)&&(s.firebug?s[i].apply(r,a):s[i]?s[i](a):s.log(a))}}(h,u[h]);return a.setLevel=function(e){l="number"==typeof e?e:9},a.setCallback=function(){var t=o.call(arguments),r=f.length,s=r;for(n=t.shift()||null,i="boolean"==typeof t[0]&&t.shift(),s-="number"==typeof t[0]?t.shift():r;s<r;)e(f[s++])},a}();var UIBase=function(e,t){"use strict";function n(){this.commonInit=function(){!function(){var n=!1;e(document).on("focusin","input.resource-navigation",function(t){if(!n){var i=this;n=!0,setTimeout(function(){e(i).select(),n=!1},10)}}),e("#set-mobile").click(function(e){e.preventDefault(),t.setCookie("ForceMobile",1,3650),t.deleteCookie("NotMobile"),window.location.reload()})}()}}return n.prototype.update=function(e){throw new Error("update must be implemented by the concrete class.")},n.prototype.init=function(){throw new Error("init must be implemented by the concrete class.")},n}($,util),contentTooltipUtility=function(e){"use strict";return{fetchTooltipContent:function(t,n,i,r){r=r||function(e){return e};var o=r(t.toUrl("js",!0,!1,!0));o&&e.ajax({url:o,success:function(t){var r,o=[];t.refRequested&&o.push(t.refRequested),t.resourceName&&t.resourceTitle&&t.resourceName!=n&&o.push(t.resourceTitle),r=o.join(" | "),e.trim(e(t.content).text()+r)?i(t.content,r||null):i(biblia.resourcestrings.noTooltip)},error:function(){i(biblia.resourcestrings.tooltipError)}})}}}($);!function(e){e.fn.extend({radioClass:function(t){return this.each(function(){e(this).siblings().removeClass(t).end().addClass(t)})}})}(jQuery),function(e){e.extend(e.fn,{binarySearch:function(e,t){for(var n,i,r=0,o=this.length-1;r<=o;)if(n=Math.floor((r+o)/2,10),(i=t(this[n],e))<0)r=n+1;else{if(!(i>0))return n;o=n-1}return null}})}(jQuery),function(e){e.extend(e.fn,{isInDocument:function(){return e.contains(document.body,this.get(0))},contains:function(t){return e.contains(this.get(0),t.get(0))}})}(jQuery),function(e){function t(e){var t=e.parent(),n=t.contents().detach(),i=n.index(e);if(i<0||i>=n.length)return!1;var r=t.clone(!0);return t.append(n.slice(0,i)),r.append(n.slice(i+1)),t.after(r).after(e),!0}e.extend(e.fn,{domSplit:function(n){return this.each(function(){for(var i=e(this),r="string"==typeof n?i.closest(n):n;e.contains(r.get(0),this);)t(i)})}})}(jQuery),function(e){var t=e("<span>*</span>");e.extend(e.fn,{iposition:function(){if(!this.length||-1===navigator.userAgent.indexOf("AppleWebKit"))return this.position();var e=this.first();t.appendTo(e);var n=e.position();return t.remove(),n}})}(jQuery),function(e){e.fn.simpleTree=function(t){return e.fn.simpleTree.ajaxQuery(t,this,!0),this.delegate(".simple-tree-expander","click",function(){var n=e(this),i=n.closest("li"),r=i.children("ul");0===r.length?e.fn.simpleTree.ajaxQuery(t,i):r.addClass("simple-tree-expanded"),n.removeClass("simple-tree-expander").addClass("simple-tree-contractor")}),this.delegate(".simple-tree-contractor","click",function(){var t=e(this),n=t.closest("li"),i=n.children("ul");i.length>0&&i.removeClass("simple-tree-expanded"),t.removeClass("simple-tree-contractor").addClass("simple-tree-expander")}),this},e.fn.simpleTree.loadData=function(t,n,i){var r=e("<ul></ul>");i&&n.addClass("simple-tree"),r.addClass("simple-tree-expanded"),e.each(t,function(n,i){var o=e("<li></li>").attr(i.itemAttr||{});i.itemMetadata&&o.data(i.itemMetadata);var s=e("<div></div>").addClass("simple-tree-icon").appendTo(o);if(e("<a></a>").attr(i.anchorAttr||{}).text(i.title).appendTo(o),i.hasChildren){var a=null;i.children&&loadData(i.children,o),t.isExpanded?(s.addClass("simple-tree-contractor"),a&&a.length>0&&a.addClass("simple-tree-expanded")):s.addClass("simple-tree-expander")}r.append(o)}),n.append(r)},e.fn.simpleTree.ajaxQuery=function(t,n,i){e.ajax(e.extend({},t.ajax,{url:t.ajax.url+(t.getUrlSuffix&&e.isFunction(t.getUrlSuffix)?t.getUrlSuffix(n):""),data:t.getParameters&&e.isFunction(t.getParameters)?t.getParameters(n):t.ajax.data||{},success:function(r){t.ajax.success&&e.isFunction(t.ajax.success)&&t.ajax.success(r),e.fn.simpleTree.loadData(t.transformResult&&e.isFunction(t.transformResult)?t.transformResult(r):r||{},n,i)}}))}}(jQuery);var LocationMarker=function(e,t,n,i){"use strict";function r(){}return r.prototype.render=function(){throw new Error(n.errors.abstractMethod("LocationMarker","render"))},r.prototype.toUrlSafeString=function(){throw new Error(n.errors.abstractMethod("LocationMarker","toUrlSafeString"))},r.prototype.equals=function(){throw new Error(n.errors.abstractMethod("LocationMarker","equals"))},r.prototype.isEqualOrLessSpecificThan=function(){throw new Error(n.errors.abstractMethod("LocationMarker","isEqualOrLessSpecificThan"))},r.types={reference:"reference",headword:"headword"},r}(_,$,biblia),Reference=function(e,t){"use strict";function n(e,n){t.call(this),this.strReference=e,this.strUrlReference=n||e,this.isReference=!0}return n.prototype=e.extend(t),n.prototype.render=function(){return this.strReference},n.prototype.toUrlSafeString=function(){return this.strUrlReference},n.prototype.equals=function(e){return!!(e instanceof n&&e.strReference)&&this.strUrlReference===e.strUrlReference},n.prototype.isEqualOrLessSpecificThan=function(e){return this.equals(e)},n}(util,LocationMarker),Headword=function(e,t){"use strict";function n(e,n){t.call(this),this.strHeadword=e,this.strUrlHeadword=n||e,this.isHeadword=!0}return n.prototype=e.extend(t),n.prototype.render=function(){return this.strHeadword},n.prototype.toUrlSafeString=function(){return this.strUrlHeadword},n.prototype.equals=function(e){return!!(e instanceof n&&e.strHeadword)&&this.strUrlHeadword===e.strUrlHeadword},n.prototype.isEqualOrLessSpecificThan=function(e){return this.equals(e)},n}(util,LocationMarker),BibleReference=function(e,t){"use strict";function n(e,i){if(t.call(this),e){e=e.replace(/^\s+|\s+$/g,"");var r,o=n.refRegExp.exec(e);if(o){if(!(r=n.getBookInfo(o[3])))throw new Error("Not a reference: "+e);if(this.isRange=!1,this.book=r.shortReference,this.chapter=o[4]?Number(o[4]):null,this.isSingleChapterBook=r.isSingleChapterBook,this.section=r.section,o[5]){var s=n.verseSuffixRegExp.exec(o[5]);s?(this.verse=Number(s[1]),s[3]&&(this.isRange=!0,this.startReference=new n,this.startReference.book=this.book,this.startReference.chapter=this.chapter,this.startReference.verse=this.verse,this.endReference=new n,this.endReference.book=this.book,this.endReference.chapter=this.chapter,"f"==s[3]?this.endReference.verse=this.verse+1:"ff"==s[3]&&(this.endReference.verse=this.verse+10))):this.verse=Number(o[5])}else this.verse=null;if(this.isSingleChapterBook&&this.chapter&&!this.verse&&(this.verse=this.chapter,this.chapter=1),o[6]){var a=n.refRangeRegExp.exec(o[6]);a&&(this.isRange=!0,this.startReference=new n,this.startReference.book=this.book,this.startReference.chapter=this.chapter,this.startReference.verse=this.verse,this.endReference=new n,this.endReference.book=this.book,a[2]?(this.endReference.chapter=Number(a[1]),this.endReference.verse=Number(a[2])):(this.endReference.chapter=this.chapter,this.endReference.verse=Number(a[1])))}}else{if(!(r=n.getBookInfo(e)))throw new Error("Not a reference: "+e);this.book=r.shortReference,this.chapter=null,this.verse=null,this.isRange=!1,this.isSingleChapterBook=r.isSingleChapterBook,this.section=r.section}this.datatype=i&&i.replace("+","")||null,this.isBibleReference=!0}}return n.prototype=e.extend(t),n.refRegExp=new RegExp("(\\W|^)((Z(?:e(?:p(?:h(?:aniah)?)?|c(?:h(?:ariah)?)?)|[pc])|W(?:is(?:d(?:om(?:\\s+of\\s+(?:Ben\\s+Sirah?|Solomon))?|\\.?\\s+of\\s+Sol))?|s)|T(?:ob(?:it)?|i?t(?:us)?|he(?:\\s+(?:Song\\s+of\\s+(?:Three\\s+(?:Youth|Jew)s|the\\s+Three\\s+Holy\\s+Children)|Re(?:velation|st\\s+of\\s+Esther))|ssalonians)|b)|S(?:us(?:anna)?|o(?:ng(?:\\s+(?:of\\s+(?:Thr(?:ee(?:\\s+(?:(?:Youth|Jew)s|Children))?)?|So(?:l(?:omon)?|ngs)|the\\s+Three\\s+Holy\\s+Children)|Thr))?)?|ir(?:a(?:c?h)?)?|OS)|R(?:u(?:th)?|o(?:m(?:ans)?)?|e(?:v(?:elation)?|st\\s+of\\s+Esther)?|[vm]|th)|Qoh(?:eleth)?|P(?:s(?:\\s+Sol(?:omon)?|a(?:lm(?:s(?:\\s+(?:of\\s+)?Solomon)?)?)?|Sol|s|l?m)?|r(?:ov(?:erbs)?|\\s+(?:(?:of\\s+)?Man|Az)|ayer\\s+of\\s+(?:Manasse[sh]|Azariah)|v)?|h(?:il(?:e(?:m(?:on)?)?|ippians)?|[pm])|p|Ma)|O(?:b(?:ad(?:iah)?)?|des)|N(?:u(?:m(?:bers)?)?|e(?:h(?:emiah)?)?|a(?:h(?:um)?)?|[mb])|M(?:rk?|ic(?:ah)?|a(?:t(?:t(?:hew)?)?|l(?:achi)?|rk)|[tlk])|L(?:uke?|e(?:v(?:iticus)?|t(?:ter\\s+of\\s+Jeremiah|\\s+Jer))?|a(?:od(?:iceans)?|m(?:entations)?)?|[vk]|tr\\s+Jer|Je)|J(?:u?d(?:g(?:es)?|ith|e)?|o(?:s(?:h(?:ua)?)?|n(?:ah)?|el?|hn|b)|nh?|e(?:r(?:emiah)?)?|d(?:th?|gs?)|a(?:me)?s|[ts]h|[rmlgb]|hn)|Is(?:a(?:iah)?)?|H(?:o(?:s(?:ea)?)?|e(?:b(?:rews)?)?|a(?:g(?:gai)?|b(?:akkuk)?)|g)|G(?:e(?:n(?:esis)?)?|a(?:l(?:atians)?)?|n)|E(?:z(?:ra?|e(?:k(?:iel)?)?|k)|x(?:o(?:d(?:us)?)?)?|s(?:th(?:er)?)?|p(?:ist(?:le\\s+(?:to\\s+(?:the\\s+)?Laodiceans|Laodiceans)|\\s+Laodiceans)|h(?:es(?:ians)?)?|\\s+Laod)?|c(?:cl(?:es(?:iast(?:icu|e)s)?|us)?)?|noch)|D(?:eut(?:eronomy)?|a(?:n(?:iel)?)?|[tn])|C(?:ol?(?:ossians)?|anticle(?:\\s+of\\s+Canticle)?s)|B(?:el(?:\\s+and\\s+the\\s+Dragon)?|ar(?:uch)?)|A(?:m(?:os)?|dd(?:\\s+(?:Ps(?:alm)?|Es(?:th)?)|ition(?:s\\s+to\\s+Esther|al\\s+Psalm)|Esth)|c(?:ts)?|zariah|Es)|\\u03C8|(?:4(?:th\\s)?|[Ff]ourth\\s|(?:IIII|IV)\\s)\\s*(?:Ma(?:c(?:c(?:abees)?)?)?)|(?:3(?:rd\\s)?|[Tt]hird\\s|III\\s)\\s*(?:Ma(?:c(?:c(?:abees)?)?)?|Jo(?:h(?:n)?)?|Jn\\.?|Jhn|J)|(?:(?:2(?:nd\\s)?|[Ss]econd\\s|II\\s)|(?:1(?:st\\s)?|[Ff]irst\\s|I\\s))\\s*(?:T(?:i(?:m(?:othy)?)?|h(?:es(?:s(?:alonians)?)?)?)|S(?:a(?:m(?:uel)?)?|m)?|P(?:e(?:t(?:er)?)?|t)?|Ma(?:c(?:c(?:abees)?)?)?|K(?:i(?:n(?:gs)?)?|(?:gs)?)|J(?:o(?:hn?)?|h?n?)|Es(?:d(?:r(?:as)?)?)?|C(?:o(?:r(?:inthians)?)?|h(?:r(?:on(?:icles)?)?)?)))(?:\\.?\\s*(\\d{1,3})(?:\\s?\\:\\s?|\\.|\\s)?(?:(\\d{1,3}(?:(?:\\s?(?:[a-z]|ff))(?=\\W|$))?)(\\s?(?:-|--|\\u2013|\\u2014)\\s?\\d{1,3}(?:(?:\\s?(?:[a-z]|ff))(?=\\W|$))?((?:\\s?\\:\\s?|\\.|\\s)\\d{1,3}(?:(?:\\s?(?:[a-z]|ff))(?=\\W|$))?)?(?!\\s*(?:T(?:i(?:m(?:othy)?)?|h(?:es(?:s(?:alonians)?)?)?)|S(?:a(?:m(?:uel)?)?|m)?|P(?:e(?:t(?:er)?)?|t)?|Ma(?:c(?:c(?:abees)?)?)?|K(?:i(?:n(?:gs)?)?|(?:gs)?)|J(?:o(?:hn?)?|h?n)|Es(?:d(?:r(?:as)?)?)?|C(?:o(?:r(?:inthians)?)?|h(?:r(?:on(?:icles)?)?)?))(?:\\W)))?)?)|(Ob(?:ad(?:iah)?)?|P(?:h(?:ile(?:m(?:on)?)?|m)|m)|(?:(?:2(?:nd\\s)?|[Ss]econd\\s|II\\s)|(?:3(?:rd\\s)?|[Tt]hird\\s|III\\s))\\s*J(?:o(?:hn?)?|h?n?)|Ju?de?)\\s*\\d{1,3}(?:(?:\\s?(?:[a-z]|ff))(?=\\W|$))?(?:\\s?(?:-|--|\\u2013|\\u2014)\\s?\\d{1,3}(?:(?:\\s?(?:[a-z]|ff))(?=\\W|$))?)?)","i"),n.refRangeRegExp=new RegExp("(?:\\s?(?:-|--|\\u2013|\\u2014)\\s?(\\d{1,3}))\\s?(?::|.)?\\s?(\\d{1,3})?"),n.verseSuffixRegExp=new RegExp("^(\\d+)\\s*([a-e])?(f{1,2})?"),n.prototype.compareTo=function(e){if(!this.book||!e.book)return null;if(this.book.toLowerCase()==e.book.toLowerCase())if(this.chapter!=e.chapter&&this.chapter&&e.chapter){if(this.chapter<e.chapter)return-1;if(this.chapter>e.chapter)return 1}else{if(this.verse==e.verse||!this.verse||!e.verse)return 0;if(this.verse<e.verse)return-1;if(this.verse>e.verse)return 1}else if(this.book&&e.book){for(var t=null,i=null,r=0;r<n.bookInfoTable.length;r++){var o=n.bookInfoTable[r];this.book==o.shortReference&&(t=r),e.book==o.shortReference&&(i=r)}if(t&&i)return t<i?-1:1}return null},n.prototype.equals=function(e){if(e){if(this.isRange)return!!e.isRange&&(this.startReference.equals(e.startReference)&&this.endReference.equals(e.endReference));if(e.isRange)return!1;return(this.book?this.book.toLowerCase():null)==(e.book?e.book.toLowerCase():null)&&this.chapter==e.chapter&&this.verse==e.verse}return!1},n.prototype.isEqualOrLessSpecificThan=function(e){var t=this.clone();if(e){if((t.book?t.book.toLowerCase():null)==(e.book?e.book.toLowerCase():null)&&(t.chapter=t.chapter||1,t.verse=t.verse||1,t.chapter==e.chapter&&t.verse==e.verse)){if(!t.isRange&&!e.isRange)return!0;if(t.isRange&&e.isRange&&t.startReference.equals(e.startReference)&&t.endReference.equals(e.endReference))return!0;if(t.isRange&&!e.isRange&&t.startReference.equals(e))return!0;if(!t.isRange&&e.isRange&&t.equals(e.startReference))return!0}}return!1},n.prototype.clone=function(){return new n(this.toString())},n.prototype.render=function(){return this.toString(!0)},n.prototype.toUrlSafeString=function(){var e=this.toString().replace(/\s/g,"").replace(/[:]/g,".");return this.datatype&&"bible"!=this.datatype?this.datatype+"."+e:e},n.prototype.toString=function(e,t){var i="";if(t)i=n.getBookInfo(this.book).shortReference;else if(e){var r=n.getBookInfo(this.book);i=r.displayReference}else i=this.book;return this.isSingleChapterBook?this.verse&&(i+=" "+this.verse,this.isRange&&(i+="-"+this.endReference.verse)):(this.chapter&&(i+=" "+this.chapter),this.verse&&(i+=":"+this.verse),this.isRange&&(i+="-",this.endReference.chapter==this.chapter?i+=this.endReference.verse:i+=this.endReference.chapter+":"+this.endReference.verse)),i},n.prototype.toShortestString=function(){var e=n.getBookInfo(this.book),t=e.shortestReference;return this.isSingleChapterBook?this.verse&&(t+=this.verse,this.isRange&&(t+="-"+this.endReference.verse)):(this.chapter&&(t+=this.chapter),this.verse&&(t+="."+this.verse),this.isRange&&(this.endReference.chapter==this.chapter?this.endReference.verse==this.verse+1?t+="f":t+="-"+this.endReference.verse:t+="-"+this.endReference.chapter+"."+this.endReference.verse)),t},n.prototype.toFirstVerseInRange=function(){var e=this.clone();return e.startReference&&(e=e.startReference),this.isSingleChapterBook||(e.chapter=e.chapter||1),e.verse=e.verse||1,e},n.tryParse=function(e,t){if(!e)return null;if(e instanceof n)return e;if("string"!=typeof e)throw new Error("Invalid non-string parameter passed to BibleReference.tryParse");var i=null;try{i=new n(e,t)}catch(e){i=null}return i},n.isBibleReference=function(e){return null!==n.tryParse(e)},n.containsReference=function(e){return n.refRegExp.test(e)},n.isBook=function(e){return!!n.getBookInfo(e)},n.toShortForm=function(e){var t=n.getBookInfo(e);return t?t.shortReference:e},n.getBookInfo=function(e){for(var t=0;t<n.bookInfoTable.length;t++){var i=n.bookInfoTable[t];if(i.RE.test(e))return i}return null},n.bookInfoTable=[{RE:new RegExp("^\\s*(G(?:e(?:n(?:esis)?)?|n))\\s*$","i"),shortReference:"Ge",shortestReference:"Ge",displayReference:"Genesis",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*(Ex(?:o(?:d(?:us)?)?)?)\\s*$","i"),shortReference:"Ex",shortestReference:"Ex",displayReference:"Exodus",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*(L(?:e(?:v(?:iticus)?)?|v))\\s*$","i"),shortReference:"Le",shortestReference:"Le",displayReference:"Leviticus",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*(N(?:u(?:m(?:b(?:ers)?)?)?|[mb]))\\s*$","i"),shortReference:"Nu",shortestReference:"Nu",displayReference:"Numbers",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*(D(?:e(?:ut(?:eronomy)?)?|t))\\s*$","i"),shortReference:"Dt",shortestReference:"Dt",displayReference:"Deuteronomy",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*(J(?:os(?:h(?:ua)?)?|sh))\\s*$","i"),shortReference:"Jos",shortestReference:"Jos",displayReference:"Joshua",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*(J(?:dgs?|udg(?:es)?|g))\\s*$","i"),shortReference:"Jdg",shortestReference:"Jg",displayReference:"Judges",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*(R(?:u(?:th)?|th))\\s*$","i"),shortReference:"Ru",shortestReference:"Ru",displayReference:"Ruth",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*((?:1(?: ?S(?:a(?:muel)?|m)?|st S(?:a(?:m(?:uel)?)?|m)?| Sam)|I(?: S(?:a(?:m(?:uel)?)|m)| S| Sa|Sam|Samuel)|First S(?:a(?:m(?:uel)?)?|m)?))\\s*$","i"),shortReference:"1 Sa",shortestReference:"1S",displayReference:"1 Samuel",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*((?:2(?: ?S(?:a(?:m(?:uel)?)?|m)?|nd S(?:a(?:m(?:uel)?)?|m)?)|II ?S(?:a(?:m(?:uel)?)?|m)?|Second S(?:a(?:m(?:uel)?)?|m)?))\\s*$","i"),shortReference:"2 Sa",shortestReference:"2S",displayReference:"2 Samuel",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*((?:1(?: ?K(?:i(?:n(?:gs)?)?|gs)?|st K(?:i(?:n(?:gs)?)?|gs)?)|I ?K(?:i(?:n(?:gs)?)?|gs)?|First K(?:i(?:n(?:gs)?)?|gs)?))\\s*$","i"),shortReference:"1 Ki",shortestReference:"1K",displayReference:"1 Kings",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*((?:2(?: ?K(?:i(?:n(?:gs)?)?|gs)?|nd K(?:i(?:n(?:gs)?)?|gs)?)|II ?K(?:i(?:n(?:gs)?)?|gs)?|Second K(?:i(?:n(?:gs)?)?|gs)?))\\s*$","i"),shortReference:"2 Ki",shortestReference:"2K",displayReference:"2 Kings",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*((?:1(?: ?Ch(?:r(?:on(?:icles)?)?)?|st Ch(?:r(?:on(?:icles)?)?)?)|I ?Ch(?:r(?:on(?:icles)?)?)?|First Ch(?:r(?:on(?:icles)?)?)?))\\s*$","i"),shortReference:"1 Ch",shortestReference:"1Ch",displayReference:"1 Chronicles",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*((?:2(?: ?Ch(?:r(?:on(?:icles)?)?)?|nd Ch(?:r(?:on(?:icles)?)?)?)|II ?Ch(?:r(?:on(?:icles)?)?)?|Second Ch(?:r(?:on(?:icles)?)?)?))\\s*$","i"),shortReference:"2 Ch",shortestReference:"2Ch",displayReference:"2 Chronicles",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*(Ez(?:ra?)?)\\s*$","i"),shortReference:"Ezr",shortestReference:"Ezr",displayReference:"Ezra",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*(Ne(?:h(?:em(?:iah)?)?)?)\\s*$","i"),shortReference:"Ne",
shortestReference:"Ne",displayReference:"Nehemiah",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*(Es(?:th(?:er)?)?)\\s*$","i"),shortReference:"Es",shortestReference:"Es",displayReference:"Esther",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*(Jo?b)\\s*$","i"),shortReference:"Job",shortestReference:"Jb",displayReference:"Job",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*(Ps(?:alms?|lm|a|m|s)?)\\s*$","i"),shortReference:"Ps",shortestReference:"Ps",displayReference:"Psalm",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*(Pr(?:ov(?:erbs?)?|v)?)\\s*$","i"),shortReference:"Pr",shortestReference:"Pr",displayReference:"Proverbs",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*((?:Ec(?:c(?:l(?:es(?:iastes)?)?)?)?|Qoh(?:eleth)?))\\s*$","i"),shortReference:"Ec",shortestReference:"Ec",displayReference:"Ecclesiastes",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*((?:S(?:o(?:ng(?: of So(?:l(?:omon)?|ngs))?)?|OS)|Canticle(?: of Canticle)?s))\\s*$","i"),shortReference:"So",shortestReference:"So",displayReference:"Song of Solomon",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*(Is(?:a(?:i(?:ah)?)?)?)\\s*$","i"),shortReference:"Is",shortestReference:"Is",displayReference:"Isaiah",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*(J(?:e(?:r(?:em(?:iah)?)?)?|r))\\s*$","i"),shortReference:"Je",shortestReference:"Je",displayReference:"Jeremiah",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*(La(?:m(?:entations)?)?)\\s*$","i"),shortReference:"La",shortestReference:"La",displayReference:"Lamentations",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*(Ez(?:e(?:k(?:iel)?)?|k))\\s*$","i"),shortReference:"Eze",shortestReference:"Eze",displayReference:"Ezekiel",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*(D(?:a(?:n(?:iel)?)?|n))\\s*$","i"),shortReference:"Da",shortestReference:"Da",displayReference:"Daniel",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*(Ho(?:s(?:ea)?)?)\\s*$","i"),shortReference:"Ho",shortestReference:"Ho",displayReference:"Hosea",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*(J(?:oel?|l))\\s*$","i"),shortReference:"Joe",shortestReference:"Jl",displayReference:"Joel",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*(Am(?:os)?)\\s*$","i"),shortReference:"Am",shortestReference:"Am",displayReference:"Amos",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*(Ob(?:ad(?:iah)?)?)\\s*$","i"),shortReference:"Ob",shortestReference:"Ob",displayReference:"Obadiah",isSingleChapterBook:!0,section:"old"},{RE:new RegExp("^\\s*(J(?:on(?:ah)?|nh))\\s*$","i"),shortReference:"Jon",shortestReference:"Jon",displayReference:"Jonah",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*(Mi?c(?:ah)?)\\s*$","i"),shortReference:"Mic",shortestReference:"Mc",displayReference:"Micah",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*(Na(?:h(?:um)?)?)\\s*$","i"),shortReference:"Na",shortestReference:"Na",displayReference:"Nahum",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*(Ha?b(?:akkuk)?)\\s*$","i"),shortReference:"Hab",shortestReference:"Hb",displayReference:"Habakkuk",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*(Z(?:ep(?:h(?:aniah)?)?|p))\\s*$","i"),shortReference:"Zep",shortestReference:"Zp",displayReference:"Zephaniah",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*(H(?:ag(?:gai)?|g))\\s*$","i"),shortReference:"Hag",shortestReference:"Hg",displayReference:"Haggai",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*(Z(?:ec(?:h(?:ariah)?)?|c))\\s*$","i"),shortReference:"Zec",shortestReference:"Zc",displayReference:"Zechariah",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*(M(?:al(?:achi)?|l))\\s*$","i"),shortReference:"Mal",shortestReference:"Ml",displayReference:"Malachi",isSingleChapterBook:!1,section:"old"},{RE:new RegExp("^\\s*(T(?:ob(?:it)?|b))\\s*$","i"),shortReference:"Tob",shortestReference:"Tb",displayReference:"Tobit",isSingleChapterBook:!1,section:"apocrypha"},{RE:new RegExp("^\\s*(J(?:dth?|(?:udi)?th))\\s*$","i"),shortReference:"Jdt",shortestReference:"Jdt",displayReference:"Judith",isSingleChapterBook:!1,section:"apocrypha"},{RE:new RegExp("^\\s*((?:A(?:dd(?: ?Esth| Es|itions to Esther)|Es)|(?:The )?Rest of Esther))\\s*$","i"),shortReference:"Add Es",shortestReference:"AEs",displayReference:"Additions to Esther",isSingleChapterBook:!1,section:"apocrypha"},{RE:new RegExp("^\\s*(W(?:is(?:d(?:om(?: of Solomon)?|.? of Sol))?|s))\\s*$","i"),shortReference:"Wis",shortestReference:"Wis",displayReference:"Wisdom of Solomon",isSingleChapterBook:!1,section:"apocrypha"},{RE:new RegExp("^\\s*((?:Sir(?:a(?:c?h)?)?|Wisdom of Ben Sirah?|Ben Sirah?|Eccl(?:esiastic)?us))\\s*$","i"),shortReference:"Sir",shortestReference:"Sr",displayReference:"Sirach",isSingleChapterBook:!1,section:"apocrypha"},{RE:new RegExp("^\\s*(Bar(?:uch)?)\\s*$","i"),shortReference:"Bar",shortestReference:"Bar",displayReference:"Baruch",isSingleChapterBook:!1,section:"apocrypha"},{RE:new RegExp("^\\s*(L(?:et(?: Jer|ter of Jeremiah)|Je|tr Jer))\\s*$","i"),shortReference:"Let Jer",shortestReference:"LJ",displayReference:"Letter of Jeremiah",isSingleChapterBook:!1,section:"apocrypha"},{RE:new RegExp("^\\s*((?:Song (?:of (?:Thr(?:ee(?: (?:(?:Youth|Jew)s|Children))?)?|the Three Holy Children)|Thr)|The Song of (?:Three (?:Youth|Jew)s|the Three Holy Children)|Pr(?: Az|ayer of Azariah)|Azariah))\\s*$","i"),shortReference:"Song Thr",shortestReference:"ST",displayReference:"Song of Three Youths",isSingleChapterBook:!1,section:"apocrypha"},{RE:new RegExp("^\\s*(Sus(?:anna)?)\\s*$","i"),shortReference:"Sus",shortestReference:"Su",displayReference:"Susanna",isSingleChapterBook:!1,section:"apocrypha"},{RE:new RegExp("^\\s*(Bel(?: and the Dragon)?)\\s*$","i"),shortReference:"Bel",shortestReference:"Bl",displayReference:"Bel and the Dragon",isSingleChapterBook:!1,section:"apocrypha"},{RE:new RegExp("^\\s*((?:1(?: ?M(?:a(?:cc(?:abees)?)?)?|st M(?:a(?:c(?:c(?:abees)?)?)?)?| Mac)|I ?M(?:a(?:c(?:c(?:abees)?)?)?)?|First M(?:a(?:c(?:c(?:abees)?)?)?)?))\\s*$","i"),shortReference:"1 Mac",shortestReference:"1M",displayReference:"1 Maccabees",isSingleChapterBook:!1,section:"apocrypha"},{RE:new RegExp("^\\s*((?:2(?: ?M(?:a(?:c(?:c(?:abees)?)?)?)?|nd M(?:a(?:c(?:c(?:abees)?)?)?)?)|II ?M(?:a(?:c(?:c(?:abees)?)?)?)?|Second M(?:a(?:c(?:c(?:abees)?)?)?)?))\\s*$","i"),shortReference:"2 Mac",shortestReference:"2M",displayReference:"2 Maccabees",isSingleChapterBook:!1,section:"apocrypha"},{RE:new RegExp("^\\s*((?:1(?: ?Es(?:d(?:r(?:as)?)?)?|st Es(?:d(?:r(?:as)?)?)?)|I ?Es(?:d(?:r(?:as)?)?)?|First Es(?:d(?:r(?:as)?)?)?))\\s*$","i"),shortReference:"1 Esd",shortestReference:"1E",displayReference:"1 Esdras",isSingleChapterBook:!1,section:"apocrypha"},{RE:new RegExp("^\\s*(P(?:r(?: (?:of )?Man|ayer of Manasse[hs])|Ma))\\s*$","i"),shortReference:"Pr Man",shortestReference:"PMa",displayReference:"Prayer of Manasseh",isSingleChapterBook:!1,section:"apocrypha"},{RE:new RegExp("^\\s*(Add(?: Ps(?:alm)?|itional Psalm))\\s*$","i"),shortReference:"Add Ps",shortestReference:"APs",displayReference:"Additional Psalm",isSingleChapterBook:!1,section:"apocrypha"},{RE:new RegExp("^\\s*((?:3(?: ?M(?:a(?:c(?:c(?:abees)?)?)?)?|rd M(?:a(?:c(?:c(?:abees)?)?)?)?)|III ?M(?:a(?:c(?:c(?:abees)?)?)?)?|Third M(?:a(?:c(?:c(?:abees)?)?)?)?))\\s*$","i"),shortReference:"3 Mac",shortestReference:"3M",displayReference:"3 Maccabees",isSingleChapterBook:!1,section:"apocrypha"},{RE:new RegExp("^\\s*((?:2(?: ?Es(?:d(?:r(?:as)?)?)?|nd Es(?:d(?:r(?:as)?)?)?)|I(?:I(?: ?Es(?:d(?:r(?:as)?)?)?|II ?Ez(?:ra?)?)|V ?Ez(?:ra?)?)|4(?: ?Ez(?:ra?)?|th Ez(?:ra?)?)|Second Es(?:d(?:r(?:as)?)?)?|Fourth Ez(?:ra?)?))\\s*$","i"),shortReference:"2 Esd",shortestReference:"2E",displayReference:"2 Esdras",isSingleChapterBook:!1,section:"apocrypha"},{RE:new RegExp("^\\s*((?:4(?: ?M(?:a(?:c(?:c(?:abees)?)?)?)?|th M(?:a(?:c(?:c(?:abees)?)?)?)?)|I(?:V ?M(?:a(?:c(?:c(?:abees)?)?)?)?|III ?M(?:a(?:c(?:c(?:abees)?)?)?)?)|Fourth M(?:a(?:c(?:c(?:abees)?)?)?)?))\\s*$","i"),shortReference:"4 Mac",shortestReference:"4M",displayReference:"4 Maccabees",isSingleChapterBook:!1,section:"apocrypha"},{RE:new RegExp("^\\s*(Odes?)\\s*$","i"),shortReference:"Ode",shortestReference:"Od",displayReference:"Odes",isSingleChapterBook:!1,section:"apocrypha"},{RE:new RegExp("^\\s*(Ps(?:alms (?:of )?Solomon| ?Sol| Solomon))\\s*$","i"),shortReference:"Ps Sol",shortestReference:"PsSo",displayReference:"Psalms of Solomon",isSingleChapterBook:!1,section:"apocrypha"},{RE:new RegExp("^\\s*((?:Laod(?:iceans)?|Ep(?:ist(?:le (?:to (?:the )?Laodiceans|Laodiceans)| Laodiceans)| Laod)))\\s*$","i"),shortReference:"Laod",shortestReference:"Ld",displayReference:"Epistle to the Laodiceans",isSingleChapterBook:!1,section:"apocrypha"},{RE:new RegExp("^\\s*((Enoch))\\s*$","i"),shortReference:"Enoch",shortestReference:"En",displayReference:"Enoch",isSingleChapterBook:!1,section:"apocrypha"},{RE:new RegExp("^\\s*(M(?:at(?:t(?:h(?:ew)?)?)?|t))\\s*$","i"),shortReference:"Mt",shortestReference:"Mt",displayReference:"Matthew",isSingleChapterBook:!1,section:"new"},{RE:new RegExp("^\\s*(M(?:rk?|(?:ar)?k))\\s*$","i"),shortReference:"Mk",shortestReference:"Mk",displayReference:"Mark",isSingleChapterBook:!1,section:"new"},{RE:new RegExp("^\\s*(L(?:ke?|uke?))\\s*$","i"),shortReference:"Lk",shortestReference:"Lk",displayReference:"Luke",isSingleChapterBook:!1,section:"new"},{RE:new RegExp("^\\s*(J(?:no?|o?hn))\\s*$","i"),shortReference:"Jn",shortestReference:"Jn",displayReference:"John",isSingleChapterBook:!1,section:"new"},{RE:new RegExp("^\\s*(Ac(?:ts)?)\\s*$","i"),shortReference:"Ac",shortestReference:"Ac",displayReference:"Acts",isSingleChapterBook:!1,section:"new"},{RE:new RegExp("^\\s*(R(?:o(?:m(?:ans)?)?|m))\\s*$","i"),shortReference:"Ro",shortestReference:"Ro",displayReference:"Romans",isSingleChapterBook:!1,section:"new"},{RE:new RegExp("^\\s*((?:1(?: ?Co(?:r(?:inthians)?)?|st Co(?:r(?:inthians)?)?)|I ?Co(?:r(?:inthians)?)?|First Co(?:r(?:inthians)?)?))\\s*$","i"),shortReference:"1 Co",shortestReference:"1Co",displayReference:"1 Corinthians",isSingleChapterBook:!1,section:"new"},{RE:new RegExp("^\\s*((?:2(?: ?Co(?:r(?:inthians)?)?|nd Co(?:r(?:inthians)?)?)|II ?Co(?:r(?:inthians)?)?|Second Co(?:r(?:inthians)?)?))\\s*$","i"),shortReference:"2 Co",shortestReference:"2Co",displayReference:"2 Corinthians",isSingleChapterBook:!1,section:"new"},{RE:new RegExp("^\\s*(Ga(?:l(?:atians)?)?)\\s*$","i"),shortReference:"Ga",shortestReference:"Ga",displayReference:"Galatians",isSingleChapterBook:!1,section:"new"},{RE:new RegExp("^\\s*(Ep(?:h(?:es(?:ians)?)?)?)\\s*$","i"),shortReference:"Eph",shortestReference:"Ep",displayReference:"Ephesians",isSingleChapterBook:!1,section:"new"},{RE:new RegExp("^\\s*(P(?:h(?:il(?:ippians)?|p)|p))\\s*$","i"),shortReference:"Php",shortestReference:"Pp",displayReference:"Philippians",isSingleChapterBook:!1,section:"new"},{RE:new RegExp("^\\s*(Co(?:l(?:ossians)?)?)\\s*$","i"),shortReference:"Col",shortestReference:"Co",displayReference:"Colossians",isSingleChapterBook:!1,section:"new"},{RE:new RegExp("^\\s*((?:1(?: ?Th(?:es(?:s(?:alonians)?)?)?|st Th(?:es(?:s(?:alonians)?)?)?)|I ?Th(?:es(?:s(?:alonians)?)?)?|First Th(?:es(?:s(?:alonians)?)?)?))\\s*$","i"),shortReference:"1 Th",shortestReference:"1Th",displayReference:"1 Thessalonians",isSingleChapterBook:!1,section:"new"},{RE:new RegExp("^\\s*((?:2(?: ?Th(?:es(?:s(?:alonians)?)?)?|nd Th(?:es(?:s(?:alonians)?)?)?)|II ?Th(?:es(?:s(?:alonians)?)?)?|Second Th(?:es(?:s(?:alonians)?)?)?))\\s*$","i"),shortReference:"2 Th",shortestReference:"2Th",displayReference:"2 Thessalonians",isSingleChapterBook:!1,section:"new"},{RE:new RegExp("^\\s*((?:1(?: ?Ti(?:m(?:othy)?)?|st Ti(?:m(?:othy)?)?)|I ?Ti(?:m(?:othy)?)?|First Ti(?:m(?:othy)?)?))\\s*$","i"),shortReference:"1 Ti",shortestReference:"1Ti",displayReference:"1 Timothy",isSingleChapterBook:!1,section:"new"},{RE:new RegExp("^\\s*((?:2(?: ?Ti(?:m(?:othy)?)?|nd Ti(?:m(?:othy)?)?)|II ?Ti(?:m(?:othy)?)?|Second Ti(?:m(?:othy)?)?))\\s*$","i"),shortReference:"2 Ti",shortestReference:"2Ti",displayReference:"2 Timothy",isSingleChapterBook:!1,section:"new"},{RE:new RegExp("^\\s*(Ti?t(?:us)?)\\s*$","i"),shortReference:"Tt",shortestReference:"Tt",displayReference:"Titus",isSingleChapterBook:!1,section:"new"},{RE:new RegExp("^\\s*(P(?:h(?:ile(?:m(?:on)?)?|m)|m))\\s*$","i"),shortReference:"Phm",shortestReference:"Pm",displayReference:"Philemon",isSingleChapterBook:!0,section:"new"},{RE:new RegExp("^\\s*(He(?:b(?:rews)?)?)\\s*$","i"),shortReference:"Heb",shortestReference:"He",displayReference:"Hebrews",isSingleChapterBook:!1,section:"new"},{RE:new RegExp("^\\s*(J(?:a(?:me?)?s?|m))\\s*$","i"),shortReference:"Jas",shortestReference:"Jm",displayReference:"James",isSingleChapterBook:!1,section:"new"},{RE:new RegExp("^\\s*((?:1(?: ?P(?:e(?:t(?:er)?)?|t)?|st P(?:e(?:t(?:er)?)?|t)?)|I ?P(?:e(?:t(?:er)?)?|t)?|First P(?:e(?:t(?:er)?)?|t)?))\\s*$","i"),shortReference:"1 Pe",shortestReference:"1P",displayReference:"1 Peter",isSingleChapterBook:!1,section:"new"},{RE:new RegExp("^\\s*((?:2(?: ?P(?:e(?:t(?:er)?)?|t)?|nd P(?:e(?:t(?:er)?)?|t)?)|II ?P(?:e(?:t(?:er)?)?|t)?|Second P(?:e(?:t(?:er)?)?|t)?))\\s*$","i"),shortReference:"2 Pe",shortestReference:"2P",displayReference:"2 Peter",isSingleChapterBook:!1,section:"new"},{RE:new RegExp("^\\s*((?:1(?: ?J(?:o(?:hn?)?|h?n)?|st J(?:o(?:hn?)?|h?n)?)|I ?J(?:o(?:hn?)?|h?n)?|First J(?:o(?:hn?)?|h?n)?))\\s*$","i"),shortReference:"1 Jn",shortestReference:"1J",displayReference:"1 John",isSingleChapterBook:!1,section:"new"},{RE:new RegExp("^\\s*((?:2(?: ?J(?:o(?:hn?)?|h?n)?|nd J(?:o(?:hn?)?|h?n)?)|II ?J(?:o(?:hn?)?|h?n)?|Second J(?:o(?:hn?)?|h?n)?))\\s*$","i"),shortReference:"2 Jn",shortestReference:"2J",displayReference:"2 John",isSingleChapterBook:!0,section:"new"},{RE:new RegExp("^\\s*((?:3(?: ?J(?:o(?:hn?)?|h?n)?|rd J(?:o(?:hn?)?|h?n)?)|III ?J(?:o(?:hn?)?|h?n)?|Third J(?:o(?:hn?)?|h?n)?))\\s*$","i"),shortReference:"3 Jn",shortestReference:"3J",displayReference:"3 John",isSingleChapterBook:!0,section:"new"},{RE:new RegExp("^\\s*(Ju?de?)\\s*$","i"),shortReference:"Jud",shortestReference:"Jd",displayReference:"Jude",isSingleChapterBook:!0,section:"new"},{RE:new RegExp("^\\s*((?:R(?:e(?:v(?:elation)?)?|v)|The Revelation))\\s*$","i"),shortReference:"Re",shortestReference:"Re",displayReference:"Revelation",isSingleChapterBook:!1,section:"new"}],n}(util,Reference),locationMarkerUtility=function(e,t,n,i,r,o,s){"use strict";function a(e,a,l){if(e instanceof t)return e;if(l=o.defaultTo(l,t.types.reference),!e)return null;if(l===t.types.reference){var u=i.tryParse(e);return u||(a?new n(e,a):null)}if(l===t.types.headword&&a)return new r(e,a);throw new TypeError(s.errors.invalidArgumentValue("locationMarkerUtility.tryParse","type","must be a member of LocationMarker.types"))}function l(t,o){if(e.isPlainObject(t)){if(t.isBibleReference)return $.extend(new i,t);if(t.isReference)return $.extend(new n,t);if(t.isHeadword)return $.extend(new r,t)}return null}return{tryParse:a,createFromObj:l}}(_,LocationMarker,Reference,BibleReference,Headword,util,biblia);!function(e,t){var n=null,i=null;e.extend(e.expr[":"],{reference:function(r,o,s,a){var l,u=s[3];i&&n===u?l=i:(n=u,l=i=t.tryParse(u));var c=e(r).data("reference");if(c){var h=t.tryParse(c);return h&&h.equals(l)}return!1}})}(jQuery,BibleReference);var FeatureFlagUtility=function(){"use strict";function e(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""}return{shouldUseFeature:function(t){var n=e("site-features").split("|"),i=!1;return n.forEach(function(e){e===t&&(i=!0)}),i}}}();$.widget("ui.ajaxscroll",{_create:function(){this.jqContainer=this.element,this.jqContainer.children().length||$('<div class="scrolling-content"><div class="content-wrapper"></div></div>').appendTo(this.jqContainer),this.jqScrollPlaceholder=this.jqContainer.find(".scrolling-content").first(),this.jqWrapper=this.jqContainer.find(".content-wrapper").first()},_init:function(){var e=this;this.currentUpRequest=this._abortRequest(this.currentUpRequest),this.currentDownRequest=this._abortRequest(this.currentDownRequest),this.requestList=[],this.abortedList=[],this.loadedUrls={},this.contentChunkSelector="."+this.options.contentChunkClass,this.options.clearInitialContent&&this.jqWrapper.empty();var t,n=this.jqWrapper.find(this.contentChunkSelector).first(),i=function(){"number"==typeof t&&e._requestPage(e.options.fnGetRelativePositionUrl(t),"jump")},r=_.debounce(i,200);this._checkJumpSoon=function(e){t=e,r()};var o=-1;this.fnScroll=_.throttle(function(){if(!e.jqContainer.closest(":not(:visible)").length){var t=e.jqContainer.scrollTop();if(t==o)return!1;o=t,e._checkScroll()}},300),this._checkScrollSoon=_.debounce(this._checkScroll,20),this._checkUnloadSoon=_.throttle(this._checkUnload,1e3),this.jqContainer.scroll(e.fnScroll),this.loadedChunks={},this.nTotalChunks=1,this.bDensityInitialized=!1,this.fAverageDensity=2.5,this.fLastScrollPosition=null,this.fScrollHeight=0,this.ajaxLoadNotifier||(this.ajaxLoadNotifier=new AjaxLoadNotifier($('<div class="ajax-loading ui"><img src="/public/images/ajax-loader.gif" />'+Resources.Common.getString("LoadingEllipsis")+"</div>").appendTo(this.jqContainer))),n.length?this._loadPage(this.options.fnGetPage(n),null):this.options.initialPageUrl&&this._requestPage(this.options.initialPageUrl)},_destroy:function(){this.jqContainer.unbind("scroll",this.fnScroll),this.currentUpRequest=this._abortRequest(this.currentUpRequest),this.currentDownRequest=this._abortRequest(this.currentDownRequest)},_abortRequest:function(e){return e&&e.request&&(e.url&&this._removeRequest(e.url),this.abortedList.push(e.url),e.request.abort()),null},_pushRequest:function(e){this.requestList.push(e)},_removeRequest:function(e){var t=this.requestList.indexOf(e);-1!=t&&this.requestList.splice(t,1)},_getPrevUrl:function(){return this.jqWrapper.children(this.contentChunkSelector).first().data("prev")},_getNextUrl:function(){return this.jqWrapper.children(this.contentChunkSelector).last().data("next")},_getPositionData:function(){var e=this.jqContainer.scrollTop();return{contentHeight:this.jqWrapper.height(),contentPosition:this.jqWrapper.data("top")||0,scrollTop:e,scrollPosition:e/this.fScrollHeight||0,scrollHeight:this.fScrollHeight,viewHeight:this.jqContainer.height()}},_getSpacerElements:function(e,t,n){for(var i=Math.floor(e/t),r=e%t,o=$("<div></div>").addClass(n),s=$([]),a=0,l=i+1;a<l;a++){var u=a==i?r:t,c=o.clone();c.height(u),s=s.add(c[0])}return s},_setScrollHeight:function(e){var t=Math.round(e);this.fScrollHeight=t;var n=this._getSpacerElements(t,this.options.maxElementHeight,"scroll-spacing");this.jqContainer.children(".scroll-spacing").remove(),this.jqContainer.append(n)},_setContentPosition:function(e,t){e<0&&(this.options.debug&&log.error("Content position less than 0"),this.jqContainer.scrollTop(this.jqContainer.scrollTop()-e),e=0),this.jqWrapper.prevAll(".wrapper-spacing").remove(),this._getSpacerElements(e,this.options.maxElementHeight,"wrapper-spacing").insertBefore(this.jqWrapper),t&&this.jqContainer.scrollTop(t),this.jqWrapper.data("top",e)},_doResizePage:function(e,t){var n=(t-e)/this.fAverageDensity,i=this.jqWrapper.children(this.contentChunkSelector).first().data("indexedOffset"),r=Math.round(n*(i-e)/(t-e));this._setScrollHeight(n),this._setContentPosition(r)},_scalePage:function(e,t,n,i,r){var o,s=0,a=this._getPositionData();if(log.group("ajaxscroll scalePage"),log.time("scalePage"),log.debug("initial position: ",a),this.jqWrapper.children(this.contentChunkSelector).each(function(){s+=$(this).data("indexedLength")}),!(n in this.loadedChunks)||r){var l=s/Math.max(1,a.contentHeight),u=r?this.loadedChunks[n]:0;this.options.bGuessDensity||this.bDensityInitialized?this.fAverageDensity=(this.fAverageDensity*this.nTotalChunks+l-(u||0))/(this.nTotalChunks+1):this.fAverageDensity=l-(u||0)||.1,this.nTotalChunks++,this.loadedChunks[n]=l,log.debug("avg density: ",this.fAverageDensity)}this._doResizePage(e,t),o=this._getPositionData(),log.debug("scaled position: ",o),"jump"!=i&&"tryjump"!=i&&this.jqContainer.scrollTop(Math.round(a.scrollPosition*o.scrollHeight)),log.debug("final position: ",this._getPositionData()),log.timeEnd("scalePage"),log.groupEnd()},_loadPage:function(e,t,n){function i(){var e,n,i,o=$(this),s=r._getPositionData();o.css({height:"auto"}),"up"==t&&(e=o.parents(".content-chunk").first(),n=e.height(),o.css("height","0"),i=n-e.height(),o.css("height","auto"),0!==i&&r._setContentPosition(Math.round(s.contentPosition-i)))}this._removeRequest(n),this.bSuppressScrollCheck=!0;var r=this;null===t&&(t="jump");var o="jump"==t||"tryjump"==t,s=$(e?e.content:null);if(!s.length)return log.error("page has no content.",e),!1;s.find(".resourcetext img").height(0).each(function(e,t){$(t).load(i)});var a=this._getPositionData(),l=e.targetSelector?s.find(e.targetSelector):[];return log.time("loadPage"),s.data({prev:e.prevPageUrl,next:e.nextPageUrl,indexedLength:e.chunkLength,indexedOffset:e.chunkOffset,hash:e.hash}),s.isInDocument()||e.hash&&this.loadedUrls[e.hash]?e.targetSelector=e.targetSelector||"."+this.options.contentChunkClass:("up"==t?(s.prependTo(this.jqWrapper),this._setContentPosition(Math.round(a.contentPosition+(a.contentHeight-this.jqWrapper.height())),a.scrollTop)):(o&&this._removeChunks(this.jqWrapper.children(this.contentChunkSelector)),s.appendTo(this.jqWrapper)),e.hash&&(this.loadedUrls[e.hash]=n)),this.options.bVirtualizeScrollPosition&&o&&this._scalePage(e.indexedResourceStart,e.indexedResourceEnd,e.hash,t),o&&this.scrollToElement(e.targetSelector,!0),this._trigger("chunkload",0,[t,l.length?l:void 0,e.targetSelector,e.chunkloadData,s]),this.bSuppressScrollCheck=!1,this._checkScrollSoon(),log.timeEnd("loadPage"),log.groupEnd("ajaxscroll loadPage"),!0},_requestPage:function(e,t,n,i){function r(e){"down"==t?o.currentDownRequest=e:o.currentUpRequest=e}var o=this;if(-1==this.requestList.indexOf(e)){if("down"==t&&this.currentDownRequest||this.currentUpRequest)return!1;"jump"!=t&&"tryjump"!=t||(this.currentDownRequest=this._abortRequest(this.currentDownRequest),this.currentUpRequest=this._abortRequest(this.currentUpRequest)),this._pushRequest(e);return r({request:$.ajax({type:"GET",url:e,success:function(i){var r=$(i);n&&n(r?r.data():null),o._loadPage(o.options.fnGetPage(i),t||null,e)},beforeSend:function(){o.options.bShowLoading&&o.ajaxLoadNotifier.show()},complete:function(){o.options.bShowLoading&&o.ajaxLoadNotifier.hide(),r(null)},error:function(n,r,s){if(0!==n.status){var a=o.abortedList.indexOf(e);-1==a?(o._trigger("error",0,[t].concat(util.argumentsArray(arguments))),i&&i(util.argumentsArray(arguments))):o.abortedList.splice(a,1)}o._removeRequest(e)}}),url:e}),!0}return!1},_removeChunks:function(e){var t=this;$.each(e,function(){var e=$(this);t.options.fnChunkRemove&&$.isFunction(t.options.fnChunkRemove)&&t.options.fnChunkRemove(e),delete t.loadedUrls[e.data("hash")],e.empty().remove()})},_checkScroll:function(){var e=this;if(!this.bSuppressScrollCheck){var t=this._getPositionData();if(t.viewHeight<1)return void log.error("Invalid position data.");var n=this._getPrevUrl(),i=this._getNextUrl(),r=100*t.scrollPosition;if(log.time("ajaxscroll checkScroll"),t.contentPosition<t.scrollTop+t.viewHeight+this.options.edgeTriggerDistance&&t.contentPosition+t.contentHeight>t.scrollTop-this.options.edgeTriggerDistance?(i&&t.contentPosition+t.contentHeight<t.scrollTop+t.viewHeight+this.options.edgeTriggerDistance&&setTimeout(function(){e._requestPage(i,"down")},10),n&&t.contentPosition>t.scrollTop-this.options.edgeTriggerDistance&&setTimeout(function(){e._requestPage(n,"up")},10)):this.options.bVirtualizeScrollPosition&&this._checkJumpSoon(r),this.options.unloadTriggerScreens>0&&(null===this.fLastScrollPosition||Math.abs(this.fLastScrollPosition.scrollTop-t.scrollTop)>200)){var o=null!==this.fLastScrollPosition&&this.fLastScrollPosition.scrollPosition<t.scrollPosition?"down":"up";setTimeout(function(){e._checkUnloadSoon(o)},20),this.fLastScrollPosition=t}setTimeout(function(){e._trigger("scroll",0,[t])},50),log.timeEnd("ajaxscroll checkScroll")}},_checkUnload:function(e){var t=this._getPositionData(),n=t.viewHeight*this.options.unloadTriggerScreens;if(this.jqScrollPlaceholder.isInDocument()){var i,r,o,s,a=this.jqScrollPlaceholder.find("."+this.options.contentChunkClass);if(this.options.unloadTriggerScreens<1)return;if(log.time("ajaxscroll checkUnload: "+e),"down"==e){var l=a.eq(0);o=l.position(),s=l.height(),o&&t.scrollTop-t.contentPosition-s>n&&(this._removeChunks(l),this._setContentPosition(Math.round(t.contentPosition+(t.contentHeight-this.jqWrapper.height()))))}else for(i=a.length-1;i>=0&&(r=a.eq(i),(o=r.position())&&t.contentPosition+o.top-(t.scrollTop+t.viewHeight)>n);i++)this._removeChunks(r)}log.timeEnd("ajaxScroll checkUnload: "+e)},tryJumpTo:function(e,t,n){return"string"==typeof e?this._requestPage(e,"tryjump",function(e){this.currentUpRequest=this._abortRequest(this.currentUpRequest),this.currentDownRequest=this._abortRequest(this.currentDownRequest),this._removeChunks(this.jqWrapper.children(this.contentChunkSelector)),t&&t(e)}.bind(this),n):this._loadPage(e,null)},canScrollToElement:function(e){return 0!==this.jqWrapper.find(e).length},scrollToElement:function(e,t,n){var i=this.jqWrapper.find(e||"").first(),r=0,o=!!i.length;if(i.length&&(r=i.iposition().top),o||t){var s=this.jqWrapper.position().top,a=s+r+this.options.scrollToElementPadding;this.jqContainer.scrollTop(a)}return this._trigger("scrolltoelement",0,[i,o,n]),o},scrollIntoView:function(e){var t=("string"==typeof e?this.jqWrapper.find(e):e).first();if(t.length){if(!this.jqWrapper.contains(t))throw new Error("Element out of scope");nOffset=t.iposition().top;var n=this._getPositionData(),i=-1,r=n.contentPosition+nOffset,o=r+t.height()+16;n.scrollTop>r?i=r:n.scrollTop+n.viewHeight<o&&(i=o-n.viewHeight),i>=0&&this.jqContainer.scrollTop(i)}},adjustForChunkSizeChange:function(e,t){var n,i=this._getPositionData(),r=e.height();t(),0!==(n=e.height()-r)&&this._setContentPosition(Math.round(i.contentPosition-n))},replaceChunk:function(e,t){var n=this.options.fnGetPage(t);e.replaceWith(t),t.data({prev:n.prevPageUrl,next:n.nextPageUrl,indexedLength:n.chunkLength,indexedOffset:n.chunkOffset,hash:n.hash})},options:{fnGetPage:null,fnGetRelativePositionUrl:null,fnChunkRemove:null,edgeTriggerDistance:1200,unloadTriggerScreens:3,bVirtualizeScrollPosition:!1,initialPageUrl:null,contentChunkClass:"content-chunk",containerPadding:24,clearInitialContent:!1,bShowLoading:!1,maxElementHeight:5e5,scrollToElementPadding:0,debug:!1,bGuessDensity:!0}}),function(e){e.fn.extend({visualCue:function(){var t=e("<span>*</span>");return this.each(function(){var n=e(this);t.appendTo(n);var i=n.offset();if(t.remove(),i&&(i.top||i.left)){var r=e("<div />",{class:"visual-cue-container"}).css({height:120,width:120,position:"absolute",top:Math.floor(i.top-60),left:Math.floor(i.left-60),zIndex:biblia.zindexes.popup}).append(e("<div></div>",{class:"visual-cue"})).appendTo(document.body);setTimeout(function(){r.remove(),r=null},1200)}})}})}(jQuery);var TrackedSegment=function(){"use strict";function e(t,n,i){this.start=t,this.end=n,this.time=i,this.getIntersection=function(t){var n=Math.max(t.start,this.start),i=Math.min(t.end,this.end);return n>=i?null:new e(n,i,this.time<t.time?this.time:t.time)}}return e}(),ResourceViewTracker=function(e,t,n,i){"use strict";function r(r,o){function s(i){var o={resourceName:r,segments:e.map(i,function(e){return{startOffset:e.start,endOffset:e.end,timeRead:e.time.toISOString()}})};o.segments.length&&t.ajax({type:"POST",url:n.buildUrl("TrackReadSegment"),data:JSON.stringify(o),contentType:"application/json"})}function a(e,t){var n,i=e.length,r=[];for(n=0;n<i;n++)t-d.minSegmentVisibleMilliseconds>=e[n].time&&c(r,e[n]);return r}function l(e,t){var n,i,r=e.length,o=[];for(n=0;n<r;n++)(i=t.getIntersection(e[n]))&&o.push(i);return u(e,t.time),o}function u(e,t){var n,i=e.length,r=[];for(n=0;n<i;n++)t-e[n].time<d.minSegmentVisibleMilliseconds&&r.push(e[n]);return r}function c(e,t){var n,r=e.pop();r?(n=function(e,t){var n,r,o=t.time-e.time,s=e.start>t.start;return o>d.maxMillisecondsBetweenMergedSegments||o<0?null:(n=s?t:e,r=s?e:t,n.end+d.maxDistanceBetweenMergedSegments<r.start?null:new i(n.start,Math.max(n.end,r.end),e.time))}(r,t),n?e.push(n):(e.push(r),e.push(t))):e.push(t)}function h(e,t){var n,i=e.slice(0),r=t.length;if(e.length)for(n=0;n<r;n++)c(i,t[n]);else i=i.concat(t);return i}var f,d=o||{minSegmentVisibleMilliseconds:1e3,maxDistanceBetweenMergedSegments:10,maxMillisecondsBetweenMergedSegments:6e4},p=[],g=[];this.notifyVisibleSegmentChanged=function(e,t,n){var r,o=new i(e,t,n);if(o.timeViewed>n)throw new Error("Read segments must be tracked sequentially.");g.length&&(r=a(g,o.time),r.length&&(p=h(p,r)),g=l(g,o)),g.push(o)},this.closeResource=function(e){s(a(g,e)),clearInterval(f)},f=setInterval(function(){var e=new Date,t=a(g,e);t.length&&(t=h(p,t),g=u(g,e),s(t),p=[])},15e3)}return r}(_,$,ROUTING,TrackedSegment),ShareButton=function(e,t,n,i,r,o){"use strict";function s(n,r){var s=this;this.options=r||{},this.strUrl="",this.strTitle="",this.jqButton=n,this.sharingLinks=[{displayText:"Faithlife",code:"faithlife",urlChunks:[environmentUtil.adjustUrlForEnvironment("https://faithlife.com/share?url="),""],urlIdx:1},{displayText:"Share",code:"facebook",urlChunks:["https://www.facebook.com/sharer.php?u=","","&t=",""],urlIdx:1,titleIdx:3},{displayText:"Tweet",code:"twitter",fnGetShareUrl:this.reflyize,maxLength:144-"  via @Faithlife".length,urlChunks:["https://twitter.com/share?via=Faithlife&url=&text=","","%20"],urlIdx:3,contentIdx:1},{displayText:o.Common.getString("EmailAction"),code:"email",maxLength:144,urlChunks:["mailto:?Subject=","","&body=","","%0D%0A",""],urlIdx:5,titleIdx:1,contentIdx:3},{displayText:o.FrontEnd.getString("Embed"),code:"embed",urlChunks:[i.buildUrl("Plugins",{Action:"bibleverse"}),"?reference=","","&resourceName=",""],referenceIdx:2,resourceIdx:4}],this.sharingLinks.unshift(),this.jqHoverPanel=e('<div class="share-container-panel dropdown"></div>'),this.jqUrlTitle=e('<div class="share-title"></div>'),this.jqUrlText=e('<input type="text" spellcheck="false" />'),this.jqContentPanel=e('<div class="share-content-panel"></div>'),this.jqHoverPanel.append(this.jqUrlTitle),this.options.isExperiment||this.jqHoverPanel.append(this.jqUrlText),this.jqHoverPanel.append(this.jqContentPanel),this.jqLeftPanel=e('<div class="share-link-container"></div>'),this.jqRightPanel=e('<div class="share-link-container"></div>'),e.each(this.sharingLinks,function(t,n){var i=e('<a class="share-link" target="_blank"></a>').text(n.displayText).addClass("share-button-"+n.code);if(i.prepend(e("<span></span>").addClass("share-icon")),"embed"===n.code)return r&&r.bibleRequest&&s.jqLeftPanel.append(i),!0;t%2==0?s.jqLeftPanel.append(i):s.jqRightPanel.append(i)}),this.jqContentPanel.append(this.jqLeftPanel),this.jqContentPanel.append(this.jqRightPanel),this.jqContentPanel.append(e('<div class="clear"></div>')),this.jqButton.dropdown(t.extend({jqPanel:this.jqHoverPanel,fnOnDisplay:function(){s.onDisplay(s.jqButton,s.curNavRequest,s.resourceInfo,s.bIsBibleReq)},strBtnActiveClass:"active",hideBorder:this.options&&this.options.isExperiment,fullWidth:this.options&&this.options.isExperiment},r||{}))}return s.prototype.reflyize=function(){return this.bIsBibleReq&&this.bIsNormalReference?["http://ref.ly/",this.strUrlRef||this.strRef,";",this.strVersion].join(""):this.strUrl},s.prototype.getShortenedTitle=function(e){if(this.strRef){var t="";this.resourceInfo&&(t=this.resourceInfo.abbreviatedTitle||"");var n=this.strRef,i=n+" ("+t+")";if(i.length<=e)return i;var o=r.tryParse(this.strRef);if(o){n=o.toShortestString();var s=n+" ("+t+")";if(s.length<=e)return s
}if(n.length>0&&n.length<=e)return n}else if(this.resourceInfo)return this.resourceInfo.abbreviatedTitle&&this.resourceInfo.abbreviatedTitle.length<=e?this.resourceInfo.abbreviatedTitle:"";return""},s.prototype.destroy=function(){this.jqButton.remove()},s.prototype.setShareUrl=function(t,i){var r=this,o=t.fnGetShareUrl?t.fnGetShareUrl.call(this):this.strUrl,s=this.strTitle;t.maxLength&&o.length+s.length>t.maxLength&&(s=this.getShortenedTitle.call(this,this.strTitle.length-(o.length-t.maxLength))),t.urlIdx&&(t.urlChunks[t.urlIdx]=encodeURIComponent(environmentUtil.adjustUrlForEnvironment(o))),t.titleIdx&&(t.urlChunks[t.titleIdx]=encodeURIComponent(s)),t.referenceIdx&&(t.urlChunks[t.referenceIdx]=encodeURIComponent(this.strUrlRef)),t.resourceIdx&&(t.urlChunks[t.resourceIdx]=encodeURIComponent(this.strVersion)),t.contentIdx?function(o){r.bIsBibleReq||r.bIsHeadwordReq?(i.removeAttr("href"),e.ajax({url:o,data:{contentType:"json"},success:function(o){try{o=Array.isArray(o)?o:e.parseJSON(o);var s=t.maxLength?t.maxLength-(t.urlIdx?t.urlChunks[t.urlIdx].length:0)-(t.titleIdx?t.urlChunks[t.titleIdx].length:0):1e3;t.urlChunks[t.contentIdx]=encodeURIComponent(e.map(o,function(e){return'"'+n.ellipsisize(e,Math.floor(s/o.length)-2)+'"'}).join("; ")),i.attr("href",t.urlChunks.join(""))}catch(e){t.urlChunks[t.contentIdx]=r.strTitle,i.attr("href",t.urlChunks.join(""))}}})):(t.urlChunks[t.contentIdx]=r.strTitle,i.attr("href",t.urlChunks.join("")))}(this.strUrl):i.attr("href",t.urlChunks.join(""))},s.prototype.onDisplay=function(){var t=this,n=e();e.each(this.sharingLinks,function(e,i){var r=t.jqContentPanel.find(".share-button-"+i.code);n=n.add(r),t.setShareUrl(i,r)});var i=this.options.isExperiment?this.jqButton.text()||this.strTitle:this.strTitle;this.jqUrlTitle.text(i),this.jqUrlText.val(this.strUrl),this.jqUrlText.click(function(){t.jqUrlText.select()}),n.click(function(n){e(this).attr("href")&&(n.stopPropagation(),t.jqButton.dropdown("clickHidePanel",n))})},s.prototype.panelIsVisible=function(){return this.jqHoverPanel.is(":visible")},s.prototype.setShareInfo=function(e,t,i,r){this.strUrl=n.qualifyURL(e.toShareUrl()),this.bIsBibleReq=i,this.bIsHeadwordReq=e.headword,e.reference?(this.strRef=e.reference.render?e.reference.render():e.reference,this.strUrlRef=e.reference.toUrlSafeString?e.reference.toUrlSafeString():e.reference):e.headword&&(this.strRef=e.headword.render?e.headword.render():e.headword,this.strUrlRef=e.headword.toUrlSafeString?e.headword.toUrlSafeString():e.headword),this.strTitle=r||n.getTitlePart(this.strRef,t),this.strVersion=i?e.resourceName:null,this.resourceInfo=t,this.bIsBibleReq=i,this.bIsNormalReference=e.reference&&1===e.reference.toUrlSafeString().split(";").length},s}($,_,util,ROUTING,BibleReference,Resources),resourcePaneGroupRequestTypeRegistry=function(){"use strict";function e(e){n.push(e)}function t(e){return n.some(function(t){return e instanceof t})}var n=[];return{registerRequestType:e,isRegistered:t}}(),fullsSizePaneGroupRequestTypeRegistry=function(){"use strict";function e(e){n.push(e)}function t(e){return n.some(function(t){return e instanceof t})}var n=[];return{registerRequestType:e,isRegistered:t}}(),NavigationRequest=function(e){"use strict";function t(){}return t.prototype.toUrl=function(e){log.error("NavigationRequest.toUrl must be overriden by child class.")},t.prototype.clone=function(){return e.extend(!0,{},this)},t.prototype.addContentType=function(e,t){return e+(-1!=e.indexOf("?")?"&":"?")+"contentType="+t},t.prototype.equals=function(e){log.error("NavigationRequest.equals must be overriden by child class.")},t.prototype.isEqualOrLessSpecificThan=function(e){log.error("NavigationRequest.isEqualOrLessSpecificThan must be overriden by child class.")},t}($),ResourceNavRequest=function(e,t,n,i,r,o,s,a,l,u,c,h){"use strict";function f(t){e.extend(this,f.defaults,t),t&&(t.reference&&this.setReference(t.reference),t.headword&&this.setHeadword(t.headword))}return f.prototype=n.extend(o),f.prototype.setReference=function(e){if(e){if(e instanceof Reference||!t.isPlainObject(e))if("string"==typeof e)this.reference=s.tryParse(e,encodeURIComponent(e),a.types.reference);else{if(!(e instanceof Reference))throw new TypeError(i.errors.invalidArgumentType("ResourceNavRequest.setReference","reference","Reference or string"));this.reference=e}else this.reference=s.createFromObj(e,a.types.reference);this.urlLocationMarker=this.reference.toUrlSafeString()}},f.prototype.setHeadword=function(e){if(e){if(e instanceof l||!t.isPlainObject(e))if("string"==typeof e)this.headword=s.tryParse(e,encodeURIComponent(e),a.types.headword);else{if(!(e instanceof l))throw new TypeError(i.errors.invalidArgumentType("ResourceNavRequest.setHeadword","headword","Headword or string"));this.headword=e}else this.headword=s.createFromObj(e,a.types.headword);this.urlLocationMarker=this.headword.urlHeadword}},f.prototype.isBibleRequest=function(){return this.type==r.bible||!this.type&&this.reference instanceof u},f.prototype.isResourceOnlyRequest=function(){return this.resourceName&&!(this.articleId||this.reference||this.headword||this.articleId||this.relativePosition||this.indexedOffset||this.associated||this.urlLocationMarker)},f.prototype.toShareUrl=function(e,t,n,i){return this.toUrl(e,t,n,i,!0,!1)},f.prototype.toUrl=function(t,i,o,s,a,l){var h,f={},d=null;return this.defaultAll?d="/?contentType=html":this.url?d=this.url:this.associated?(h="Associated",this.reference&&e.extend(f,{reference:n.referenceToUrl(this.reference)}),this.pane&&e.extend(f,{pane:n.referenceToUrl(this.pane)})):this.reference?(h=(a||this.forceShareUrl)&&("bible"==this.type||this.type==r.bible||!this.type&&this.reference instanceof u)?this.resourceName?"BibleReference":"ReferenceDefaultBible":this.resourceName?"ResourceReference":"Reference",e.extend(f,{reference:this.reference.toUrlSafeString()})):this.headword?(h=(this.resourceName?"Resource":"")+"Headword",e.extend(f,{headword:this.headword.toUrlSafeString(),language:this.language||null,resourceFallback:this.resourceFallback})):this.articleId?(h="Article",e.extend(f,{articleId:this.articleId})):this.type==r.media?(h="MediaThumbnails",this.indexedOffset&&e.extend(f,{offset:this.indexedOffset})):this.urlLocationMarker?(h="Resolve",e.extend(f,{input:this.urlLocationMarker})):this.indexedOffset?(h="Offset",e.extend(f,{offset:this.indexedOffset}),this.indexedLength&&e.extend(f,{length:this.indexedLength})):this.relativePosition?(h="Position",e.extend(f,{position:this.relativePosition})):this.resourceName&&(h="ResourceDefault"),t&&(this.url?d=this.addContentType(d,t):e.extend(f,{contentType:t})),i&&(f.preview=!0),(o||this.positionFallback)&&(f.positionFallback=!0),(l||this.preventDefaultFallback)&&(f.preventDefaultFallback=!0),(s||this.resourceFallback)&&(f.resourceFallback=!0),this.resourceName&&(f.resourceName=this.resourceName),d||(h?c.buildUrl(h,f):c.buildUrl(f))},f.prototype.equals=function(e){return(this.resourceName?this.resourceName.toLowerCase():null)===(e.resourceName?e.resourceName.toLowerCase():null)&&(this.reference&&e.reference?this.reference.equals(e.reference):this.headword&&e.headword?this.headword.equals(e.headword):this.indexedOffset&&e.indexedOffset?this.indexedOffset===e.indexedOffset:this.relativePosition&&e.relativePosition?this.relativePosition===e.relativePosition:this.urlLocationMarker&&e.urlLocationMarker?this.urlLocationMarker===e.urlLocationMarker:this.articleId===e.articleId)},f.prototype.isEqualOrLessSpecificThan=function(e){return(this.resourceName?this.resourceName.toLowerCase():null)===(e.resourceName?e.resourceName.toLowerCase():null)&&(this.reference&&e.reference?this.reference.isEqualOrLessSpecificThan(e.reference):this.headword&&e.headword?this.headword.isEqualOrLessSpecificThan(e.headword):this.indexedOffset&&e.indexedOffset?this.indexedOffset===e.indexedOffset:this.relativePosition&&e.relativePosition?this.relativePosition===e.relativePosition:this.urlLocationMarker&&e.urlLocationMarker?this.urlLocationMarker===e.urlLocationMarker:this.articleId===e.articleId)},f.prototype.clone=function(){return new f(this)},f.prototype.removeDefaults=function(){for(var e in f.defaults)this[e]===f.defaults[e]&&delete this[e]},f.getPropertiesFromMetadata=function(e){var t={},n=!1;for(var i in f.defaults){var r=i.toLowerCase(),o=null;e.hasOwnProperty(r)?o=r:e.hasOwnProperty(i)&&(o=i),null!==o&&(t[i]=e[o],n=!0)}return n?t:null},f.getForMetadata=function(e){var t=f.getPropertiesFromMetadata(e);return t?(e.datatype&&"bible"==e.datatype&&(t.type=r.bible),t.reference&&(t.reference=s.tryParse(t.reference,t.reference)),new f(t)):null},f.defaults={pane:null,resourceName:null,datatype:null,type:null,reference:null,headword:null,language:null,articleId:null,relativePosition:null,indexedLength:null,indexedOffset:null,isPreloading:!1,originatingResourceName:null,associated:!1,resourceFallback:null,bPreventPropagation:!1,urlLocationMarker:null},h.registerRequestType(f),f}($,_,util,biblia,RESOURCE_TYPES,NavigationRequest,locationMarkerUtility,LocationMarker,Headword,BibleReference,ROUTING,resourcePaneGroupRequestTypeRegistry),LibraryNavRequest=function(e,t,n,i,r){"use strict";function o(t){e.extend(this,o.defaults,t)}return o.defaults=e.extend({query:"",start:0,offset:0},r.defaults),o.prototype=t.extend(i),o.prototype.toUrl=function(e){return n.buildUrl("Library",{q:this.query,start:this.start,offset:this.offset,orderBy:this.orderBy,sortDirection:this.sortDirection,contentType:e})},o}($,util,ROUTING,NavigationRequest,ResourceNavRequest),ArticlePopupNavigationRequest=function(e,t,n,i,r){"use strict";function o(){}return o.prototype=t.extend(r),o.prototype.toShareUrl=function(){return this.type==n.biblicalPlacesMaps?i.buildUrl("MediaDisplayBiblicalPlaceMap",{mapName:this.articleId}):this.articleId?i.buildUrl("Article",{resourceName:this.resourceName,articleId:this.articleId}):i.buildUrl(this.type==n.media?"MediaDisplayOffset":"Offset",{resourceName:this.resourceName,offset:this.indexedOffset})},o.prototype.toUrl=function(){return t.addUrlParameter(this.toShareUrl(),"contentType","xhtml")},o.createFromArticle=function(t,n,i){var r=new o;return e.extend(r,{articleId:t,resourceName:n,type:i,fontSize:1}),r},o.createFromOffset=function(t,n,i){var r=new o;return e.extend(r,{indexedOffset:t,resourceName:n,type:i,fontSize:1}),r},o}($,util,RESOURCE_TYPES,ROUTING,NavigationRequest),ReadingPlanNavRequest=function(e,t,n,i){"use strict";function r(t){e.extend(this,r.defaults,t)}return r.actions={create:0,view:1,edit:2,remove:3},r.defaults={readingPlanId:"",action:r.actions.view,locationRequest:null},r.prototype=t.extend(NavigationRequest),r.prototype.toUrl=function(e){return this.action==r.actions.view?n.buildUrl("ReadingPlanSummary",{readingPlanId:this.readingPlanId,contentType:e}):null},i.registerRequestType(r),r}($,util,ROUTING,resourcePaneGroupRequestTypeRegistry),SearchNavigationRequest=function(e,t,n,i,r){"use strict";function o(t){e.extend(this,o.defaults,t)}return o.prototype=t.extend(i),o.prototype.toUrl=function(e){var t=this.resources?"Search":"SearchDefault";return n.buildUrl(t,{resources:this.resources,query:this.query,passages:this.passages,start:this.start,limit:this.limit})},o.defaults={resources:null,query:null,passages:null,start:null,limit:null,preferredSide:PANES.right},r.registerRequestType(o),o}($,util,ROUTING,NavigationRequest,resourcePaneGroupRequestTypeRegistry),ContentPageNavRequest=function(e,t,n,i){"use strict";function r(e){n.extend(this,r.defaults,e)}return r.defaults={url:""},r.prototype=t.extend(e),r.prototype.toUrl=function(e){return e?this.addContentType(this.url,e):this.url},i.registerRequestType(r),r}(NavigationRequest,util,$,fullsSizePaneGroupRequestTypeRegistry),UnauthenticatedSecondaryContentNavRequest=function(e,t,n,i){"use strict";function r(){this.url=n.buildUrl("SignInOrRegister")}return r.prototype=e.extend(t),r.prototype.toUrl=function(e){return this.addContentType(this.url,e)},i.registerRequestType(r),r}(util,NavigationRequest,ROUTING,resourcePaneGroupRequestTypeRegistry),ui=function(e,t,n,i){"use strict";function r(){i.call(this),this.init=function(){t.signin.init(),this.commonInit()}}return r.prototype=n.extend(i),r.prototype.update=function(e){},new r}($,biblia,util,UIBase),PanelBase=function(e,t,n){"use strict";function i(n,i,r,o){var s=this;if(!n)throw new Error("Invalid container element.");o=o||{},this.jqContainer="string"==typeof n?e(n):n,this.strPanelId=i,this.bIsMuted=!!r,this.paneState=t.paneStates.normal,this.eventQueue=[],this.getIsMuted=o.getIsMuted||function(){return!1},this.strTooltipSelector=".resourcetext a:not([data-external-link])",this.jqToolbar=this.jqContainer.find(".toolbar").first(),this.fnClick=function(t){var n=e(t.target).closest("a");if(n.length)return s.onLinkClick.call(s,n,t)},this.jqContainer.delegate(".resource-content, #library-content","click",this.fnClick)}return i.prototype.canNavigateTo=function(e,t,n){n()},i.prototype.navigateTo=function(e){return!1},i.prototype.onLinkClick=function(e,t){if(e.is('[rel="popup"]'))return!0;t.stopPropagation(),clearTimeout(e.data("tooltip.timer"));var i=e.data(),r=n.getForMetadata(i);return!r||(r.bIsUserInitiated=!0,this.navigateTo(r),!1)},i.prototype.reattachElements=e.noop,i.prototype.detachElements=e.noop,i.prototype.setPaneState=function(e){this.paneState=e},i.prototype.trigger=function(e){var t=util.argumentsArray(arguments).slice(1),n=this;this.getIsMuted&&!this.getIsMuted()&&setTimeout(function(){n.jqContainer.trigger(e,t)},0)},i.prototype.unload=function(){this.jqContainer.unbind()},i.prototype.getCurrentPosition=function(){return null},i}($,biblia,ResourceNavRequest),EntityPanel=function(e,t,n){"use strict";function i(e,t,i,r,o){n.call(this,e,t,i,o);var s=this,a=o&&o.getFontSize?o.getFontSize():null;o=o||{},this.jqToolbar=this.jqContainer.find(".toolbar"),this.jqPanelMenu=r.clone().attr("id",""),this.jqMenuBtn=this.jqToolbar.find(".toolbar-menu-button").first(),this.setMenuButton(this.jqMenuBtn),this.getFontSize=o.getFontSize,this.fontSizeSlider=new FontSlider(this.jqPanelMenu.find(".font-resize"),o.numFontNotches,o.defaultFontNotch,a,function(e){o.setFontSize(e),s.onFontSizeChange(e)})}return i.prototype=t.extend(n),i.prototype.setMenuButton=function(e){this.jqMenuBtn=e,this.jqMenuBtn.dropdown({jqPanel:this.jqPanelMenu,fnOnDisplay:this.onMenuDisplay.bind(this),strBtnActiveClass:"active"})},i.prototype.onMenuDisplay=function(){var e=this;this.fontSizeSlider.setLocation(this.getFontSize()),this.jqPanelMenu.find(".menu-option:not(.disabled)").click(function(t){e.jqMenuBtn.dropdown("clickHidePanel",t)})},i.prototype.getTitleUrl=function(){return null},i.prototype.onFontSizeChange=function(){},i}($,util,PanelBase),ResourcePanel=function(e,t,n,i,r,o,s,a,l,u){"use strict";function c(n,i,r,o,s,l){function c(e){h.trigger(t.events.resizePane,t.paneStates.normal,h)}a.call(this,n,i,r,s,l);var h=this;l=l||{},this.resourceInfoFaceClass="show-resource-info",this.tocFaceClass="toc",this.resourceInfo=null,this.bMinimalLayout="minimal"===this.jqContainer.data("layout"),this.bEmbeddedPreview=this.jqContainer.data("embeddedpreview"),this.backFaceClass="",this.isFlipped=!1,this.jqResourceContent=o,this.jqCard=this.jqResourceContent.closest(".card"),this.jqBack=this.jqCard.children(".back").first(),this.getAdjustedUrl=l.getAdjustedUrl,this.getLinkState=l.getLinkState||function(){return null},this.setLinked=l.setLinked||e.noop,this.strTooltipCollision=l.bIsEmbedded?"flip flip":"fit fit",this.jqToolbar.find(".toolbar-cover-section img").preload({placeholder:"/public/images/DefaultBookCover_small.png",notFound:"/public/images/DefaultBookCover_small.png"}),this.jqContainer.find(".table-of-contents").on("click","a",function(t){var n=e(this);if(!n.parent()||void 0===n.parent().data("offset"))throw new Error("ToC entry does not have valid parent element with offset data");var i=new u({resourceName:h.resourceInfo.resourceName,indexedOffset:n.parent().data("offset")});h.navigateTo(i),t.preventDefault()}),this.jqPanelMenu.add(this.jqToolbar).on("click",".toc-show",function(e){var t=h.jqCard.find(".back .table-of-contents");t.children(".tree-area").is(".simple-tree")||h.initToC(t),h.toggleBackFace(h.tocFaceClass)}),this.jqToolbar.find(".resource-info-show").first().click(function(e){h.toggleBackFace(h.resourceInfoFaceClass)}),this.jqPanelMenu.find(".view-resource-info").click(function(e){h.toggleBackFace(h.resourceInfoFaceClass)}),this.jqPanelMenu.find(".community-notes-show").click(function(){h.jqResourceContent.toggleClass("hide-community-notes")}),e(document).bind(t.events.insertCommunityNote,this.onCommunityNoteInsertion.bind(this)),e(document).bind(t.events.deleteCommunityNote,this.onCommunityNoteDeletion.bind(this)),this.jqPanelMenu.find(".link-panels").first().click(function(t){var n=e(this),i=h.getLinkState();i.panesAreLinkable&&(n.toggleClass("selected",!i.panesAreLinked),h.setLinked(!i.panesAreLinked))}),this.jqToolbar.find(".restore-button").add(this.jqPanelMenu.find(".restore-pane:first")).click(function(){e(this).hasClass("selected")||c()}),this.jqPanelMenu.find(".expand-pane:first, .fullscreen-pane:first").click(function(n){var i=e(this),r=i.hasClass("expand-pane")?t.paneStates.expanded:t.paneStates.fullscreen;i.hasClass("selected")||h.trigger(t.events.resizePane,r,h),h.unflip()}),this.jqToolbar.find(".x-flip, .close").click(function(){return h.unflip(),!1}),this.secondsBeforeSync=10,this.syncTimer=null,user.isAuthenticated?this.syncPosition=_.debounce(function(e,n,i){h.trigger(t.events.syncPosition,e,n,i)},1e3*this.secondsBeforeSync):this.syncPosition=_.noop}return c.prototype=i.extend(a),c.prototype.init=function(){this.initResourceTitle(),this.initTooltip(),this.parallelResourceInfo=null},c.prototype.setParallelResourceContext=function(e,t,n,i){if(void 0!==ResourceProvider){var r=this;if(r.currentParallelPassageContext={resourceType:e,references:t&&[t],headword:n,headwordLanguage:i},r.parallelResourceInfo)r.parallelResourceInfo.resourceProvider.updateContext(r.currentParallelPassageContext);else{var o=r.jqContainer.find(".parallel-passage-button").first();if(o&&o.dropdownresourceselector){var s=new ResourceProvider({resourceContext:r.currentParallelPassageContext});o.dropdownresourceselector({resourceProvider:s,resourceSelected:function(e){r.currentParallelPassageContext&&r.navigateTo(new u({openInSameSide:!0,panelToRemoveOnSuccess:r.strPanelId,resourceName:e.resourceName,reference:r.currentParallelPassageContext.references?r.currentParallelPassageContext.references[0]:null,headword:r.currentParallelPassageContext.headword,language:i}),null,null,null)},customResourceButton:o}),r.parallelResourceInfo={parallelPassageButton:o,resourceProvider:s}}}}},c.prototype.initResourceTitle=function(){var e=this.jqToolbar.find(".resource-title").first(),t=this.jqToolbar.width();e.width()>(this.bMinimalLayout?t/4:t/2-this.jqMenuBtn.width())&&e.html(i.ellipsisize(this.resourceInfo.abbreviatedTitle,15)+'&nbsp;<div class="arrow"></div>')},c.prototype.initTooltip=function(){var i=this;this.jqResourceContent.setupResourceContentToggles(),this.jqResourceContent.communityNotes(),this.jqResourceContent.tooltip({selector:this.strTooltipSelector,fnClickStick:function(e){return e.closest("a").is('[rel="popup"]')},onLinkClick:this.fnClick,fnGetContent:function(o,a){var l=o.data();if(l.resourcetype==r.biblicalPlacesMaps||l.resourceType==r.media)a(t.resourcestrings.noTooltip);else if(o.is('[rel="popup"][data-content]')){var c=e(l.content);a(e.trim(c.text())?c:t.resourcestrings.tooltipError)}else{var h=u.getForMetadata(l);h?!h.resourceName&&h.reference instanceof s?i.trigger(t.events.informationRequest,[h,function(e){n.fetchTooltipContent(e,i.getCurrentResourceName(),a,i.adjustRequestUrl.bind(i))}]):n.fetchTooltipContent(h,i.getCurrentResourceName(),a,i.adjustRequestUrl.bind(i)):a(t.resourcestrings.tooltipError)}},collision:this.strTooltipCollision})},c.prototype.cancelTooltips=function(){this.jqResourceContent.tooltip(null,"cancel")},c.prototype.unflip=function(){this.isFlipped=!1,this.jqBack.removeClass(this.backFaceClass),this.jqToolbar.removeClass("flipped"),this.jqCard.removeClass("flipped")},c.prototype.toggleBackFace=function(e){function t(){n.jqBack.removeClass(n.backFaceClass),n.backFaceClass=e,n.jqBack.addClass(n.backFaceClass)}var n=this;this.isFlipped?this.jqBack.hasClass(e)?this.unflip():t():(this.isFlipped=!0,this.jqToolbar.addClass("flipped"),this.jqCard.addClass("flipped"),t())},c.prototype.onMenuDisplay=function(){var e=this.getLinkState();this.jqPanelMenu.find(".toc-show").toggleClass("selected",this.jqCard.hasClass("flipped")&&this.jqBack.hasClass(this.tocFaceClass)),this.jqPanelMenu.find(".view-resource-info").toggleClass("selected",this.jqCard.hasClass("flipped")&&this.jqBack.hasClass(this.resourceInfoFaceClass)),this.jqPanelMenu.find(".link-panels").toggleClass("disabled",!(e&&e.panesAreLinkable)).toggleClass("selected",!(!e||!e.panesAreLinked)),this.jqPanelMenu.find(".restore-pane").toggleClass("selected",this.paneState===t.paneStates.normal),this.jqPanelMenu.find(".expand-pane").toggleClass("selected",this.paneState===t.paneStates.expanded),this.jqPanelMenu.find(".fullscreen-pane").toggleClass("selected",this.paneState===t.paneStates.fullscreen),this.jqPanelMenu.find(".community-notes-show").toggleClass("selected",!this.jqResourceContent.hasClass("hide-community-notes")),a.prototype.onMenuDisplay.call(this)},c.prototype.setFontSizerLocation=function(e){this.fontSizeSlider.setLocation(e)},c.prototype.onLinkClick=function(e,t){return l.prototype.onLinkClick.apply(this,i.argumentsArray(arguments))},c.prototype.onCommunityNoteInsertion=function(e,t){},c.prototype.onCommunityNoteDeletion=function(e,t){},c.prototype.getCurrentResourceName=function(){return this.resourceInfo?this.resourceInfo.resourceName||null:null},c.prototype.getCurrentPosition=function(){throw new Error("getCurrentPosition must be implemented by the concrete class.")},c.prototype.initToC=function(t){var n=this;t.children(".tree-area").simpleTree({ajax:{url:o.buildUrl("TableOfContents",{resourceName:n.resourceInfo.resourceName}),error:function(){log.error("jsTree request fail",arguments)}},getUrlSuffix:function(e){return e&&-1!==e?e.data("path")||"":""},getParameters:function(e){return e&&-1!=e?{groupOffset:e.data("group-offset"),groupSize:e.data("group-size")}:null},transformResult:function(t){function i(t){if(!t)return null;var r={title:t.title,anchorAttr:{href:o.buildUrl("Offset",{resourceName:n.resourceInfo.resourceName,offset:t.indexedOffset})},itemMetadata:{path:t.path.toString(),"group-offset":t.groupOffset,"group-size":t.groupSize,offset:t.indexedOffset},hasChildren:t.hasChildren,isExpanded:!1};return t.children&&(r.children=e.map(t.children,i)),r}return e.map(t,i)}})},c.prototype.unload=function(){this.jqResourceContent.tooltip({selector:this.strTooltipSelector},"destroy"),l.prototype.unload.call(this)},c.prototype.adjustRequestUrl=function(e){return this.getAdjustedUrl&&(e=this.getAdjustedUrl(e)),this.bEmbeddedPreview?i.addUrlParameter(e,"embeddedPreview",!0):e},c.prototype.getTitleUrl=function(){var e=this.getCurrentPosition(),t=e&&e.reference;return{title:i.getTitlePart(t&&t.render?t.render():t,this.resourceInfo),url:this.getCurrentPosition().toUrl()}},c}($,biblia,contentTooltipUtility,util,RESOURCE_TYPES,ROUTING,BibleReference,EntityPanel,PanelBase,ResourceNavRequest),PagedResourcePanel=function(e,t,n,i,r,o,s,a,l,u,c,h,f,d,p){"use strict";function g(n,i,r,o,s,a){function l(){u.bIgnoreLinking=!1}p.call(this,n,i,r,o,e("#resource-panel-menu"),a);var u=this;if(this.jqContentWrapper=s,this.bLock=null,this.resetLinkStatusTimer=null,this.bIgnoreLinking=!1,this.curArticleId=null,this.curIndexedOffset=null,this.jqReferenceInput=this.jqContainer.find(".toolbar input[name='input']").first().focus(function(t){e(this).data("hasFocus",!0)}).blur(function(t){e(this).data("hasFocus",!1)}),this.strLastLocInput="",this.jqResourceContent){var c=this.jqResourceContent.find(".content-chunk").first();if(c.length){var h=c.data().resource;this.resourceInfo=h,user.isAuthenticated&&(this.resourceViewTracker=new ResourceViewTracker(this.resourceInfo.resourceName))}}this.updateMilestoneSoon=t.throttle(function(e){u.updateMilestoneNow(null,e)},350),this.resetLinkStatusSoon=function(){clearTimeout(this.resetLinkStatusTimer),this.resetLinkStatusTimer=setTimeout(l,2e3)}}return g.prototype=r.extend(p),g.prototype.init=function(){var e=this;this.jqResourceContent.ajaxscroll({fnGetPage:this.ajaxScrollGetPage.bind(this),fnGetRelativePositionUrl:this.getRelativePositionUrl.bind(this),fnChunkRemove:function(t){t.tooltip({selector:e.strTooltipSelector},"destroy")},chunkload:this.onChunkLoad.bind(this),scroll:this.onScroll.bind(this),scrolltoelement:this.onScrollToElement.bind(this),error:this.onError.bind(this),edgeTriggerDistance:1600,unloadTriggerScreens:3,bVirtualizeScrollPosition:!0,scrollToElementPadding:-20}),p.prototype.init.call(this)},g.prototype.triggerLocationMarkerChange=function(e,t){var i,o,s;if(!e)return null;if(!(e instanceof u))throw new Error('Parameter "loc" passed to triggerLocationMarkerChange must be of type LocationMarker');e.equals(this.locationCurrent)||this.trigger(n.events.locationMarkerChange,{newLocation:e,oldLocation:this.locationCurrent,resourceInfo:this.resourceInfo,bIsLinkChange:t,bOriginIsBible:this instanceof BiblePanel,panelId:this.strPanelId,isPanelMuted:this.getIsMuted()}),e instanceof h&&(i=this.jqResourceContent.find('a[rel="milestone"]:reference('+r.sanitizeIdForSelector(e.render())+")").first(),o=i.next(".community-note"),0!==o.length&&(s=o.data(),this.trigger(n.events.communityNoteSelected,{reference:s.reference,renderedReference:s.renderedReference,resource:s.resource,resourceVersion:s.resourceVersion,bForceFocus:!1})))},g.prototype.setLocationMarker=function(e,t){var n=e?e.render():"";t&&this.jqReferenceInput.data("hasFocus")||this.jqReferenceInput.val(n),this.strLastLocInput=n,this.locationCurrent=e,e?this.syncPosition(e instanceof c?"SyncWriteReference":"SyncWriteHeadword",this.resourceInfo.resourceName,e.toUrlSafeString()):this.syncPosition("SyncWriteOffset",this.resourceInfo.resourceName,this.curIndexedOffset)},g.prototype.getCurrentResourceName=function(){return this.resourceInfo?this.resourceInfo.resourceName||null:null},g.prototype.updateMilestoneCore=function(e){e&&this.trigger(n.events.userScroll)},g.prototype.updateMilestoneNow=function(e,t){function n(e,t){return r.findElementAtTopOfScollingContainer(i.jqResourceContent,o,s,e,t)}var i=this,o=this.jqResourceContent.scrollTop(),s=this.jqContentWrapper.data("top")||0,a=null;this.updateMilestoneCore&&!this.bLock&&(a="milestone"==e||"ms"==e?n("a[rel='milestone']"):"headword"==e||"hw"==e?n("span[rel='headword']"):"abs"==e?n("a[rel='milestone'],span[rel='headword']"):i instanceof BiblePanel?n("a[rel='milestone']",!0)||n("span[rel='headword']",!0):n("span[rel='headword']",!0)||n("a[rel='milestone']",!0),function(){var e=o+i.jqResourceContent.height(),t=a?a.closest(".content-chunk"):null;if(null===t&&(t=r.findTopInFrame(i.jqResourceContent,o,e,s,".content-chunk")),t){var n=t.data();n&&n.article?(i.curArticleId=n.article.articleId||null,i.curIndexedOffset=n.article.offset||null):(i.curArticleId=null,i.curIndexedOffset=null)}}(),this.updateMilestoneCore(a,t))},g.prototype.ajaxScrollGetPage=function(){return this.ajaxScrollGetPageCore.apply(this,r.argumentsArray(arguments))},g.prototype.ajaxScrollGetPageCore=function(t){var n=e(t);if(!n.length)return null;var i=n.data();if(!i)return null;user.isAuthenticated&&ReadingPlanManager.processContentChunk(n);var r=i.article,o=i.resource;return r&&o?(r.requestedReference&&!this.bLock&&this.setRequestedReference(r.requestedReference,r.requestedReferenceUrl),this.filterPageData({content:n,prevPageUrl:r.prevArticleId?this.getChunkUrl(o.resourceName,r.prevArticleId):null,nextPageUrl:r.nextArticleId?this.getChunkUrl(o.resourceName,r.nextArticleId):null,indexedResourceStart:r.resourceStart,indexedResourceEnd:r.resourceStart+r.resourceLength,chunkOffset:r.offset,chunkLength:r.length,hash:r.articleId,targetSelector:r.targetId?"#"+r.targetId:null,metadata:r},r.requestedReference)):null},g.prototype.getChunkUrl=function(e,t){return this.adjustRequestUrl(s.buildUrl("Article",{resourceName:e,articleId:t,contentType:"xhtml"}))},g.prototype.filterPageData=function(e){return e},g.prototype.setRequestedReference=function(e,t,n){if(e){if("string"!=typeof e)throw new Error("Parameter strLocRequested passed to PagedResourcePanel.setRequestedReference must be of type string");var i=l.tryParse(e,t);i&&(n&&n(i),this.lockReference(),this.setLocationMarker(i))}},g.prototype.detachElements=function(){this.detachedElements||(this.detachedElements=this.jqContentWrapper.children().detach())},g.prototype.reattachElements=function(){this.detachedElements&&this.detachedElements.length&&(this.jqContentWrapper.append(this.detachedElements),this.detachedElements=null)},g.prototype.getOffsetNavRequest=function(){return this.curIndexedOffset?new d({resourceName:this.resourceInfo.resourceName,indexedOffset:this.curIndexedOffset}):null},g.prototype.getRelativePositionUrl=function(e){return this.adjustRequestUrl(s.buildUrl("Position",{resourceName:this.getCurrentResourceName(),position:e,contentType:"xhtml"}))},g.prototype.onChunkLoad=function(e,t,n,i,r){function o(){r.setupResourceContentToggles(!0)}"jump"!=t&&this.extendLock(),r&&r.length&&(r.setupInputRuns(this.getCurrentResourceName()),"up"==t?this.jqResourceContent.ajaxscroll("adjustForChunkSizeChange",r,o):o())},g.prototype.updateDynamicText=function(){var n=this,i={},r=this.getCurrentPosition();this.resourceInfo&&(t.each(this.jqResourceContent.find(".content-chunk"),function(t){var n=e(t),r=n.data();r&&r.article&&r.article.articleId&&(i[r.article.articleId]=n)}),e.when.apply(e,t.map(t.keys(i),function(t){return e.ajax(n.getChunkUrl(n.resourceInfo.resourceName,t)).success(function(r){var o=e(r),s=i[t];o.length&&(s.tooltip({selector:n.strTooltipSelector},"destroy"),o.setupResourceContentToggles(!0),n.jqResourceContent.ajaxscroll("replaceChunk",s,o))})})).then(function(){n.navigateTo(r)}))},g.prototype.onScroll=function(){var e,t,n,i,o=this;o.bIgnoreLinking&&o.resetLinkStatusSoon(),o.onScrollCore&&o.onScrollCore.apply(o,r.argumentsArray(arguments)),o.resourceViewTracker&&(e=r.findElementAtTopOfScollingContainer(o.jqResourceContent,o.jqResourceContent.scrollTop(),o.jqContentWrapper[0].offsetTop,".offset-marker"),t=r.findElementAtBottomOfScrollingContainer(o.jqResourceContent,o.jqResourceContent.scrollTop(),o.jqContentWrapper[0].offsetTop,".offset-marker"),e&&t&&(n=e.data().offset,i=t.data().offset,n==i&&(n=Math.max(0,n-100),i+=100),o.resourceViewTracker.notifyVisibleSegmentChanged(n,i,new Date))),this.updateMilestoneSoon()},g.prototype.onScrollToElement=t.debounce(function(e,t,n,i){if(this.bIgnoreLinking)return void this.resetLinkStatusSoon();t&&t.is('.requested-position,[rel="milestone"],[rel="headword"]')&&n&&(this.getIsMuted()||i instanceof d&&i.bIsUserInitiated||t.visualCue())},400),g.prototype.onFontSizeChange=function(){this.navigateTo(this.getCurrentPosition())},g.prototype.lockReference=function(){var e=this;this.bLock=setTimeout(function(){e.unlockReference()},3e3)},g.prototype.extendLock=function(){this.bLock&&(this.unlockReference(),this.lockReference())},g.prototype.unlockReference=function(){this.bLock&&(clearTimeout(this.bLock),this.bLock=null)},g.prototype.onError=function(t,i){"tryjump"!==i&&this.trigger(n.events.info,{nLevel:e.fn.infobar.levels.error,strMsg:n.resourcestrings.resourceScrollError})},g.prototype.getCurrentPosition=function(){throw new Error("getCurrentPosition must be implemented by the concrete class.")},g.prototype.onLinkClick=function(e,t){var i=this,s=e.data();return SidebarArticlePopup.isSidebarArticleLink(e)?(i.trigger(n.events.navigationRequest,a.createFromArticle(s.articleid,s.resourcename)),
!1):s.resourcetype===o.media||s.resourcetype==o.biblicalPlacesMaps?(i.trigger(n.events.navigationRequest,a.createFromArticle(s.articleid,s.resourcename,s.resourcetype)),!1):f.prototype.onLinkClick.apply(this,r.argumentsArray(arguments))},g.prototype.canNavigateTo=function(t,n,i,r,s){if(!(t instanceof d))return void i();if(t=e.extend({},t),t.resourceName===this.getCurrentResourceName()&&t.isResourceOnlyRequest())return void n();if(t.resourceName!==this.getCurrentResourceName()&&(t.resourceName||t.isBibleRequest()&&this.resourceInfo.type!==o.bible))return void i();t.urlLocationMarker&&(t.resourceName=this.getCurrentResourceName());var a=t.reference;if(a instanceof h&&this.resourceInfo.type==o.bible&&this.jqResourceContent.ajaxscroll("canScrollToElement",this.getSelectorForReference(a)))return void n();var l=this.adjustRequestUrl(t.toUrl("xhtml",!1,s,r,!1,!0));e.ajax({type:"GET",url:l,success:function(o){var s=null,a=e(o);o&&a.length&&(s=a.data()),r&&t.urlLocationMarker||s&&s.resource&&s.resource.resourceName==t.resourceName?n():i()},error:function(e){i(e)}})},g.prototype.navigateTo=function(r,s,a,c){function f(){v.trigger(n.events.userJump,r)}function p(){r.bIsUserInitiated&&f(),c&&c()}var g,m,v=this,b=!0;if(!r.bIgnoreLinking&&r.resourceName!==this.getCurrentResourceName()){if(r.resourceName||r.isBibleRequest()&&this.resourceInfo.type!==o.bible)return void this.trigger(n.events.navigationRequest,r);b=!1}if(r.resourceName!==this.getCurrentResourceName()||!r.isResourceOnlyRequest())return r.resourceName||(r=r.clone(),r.resourceName=this.getCurrentResourceName()),g=this.adjustRequestUrl(r.toUrl("xhtml",!1,b,a,!1,!0)),m=r.reference,m&&m instanceof u||(m=r.headword),this.lockReference(),m instanceof h&&v.jqResourceContent.ajaxscroll("scrollToElement",this.getSelectorForReference(m),!1,r)?(this.triggerLocationMarkerChange(m,r.bIgnoreLinking),this.setLocationMarker(m),s&&t.isFunction(s)&&s(),p()):(this.canNavigateTo(r,function(){v.jqResourceContent.ajaxscroll("tryJumpTo",g,function(e){if(e.resource&&e.resource.resourceName!==v.getCurrentResourceName())return void v.trigger(n.events.navigationRequest,new d({resourceName:e.resource.resourceName,indexedOffset:e.article.offset,type:v.getCurrentPosition().type,bIsUserInitiated:r.bIsUserInitiated}));var t=l.tryParse(e.article.requestedReference,e.article.urlReference||e.article.requestedReference,e.article.requestedReferenceType),i=m&&t instanceof h&&!r.bIgnoreLinking&&m.isEqualOrLessSpecificThan(t)?m:t;i?(v.triggerLocationMarkerChange(i,r.bIgnoreLinking),v.setLocationMarker(i),v.lockReference()):(v.jqReferenceInput.val(v.strLastLocInput),v.unlockReference()),p()},function(t){v.jqReferenceInput.val(v.strLastLocInput);var i="";404===t[0].status?i=Resources.FrontEnd.getString("NotFound"):403===t[0].status?i=Resources.FrontEnd.getString("ErrorNoAccess"):500===t[0].status&&(i=Resources.FrontEnd.getString("ErrorUnknown")),v.trigger(n.events.info,{nLevel:e.fn.infobar.levels.error,strMsg:Resources.FrontEnd.getString("ErrorBadNavigation")+(i?": "+i:"")})},e.noop)},function(){r.bPreventPropagation?v.jqReferenceInput.val(v.strLastLocInput):(r.resourceName=null,v.trigger(n.events.navigationRequest,r))},a,b),this.bIgnoreLinking=!!r.bIgnoreLinking),r.bIgnoreLinking||i.trackPageView(g),this.unflip(),!0},g.prototype.getSelectorForReference=function(e){var t=e.isRange?e.startReference:e;return"a[rel='milestone']:reference("+r.sanitizeIdForSelector(t.render())+")"},g.prototype.unload=function(){this.jqResourceContent.ajaxscroll("destroy"),this.resourceViewTracker&&this.resourceViewTracker.closeResource(new Date),p.prototype.unload.call(this)},g.prototype.loadExactPosition=function(){this.jqResourceContent.ajaxscroll("loadScrollPosition")},g}($,_,biblia,bibliaHistory,util,RESOURCE_TYPES,ROUTING,ArticlePopupNavigationRequest,locationMarkerUtility,LocationMarker,Reference,BibleReference,PanelBase,ResourceNavRequest,ResourcePanel),ContentPaneBase=function(e,t,n,i,r,o,s,a,l,u,c){"use strict";function h(i,r){var s=this,a=!1;this.jqContainer=i,this.jqResourceContainer=i.children(".resource-pane").first(),this.jqPickerButton=null,this.jqAutoCompleterInput=null,this.jqLoading=e.tmpl(e("#content-pane-loading-template").template()).appendTo(this.jqContainer).hide(),this.historyManager=n.getHistoryManager(),this.initialized=!1,this.isLoading=!1,this.getIsContentAllowed=function(){return!0},this.notAllowedCallback=r,this.setContentAllowedPredicate=function(e){this.getIsContentAllowed=e},this.registerInitialHistoryState=function(){this.panelInstance instanceof o&&this.jqContainer.one(t.events.locationMarkerChange,function(e){var t=s.panelInstance.getCurrentPosition();t&&!s.historyManager.hasInitialState()&&s.historyManager.pushState(t),s.updateHistoryControls()})},this.getResourceInfo=function(){return this.panelInstance&&this.panelInstance.resourceInfo?this.panelInstance.resourceInfo:null},this.jqContainer.bind(t.events.resourceChange,function(e,t){s.jqPickerButton&&s.jqPickerButton.resourcepicker("instance")&&s.jqPickerButton.resourcepicker("selectItem",t.newResource)}),this.jqContainer.bind(t.events.userJump,function(e,n){if(a)return void(a=!1);if(!n)throw new Error(t.events.userJump+" triggered, but no navRequest provided.");s.historyManager.pushState(n),s.updateHistoryControls()}),this.jqContainer.bind(t.events.userScroll,function(e){var t=s.panelInstance.getCurrentPosition();t.isScrollRequest=!0,s.historyManager.addScrollState(t),s.updateHistoryControls()}),this.jqContainer.delegate(".history","click",function(t){var n=e(this),i=n.is(".history-back")?"back":"forward",r=s.historyManager[i]();r&&(a=!0,r.bIsUserInitiated=!0,s.load(r)),s.updateHistoryControls()})}return h.prototype.getCurrentReference=function(){var e;return this.panelInstance&&this.panelInstance.getCurrentPosition&&(e=this.panelInstance.getCurrentPosition())?e.reference:null},h.prototype.getCurrentLocation=function(){var e;return this.panelInstance&&this.panelInstance.getCurrentPosition&&(e=this.panelInstance.getCurrentPosition())?e.reference||e.headword:null},h.prototype.forceLoad=function(n,i,r,o){var s=this;n||(n=this.panelInstance.getCurrentPosition());var a=n.toUrl("html",!1,!0);r&&s.jqResourceContainer.empty(),this.isLoading=!0,a?(this.jqLoading.show(),e.ajax({url:this.adjustOutboundUrl(a),success:function(e){s.getIsContentAllowed(e)?s.loadContent(e,n,i):s.notAllowedCallback&&s.notAllowedCallback(e,s)},error:function(n){if(0!==n.status){var i=n&&403==n.status?t.resourcestrings.resourcePermissionError:t.resourcestrings.resourceChangeError;s.jqContainer.trigger(t.events.info,{nLevel:e.fn.infobar.levels.error,strMsg:i})}o&&o()},complete:function(){s.jqLoading.hide()}})):s.jqContainer.trigger(t.events.info,{nLevel:e.fn.infobar.levels.error,strMsg:t.resourcestrings.resourceChangeError})},h.prototype.loadContent=function(e,r,o){var s=!!r.isPreloading,a=t.paneStates.normal,u=r.toUrl("html",!1,!0),c=this.getResourceInfo();this.panelInstance&&(a=this.panelInstance.paneState,this.unload()),this.jqResourceContainer.append(e),i.update(this.jqResourceContainer),this.fnInitialize(s),this.panelInstance.setPaneState(a),this.panelInstance instanceof l&&this.panelInstance.unlockReference&&this.panelInstance.unlockReference(),s||n.trackPageView(u),this.jqResourceContainer.trigger(t.events.resourceChange,{newResource:this.getResourceInfo(),oldResource:c}),r.bIsUserInitiated&&this.jqContainer.trigger(t.events.userJump,r),o&&o(this.panelInstance.getCurrentPosition())},h.prototype.load=function(n,i,r,o){var c,h=this;n instanceof s&&h.panelInstance&&h.panelInstance.paneState!==t.paneStates.normal&&h.panelInstance.trigger(t.events.resizePane,t.paneStates.normal),!r&&n instanceof a&&!n.bForceLoad&&h.initialized&&h.panelInstance instanceof l?h.panelInstance.canNavigateTo(n,function(){h.panelInstance instanceof l&&h.panelInstance.cancelTooltips(),h.panelInstance.navigateTo(n,null,!0),i&&i(h.panelInstance.getCurrentPosition())},function(){h.forceLoad(n,i,r,o)}):n instanceof u?(c=e("#search-panel-template").tmpl(),c.find('form input[name="query"]').first().val(n.query),h.loadContent(c,n,i)):h.forceLoad(n,i,r,o)},h.prototype.adjustOutboundUrl=function(e){return e},h.prototype.updateHistoryControls=function(){if(this.panelInstance.jqToolbar&&this.panelInstance.jqToolbar.length){var e=this.panelInstance.jqToolbar.find(".history"),t=e.filter(".history-back"),n=e.filter(".history-forward");t.length&&n.length&&(t.toggleClass("unavailable",!this.historyManager.hasBackState()),n.toggleClass("unavailable",!this.historyManager.hasForwardState()))}},h.prototype.onSelectedResourceChanged=function(e,t){var n=this.panelInstance instanceof l?this.panelInstance.getCurrentPosition():new a;n.bIsUserInitiated=!0,n.resourceName=t?t.resourceName:null,n.bIsUserInitiated=!0,delete n.indexedOffset,delete n.articleId,!n.reference||n.reference instanceof c||(delete n.reference,delete n.urlLocationMarker),n.headword&&(n.resourceFallback=!1),n.type=t.type,n.type==r.media&&(delete n.reference,delete n.headword,delete n.urlLocationMarker),this.load(n,null,!1,!0)},h.prototype.unload=function(){this.panelInstance&&(this.panelInstance.unload(),this.panelInstance=null),this.jqResourceContainer.empty(),this.jqPickerButton&&this.jqPickerButton.resourcepicker("instance")&&this.jqPickerButton.resourcepicker("destroy")},h.prototype.defaultPanelHandler={},h.prototype.panelKindHandlers={},h.registerPanelKindHandler=function(e,t){h.prototype.panelKindHandlers[e]=t},h.registerDefaultPanelHandler=function(e,t){h.prototype.defaultPanelHandler=t,h.registerPanelKindHandler(e,t)},h.prototype.getPanelKindHandler=function(e,t){if(!t||!this.panelKindHandlers[t]){var n=e.find(".content-chunk").first();if(n.length){var i=null,r=n.data();r&&r.resource&&r.resource.type&&(i=r.resource.type),i&&(t=i)}}if(!t){var o=e.find(".panel-content:first");o.length&&(t=o.data().panel||null)}return t&&0===t.indexOf("lbx.media")&&(t="lbx.media"),this.panelKindHandlers[t]||this.defaultPanelHandler},h}($,biblia,bibliaHistory,ui,RESOURCE_TYPES,PagedResourcePanel,ReadingPlanNavRequest,ResourceNavRequest,ResourcePanel,SearchNavigationRequest,BibleReference),ContentPane=function(e,t,n,i,r,o){"use strict";function s(n,i,r,s){o.call(this,n,r);var a=this,l=0;this.strPaneId=i,this.jqContainer.attr("data-pane-id",i),this.getPanelId=function(){return i+"."+l++},this.dynamicTextSourceResourceName=null,e(document).bind(t.events.dynamicSourceChange,function(e,t){a.dynamicTextSourceResourceName=t?t.resourceName:null,a.panelInstance&&a.panelInstance.resourceInfo&&a.panelInstance.resourceInfo.supportsDynamicText&&a.panelInstance.updateDynamicText()}),this.fnInitialize=function(n){if(this.jqContainer.children().length&&this.jqResourceContainer.children().length){var i=this.getPanelKindHandler(this.jqResourceContainer);this.panelInstance=new i.ctor(this.jqResourceContainer,this.getPanelId(),n,e.extend({},s,{getAdjustedUrl:this.adjustOutboundUrl.bind(this),getIsMuted:function(){return a.bIsMuted}})),this.panelInstance&&(this.panelInstance.resourceInfo?(i.requiresResourcePicker&&(this.initialized||this.registerInitialHistoryState(),this.panelInstance.jqToolbar.length&&(this.jqPickerButton=this.panelInstance.jqToolbar.find(".resource-picker-button").children(".resource-title").first(),this.jqPickerButton.length&&this.jqPickerButton.resourcepicker({changePickerText:!1,initialResourceInfo:this.getResourceInfo(),change:this.onSelectedResourceChanged.bind(this),itemSourceType:i.itemSourceType,itemBiasType:i.itemBiasType,titleSuffix:'&nbsp;<div class="arrow"></div>',lazy:!0,noResultMessage:t.resourcestrings.resourcePickerNoResults,noResourcesAvailableMessage:t.resourcestrings.resourcePickerNoResources}))),this.initialized=!0):(this.jqContainer.is("#content-pane-full")||this.panelInstance.initialized)&&(this.initialized=!0)),this.panelInstance.jqToolbar&&this.panelInstance.jqToolbar.length>0&&this.panelInstance.jqToolbar.find(".x-close").click(function(e){e.preventDefault(),e.stopPropagation(),(a.jqPrevParent||a.jqContainer).trigger(t.events.paneClosed)}),i.requiresAutoCompleter&&this.panelInstance.jqToolbar.length&&(this.jqAutoCompleterInput=this.panelInstance.jqToolbar.find(".auto-complete-input"),this.jqAutoCompleterInput.autocompleter({selectFunction:i.requiresAutoCompleter.onSelect&&function(e){i.requiresAutoCompleter.onSelect.call(a.panelInstance,e)}}),this.panelInstance.clearPreviousQueryCallback=function(){a.jqAutoCompleterInput.autocompleter("clearPreviousQuery")}),this.updateHistoryControls()}this.isLoading=!1},this.fnInitialize()}return s.prototype=r.extend(o),s.prototype.reattachElements=function(){this.panelInstance&&this.panelInstance.reattachElements()},s.prototype.detachElements=function(){this.panelInstance&&this.panelInstance.detachElements()},s.prototype.hide=function(){this.jqContainer.css("z-index",t.zindexes.behind)},s.prototype.mute=function(){this.bIsMuted=!0},s.prototype.unmute=function(){this.bIsMuted=!1},s.prototype.display=function(){if(this.panelInstance){var e=this.panelInstance.getCurrentPosition();e&&n.trackPageView(e.toUrl())}this.unmute()},s.prototype.getDisplayState=function(){return this.panelInstance?this.panelInstance.paneState:t.paneStates.normal},s.prototype.setDisplayState=function(n){function i(e){o.jqContainer.trigger(t.events.setExpanded,[e])}var r=null,o=this;this.panelInstance&&this.panelInstance.setPaneState(n),n==t.paneStates.fullscreen?(this.jqPrevParent=this.jqContainer.parent(),i(!1),this.jqContainer.removeClass("invisible"),r=this.panelInstance.getCurrentPosition(),this.jqContainer.appendTo(e("body")).addClass("fullscreen"),r&&this.panelInstance&&this.panelInstance.navigateTo(r,null,!1)):(r=this.panelInstance?this.panelInstance.getCurrentPosition():null,this.jqPrevParent&&(this.jqContainer.appendTo(this.jqPrevParent).removeClass("fullscreen"),r&&this.panelInstance.navigateTo(r,null,!1),this.jqPrevParent=null),n===t.paneStates.hidden?this.jqContainer.addClass("invisible"):n===t.paneStates.normal?(r&&!this.jqContainer.hasClass("invisible")&&this.panelInstance.navigateTo(r,null,!1),i(!1),this.jqContainer.removeClass("invisible")):n===t.paneStates.expanded&&(this.jqContainer.removeClass("invisible"),i(!0),r&&this.panelInstance&&this.panelInstance.navigateTo(r,null,!1)))},s.prototype.adjustOutboundUrl=function(e){return i.log("Adjusting outbound url: "+e+", "+this.dynamicTextSourceResourceName),e=this.dynamicTextSourceResourceName?r.addUrlParameter(e,"dynamicTextSource",this.dynamicTextSourceResourceName):e,o.prototype.adjustOutboundUrl.call(this,e)},s.create=function(e,t,n,i){return new s(e,t,n,i)},s}($,biblia,bibliaHistory,log,util,ContentPaneBase),DocumentPanel=function(e,t){"use strict";function n(e,n,i,r){t.call(this,e,n,i,$("#document-panel-menu"),r),this.documentId=this.jqContainer.find(".document-content").data("id")}return n.prototype=e.extend(t),n.prototype.init=function(){},n}(util,EntityPanel),BiblePanel=function(e,t,n,i,r,o,s,a,l,u,c){"use strict";function h(e,t,n,i){o.call(this,e,t,n,e.find(".resource-content").first(),e.find(".content-wrapper").first(),i);var r=this;this.refHighlight=null,this.highlighter=new Highlighter(this.jqResourceContent),this.jqReferenceInput.attr("placeholder",Resources.Common.getString("Reference")),this.highlightNow=function(){this.refHighlight.isRange?this.highlighter.highlight(this.refHighlight.startReference,this.refHighlight.endReference):this.highlighter.highlight(this.refHighlight)},this.highlightSoon=_.debounce(this.highlightNow.bind(this),200),this.jqReferenceInput.closest("form").submit(function(e){var t=c.tryParse(r.jqReferenceInput.val());e.preventDefault(),r.goToReference(t)}),this.goToReference=function(e){r.unlockReference(),r.highlighter.unhighlight(),null===e?r.jqReferenceInput.val(r.strLastLocInput||""):(r.refHighlight=e instanceof c?e:null,r.navigateTo(new s({resourceName:r.getCurrentResourceName(),reference:e,bPreventPropagation:!0,bIsUserInitiated:!0}),function(){r.highlightNow()},null,function(){o.prototype.updateMilestoneCore.call(r,!0)}))},this.shareButton=new a(this.jqToolbar.find(".share-button"),{bibleRequest:!0}),this.shareButton.setShareInfo(this.getCurrentPosition(),this.resourceInfo,!0),this.jqContainer.bind(biblia.events.locationMarkerChange,function(e,t){r.shareButton.setShareInfo(r.getCurrentPosition(),r.resourceInfo,!0)}),this.init()}return h.prototype=n.extend(o),h.prototype.updateMilestoneCore=function(e,t){var n=null===e?null:l.tryParse(e.data("reference")),i=null===e?null:e.closest(".content-chunk").data("resource");i&&n&&this.setParallelResourceContext(i.type,n),this.triggerLocationMarkerChange(n,this.bIgnoreLinking),this.setLocationMarker(n,!0),o.prototype.updateMilestoneCore.call(this,t),this.clearPreviousQueryCallback&&this.clearPreviousQueryCallback()},h.prototype.setRequestedReference=function(e){var n=this;o.prototype.setRequestedReference.call(this,e,"reference",function(e){t.debug("setting refHighlight: ",e),n.refHighlight=e})},h.prototype.filterPageData=function(e,t){if(t&&!e.targetSelector){var n=c.tryParse(t);n&&(e.targetSelector=this.getSelectorForReference(n))}return e},h.prototype.onChunkLoad=function(e,i){this.refHighlight?this.highlighter.update()||("jump"==i?this.highlightSoon():this.highlightNow()):t.debug("no reference to highlight"),o.prototype.onChunkLoad.apply(this,n.argumentsArray(arguments))},h.prototype.onCommunityNoteInsertion=function(t,i){if(i.reference){var r,o,s=l.tryParse(i.reference);s&&(r=this.jqResourceContent.find('a[rel="milestone"]:reference('+n.sanitizeIdForSelector(s.toFirstVerseInRange().render())+")").first(),0!==r.length&&(o=r.next(".community-note"),0!==o.length?o.toggleClass("by-me",!0).attr("data-count",+o.attr("data-count")+1):(o=e("<span></span>").addClass("community-note by-me").attr("data-rendered-reference",'"'+s.render()+'"').attr("data-resource",'"'+this.resourceInfo.resourceName+'"').attr("data-count",1),r.after(o))))}},h.prototype.onCommunityNoteDeletion=function(e,t){if(t.reference){var i,r,o=l.tryParse(t.reference);o&&(i=this.jqResourceContent.find('a[rel="milestone"]:reference('+n.sanitizeIdForSelector(o.toFirstVerseInRange().render())+")").first(),0!==i.length&&(r=i.next(".community-note"),0!==r.length&&(r.attr("data-count")>1?r.attr("data-count",+r.attr("data-count")-1):r.remove())))}},h.prototype.getCurrentPosition=function(){return new s({resourceName:this.getCurrentResourceName(),reference:this.locationCurrent,type:i.bible,indexedOffset:this.curIndexedOffset,articleId:this.curArticleId})},h.prototype.onLinkClick=function(e,i){var r=e.data();if(r.reference){var a=c.tryParse(r.reference,r.datatype);t.debug("Reference link click",a);var l=!r.resourcename||r.resourcename==this.getCurrentResourceName();if(a&&l)return void this.navigateTo(new s({resourceName:this.getCurrentResourceName(),reference:a,bIsUserInitiated:!0}))}o.prototype.onLinkClick.apply(this,n.argumentsArray(arguments))},r.registerPanelKindHandler(i.bible,{ctor:h,itemSourceType:"bibles",itemBiasType:"bibles",requiresResourcePicker:!0,requiresAutoCompleter:{onSelect:function(e){this.goToReference(e.referenceValue)}}}),h}($,log,util,RESOURCE_TYPES,ContentPaneBase,PagedResourcePanel,ResourceNavRequest,ShareButton,locationMarkerUtility,0,BibleReference),MediaPanel=function(e,t,n,i,r,o,s,a,l,u){"use strict";function c(n,r,s,a){l.call(this,n,r,s,n.find(".resource-content").first(),e("#resource-panel-menu"),a);var c=this.jqContainer.find(".content-media").first().data(),h=this;this.resourceInfo=c.resource,this.indexedOffset=c.offset,this.init(),this.jqImgSection=this.jqResourceContent.find(".media-display-section"),this.jqInfoSection=this.jqResourceContent.find(".media-information-section"),this.bLoading=!1,this.mediaInit=function(e){this.shareButton.setShareInfo(new ResourceNavRequest({resourceName:this.getCurrentResourceName()}),this.resourceInfo,!1),this.syncPosition("SyncWriteOffset",this.resourceInfo.resourceName,this.indexedOffset,0),this.jqContainer.find(".card").focus(),e.articleidtopopup&&this.jqContainer.trigger(t.events.navigationRequest,o.createFromArticle(e.articleidtopopup,this.getCurrentResourceName(),i.media))},this.shareButton=new u(this.jqToolbar.find(".share-button")),this.mediaInit(c),this.jqContainer.on("click",".content-media a",function(){return h.jqContainer.trigger(t.events.navigationRequest,o.createFromArticle(e(this).data("articleid"),h.resourceInfo.resourceName,h.resourceInfo.type)),!1}),this.jqToolbar.find(".resource-navigation-form").remove()}return c.prototype=n.extend(l),c.prototype.init=function(){var t,n=this;l.prototype.init.call(this),this.jqResourceContent.ajaxscroll({fnGetPage:this.ajaxScrollGetPage.bind(this),fnGetRelativePositionUrl:this.getRelativePositionUrl.bind(this),edgeTriggerDistance:1200,bVirtualizeScrollPosition:!0,unloadTriggerScreens:3,bGuessDensity:!1,contentChunkClass:"content-media"}),t=function(){n.jqResourceContent.ajaxscroll("tryJumpTo",r.buildUrl("MediaThumbnails",{resourceName:n.resourceInfo.resourceName,offset:n.indexedOffset,contentType:"xhtml"}))},e(window).resize(_.debounce(t,300))},c.prototype.ajaxScrollGetPage=function(t){var n,i=e(t);return n=i.data().pagingdata,this.indexedOffset=n.index,this.resourceLength=n.resourceLength,void 0===n.previousOffset?this.indexedResourceStart=this.indexedOffset:void 0===this.indexedResourceStart&&(this.indexedResourceStart=1),{content:i,prevPageUrl:n.previousOffset?r.buildUrl("MediaThumbnails",{resourceName:this.resourceInfo.resourceName,offset:n.previousOffset,backward:!0,contentType:"xhtml"}):null,nextPageUrl:n.nextOffset?r.buildUrl("MediaThumbnails",{resourceName:this.resourceInfo.resourceName,offset:n.nextOffset,backward:!1,contentType:"xhtml"}):null,indexedResourceStart:this.indexedResourceStart,indexedResourceEnd:n.resourceLength,chunkOffset:this.indexedOffset,chunkLength:n.pageSize,hash:this.indexedOffset,targetSelector:"#media-chunk-"+n.index}},c.prototype.getRelativePositionUrl=function(e){var t=Math.floor(e/100*this.resourceLength);return r.buildUrl("MediaThumbnails",{resourceName:this.resourceInfo.resourceName,offset:t,contentType:"xhtml"})},c.prototype.navigateTo=function(e){var n=this;if(e.resourceName!==this.getCurrentResourceName())return void this.trigger(t.events.navigationRequest,e);(e.type==i.media||e.indexedOffset>0&&!n.bLoading)&&this.jqResourceContent.ajaxscroll("tryJumpTo",e.toUrl("xhtml")),this.unflip()},c.prototype.getCurrentPosition=function(){return new ResourceNavRequest({resourceName:this.getCurrentResourceName(),indexedOffset:this.indexedOffset,type:i.media})},c.prototype.onLinkClick=function(e,t){return e.is(".media-nav")?(t.stopPropagation(),this.navigateTo(new ResourceNavRequest({resourceName:this.getCurrentResourceName(),url:e.attr("href"),type:i.media}),null,e.data().offset,!0),!1):a.prototype.onLinkClick.apply(this,n.argumentsArray(arguments))},c.prototype.unload=function(){this.shareButton.destroy(),a.prototype.unload.call(this)},c.prototype.getTitleUrl=function(){return{title:n.getTitlePart(null,this.resourceInfo),url:new ResourceNavRequest({resourceName:this.resourceInfo.resourceName}).toUrl()}},s.registerPanelKindHandler(i.media,{ctor:c,itemBiasType:"-bibles",requiresResourcePicker:!0}),c}($,biblia,util,RESOURCE_TYPES,ROUTING,ArticlePopupNavigationRequest,ContentPaneBase,PanelBase,ResourcePanel,ShareButton),ContentPanel=function(e,t,n,i,r){"use strict";function o(t,n,i){r.call(this,t,n,i);var o=t.find(".content-body"),s=o.data();s&&s.title&&this.trigger(e.events.paneTitleUrlChanged,{title:s.title,url:s.url})}return o.prototype=n.extend(r),o.prototype.navigateTo=function(e){var n=e.toUrl("xhtml",!1,!0);this.jqContainer.load(n),t.trackPageView(n)},o.prototype.unload=function(){r.prototype.unload.call(this)},i.registerPanelKindHandler("content",{ctor:o}),o}(biblia,bibliaHistory,util,ContentPaneBase,PanelBase),TagPanel=function(e,t,n,i,r,o,s){"use strict";function a(r,a,l){function u(e,t){return i.qualifyURL("/bible/"+t+"/"+e)}function c(){function e(e){return!/<(html|head|body)/gi.test(e)}function n(){var t,n=g.val();if(v.hide(),!e(n))return m.val(""),void v.text(s.FrontEnd.getString("ErrorBodyOnly")).show();t=p.processHtml(g.val()),m.val(t)}Logos.ReferenceTagging?n():t.script("https://bible.logos.com/jsapi/referencetagging.js").wait(function(){Logos.ReferenceTagging.lbsUseTooltip=!1,Logos.ReferenceTagging.lbsNoSearchTagNames=["h1","h2","h3","style","iframe"],Logos.ReferenceTagging.generateLink=function(e,t){return u(encodeURIComponent(e.replace(/:/g,".").replace(/(\s|\r?\n)+/g," ")),C)},n()})}function h(){function t(e){y.val(e?u(e,R):"")}var n=e.map(b,function(t,n){return e.trim(e(t).val())||null});if(d=i.abortRequest(d),!n.length)return void t();d=e.ajax({url:"/bible/urlreference",type:"POST",data:{references:n},traditional:!0,success:function(e){e&&e.references&&t(e.references)}})}function f(e,t){e.resourcepicker({change:t,useAbbreviatedTitlesOnly:!0,itemSourceType:"bibles",topItemsCount:0,pickerDropDownOrigin:"left top",pickerButtonOrigin:"left bottom",pickerDropDownOffset:"-2 3",titleSuffix:'&nbsp;<div class="arrow"></div>',lazy:!0,noResultMessage:n.resourcestrings.resourcePickerNoResults,noResourcesAvailableMessage:n.resourcestrings.resourcePickerNoResources})}o.call(this,r,a,l);var d,p=this,g=this.jqContainer.find("textarea.in").not(".input-hint"),m=this.jqContainer.find("textarea.out"),v=this.jqContainer.find(".validation-error"),b=this.jqContainer.find("input.in").not(".input-hint"),y=this.jqContainer.find("input.out:first"),R="esv",C="esv";this.jqContainer.find("textarea.in").bind("change keyup",_.debounce(c,100)),b.bind("change keyup",_.debounce(h,100)),y.add(m).bind("focus click",_.debounce(function(){e(this).select()},20)),f(e(".build .resource-picker-button"),function(e,t){R=t.resourceName,h()}),f(e(".autotag .resource-picker-button"),function(e,t){C=t.resourceName,c()})}return a.prototype=i.extend(o),a.prototype.processHtml=function(e){var t=document.createElement("div");return t.innerHTML=e,Logos.ReferenceTagging.tag(t,"biblia.com/tag"),t.innerHTML},a.prototype.unload=function(){o.prototype.unload.call(this)},r.registerPanelKindHandler("tag",{ctor:a}),a}($,$LAB,biblia,util,ContentPaneBase,ContentPanel,Resources),PluginWidgetPanel=function(e,t){"use strict";function n(e,n,i){t.call(this,e,n,i);var r=this;this.bibleVersion="esv",this.initDomEvents=function(t){function n(){var t=e.find('input[name="style-selector-button"]:checked');r.onStyleSelect(t),r.updateWidget()}this.initResourcePicker(e.find(".resource-picker-button"),function(e,t,n){r.bibleVersion=t.resourceName,r.updateWidget()}),t&&(e.find('input[name="style-selector-button"]').change(n),e.find(".style-thumbnail").click(function(){$(this).parent().find("input:radio").prop("checked",!0),n()}),e.find('input[name="style-selector-button"]').first().prop("checked",!0),n())},this.updateWidget=function(){var t=r.getFrameMarkup();e.find("#plugin-widget-demo").html(r.getPluginFrame()),e.find("#html-markup-textarea").val(t+r.getPluginScripts())}}return n.prototype=e.extend(t),n.prototype.getFrameMarkup=function(){return this.getPluginComment()+this.getPluginElement()},n.prototype.getPluginElement=function(){var e=this.getIframeAttributes(),t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n+'="'+e[n]+'"');return["<biblia:",this.elementName," ",t.join(" "),"></biblia:",this.elementName,">"].join("")},n.prototype.getPluginFrame=function(){return['<iframe src="',this.getUrl(),'" width="',this.getWidth(),'" height="',this.getHeight(),'"></iframe>'].join("")},n.prototype.getPluginScripts=function(){return'\r\n\x3c!-- If youre including multiple Biblia widgets, you only need this script tag once --\x3e\r\n<script src="//'+location.hostname+'/api/logos.biblia.js"><\/script>\r\n<script>logos.biblia.init();<\/script>'},n.prototype.getPluginComment=function(){throw new Error("getPluginComment must be implemented by the concrete class.")},n.prototype.getUrl=function(){throw new Error("getUrl must be implemented by the concrete class.")},n.prototype.getIframeAttributes=function(){throw new Error("getIframeAttributes must be implemented by the concrete class.")},n.prototype.getWidth=function(){throw new Error("getWidth must be implemented by the concrete class.")},n.prototype.getHeight=function(){throw new Error("getWidth must be implemented by the concrete class.")},n.prototype.onStyleSelect=function(){throw new Error("onStyleSelect must be implemented by the concrete class.")},n.prototype.initResourcePicker=function(){throw new Error("initResourcePicker must be implemented by the concrete class.")},n}(util,ContentPanel),VerseOfTheDayPanel=function(e,t,n,i,r){"use strict";function o(i,o,s){r.call(this,i,o,s);var a=this;this.widgetTheme="colorbar",this.widgetVariant="orange",this.singleImage=!1,this.elementName="verseoftheday",this.idPrefix="verse-of-the-day",this.width=300,this.height=250,this.onStyleSelect=function(e){this.widgetVariant=e.data("variant"),this.widgetTheme=e.data("theme")},this.initResourcePicker=function(t,n){t.resourcepicker({change:n,useAbbreviatedTitlesOnly:!0,itemSourceType:"bibles",publicResourcesOnly:!0,topItemsCount:0,pickerDropDownOffset:"-2 3",titleSuffix:'&nbsp;<div class="arrow"></div>',lazy:!0,noResultMessage:e.resourcestrings.resourcePickerNoResults,noResourcesAvailableMessage:e.resourcestrings.resourcePickerNoResources})},this.getSingleImage=function(){return'<a target="_blank" href="'+t.qualifyURL(n.buildUrl("VerseOfTheDay",{resourceName:this.bibleVersion}))+'"><img src="'+this.getUrl()+'" width="300" height="250" /></a>'},i.find('input[name="single-image"]').change(function(){a.singleImage=this.checked;var e=i.find("#textual-theme-options");if(a.singleImage){e.hide();var t=$('input[name="style-selector-button"]');t.first().prop("checked",!0),t.change()}else e.show();a.updateWidget()}),this.initDomEvents(!0)}return o.prototype=t.extend(r),o.prototype.getPluginFrame=function(){return this.singleImage?this.getSingleImage():['<iframe src="',this.getUrl(),'" width="',this.getWidth(),'" height="',this.getHeight(),'"></iframe>'].join("")},o.prototype.getFrameMarkup=function(){return this.singleImage?this.getPluginComment()+this.getSingleImage():this.getPluginComment()+this.getPluginElement()},o.prototype.getPluginScripts=function(){return this.singleImage?"":r.prototype.getPluginScripts.call(this)},o.prototype.getPluginComment=function(){return"\x3c!-- Verse of the Day. "+t.qualifyURL(n.buildUrl("Plugins",{Action:"verseoftheday"}))+" --\x3e\r\n"},o.prototype.getUrl=function(){var e=this.getIframeAttributes();return e.resourceName=e.resource,delete e.resource,t.qualifyURL(n.buildUrl("VerseOfTheDayWidget",e))},o.prototype.getIframeAttributes=function(){return{resource:this.bibleVersion,width:this.width,height:this.height,singleImage:this.singleImage,theme:this.widgetTheme,variant:this.widgetVariant}},o.prototype.getWidth=function(){return this.width},o.prototype.getHeight=function(){return this.height},i.registerPanelKindHandler("verse-of-the-day",{ctor:o}),o}(biblia,util,ROUTING,ContentPaneBase,PluginWidgetPanel),BibleSearchBoxPanel=function(e,t,n,i){"use strict";function r(e,t,n){function o(){s.widgetSize=$(this).val(),s.updateWidget()}i.call(this,e,t,n);var s=this;this.style="light",this.sizes={small:{width:160,height:80},large:{width:300,height:135}},this.widgetSize="small",this.elementName="biblesearchbox",this.idPrefix="bible-search-box",this.onStyleSelect=function(e){s.style=e.attr("data-style")},this.initResourcePicker=function(e,t){e.resourcepicker({change:t,useAbbreviatedTitlesOnly:!0,itemSourceType:"bibles",checkLicenses:!0,topItemsCount:0,pickerDropDownOrigin:"left top",pickerButtonOrigin:"left bottom",pickerDropDownOffset:"-2 3",titleSuffix:'&nbsp;<div class="arrow"></div>',injectResources:[r.defaultVersion],lazy:!0,noResultMessage:biblia.resourcestrings.resourcePickerNoResults,noResourcesAvailableMessage:biblia.resourcestrings.resourcePickerNoResources})},e.find("form select").change(o),this.bibleVersion=r.defaultVersion.resourceName,this.initDomEvents(!0)}
return r.prototype=e.extend(i),r.prototype.getPluginComment=function(){return"\x3c!-- Bible Search Box. "+e.qualifyURL(t.buildUrl("Plugins",{Action:"BibleSearchBox"}))+" --\x3e\r\n"},r.prototype.getUrl=function(){var n=this.getIframeAttributes();return delete n.width,delete n.height,e.qualifyURL(t.buildUrl("BibleSearchBox",this.getIframeAttributes()))},r.prototype.getIframeAttributes=function(){var e={style:this.style,size:this.widgetSize,width:this.getWidth(),height:this.getHeight()};return this.bibleVersion!=r.defaultVersion.resourceName&&(e.resource=this.bibleVersion),e},r.prototype.getWidth=function(){return this.sizes[this.widgetSize].width},r.prototype.getHeight=function(){return this.sizes[this.widgetSize].height},r.defaultVersion={resourceName:"DEFAULT_VERSION",title:"Default Version",type:"CUSTOM",abbreviatedTitle:"Default Version",authors:[]},n.registerPanelKindHandler("bible-search-box",{ctor:r}),r}(util,ROUTING,ContentPaneBase,PluginWidgetPanel),BibleSearchResultsPanel=function(e,t,n,i,r){"use strict";function o(t,n,i){function s(){a.widgetSize=$(this).val(),a.updateWidget()}r.call(this,t,n,i);var a=this;this.style="light",this.sizes={small:{width:160,height:200},large:{width:300,height:400}},this.widgetSize="small",this.elementName="biblesearchresults",this.idPrefix="bible-search-results",this.onStyleSelect=function(e){a.style=e.attr("data-style")},this.initResourcePicker=function(t,n){t.resourcepicker({change:n,useAbbreviatedTitlesOnly:!0,itemSourceType:"bibles",checkLicenses:!0,topItemsCount:0,pickerDropDownOrigin:"left top",pickerButtonOrigin:"left bottom",pickerDropDownOffset:"-2 3",titleSuffix:'&nbsp;<div class="arrow"></div>',injectResources:[o.defaultVersion],lazy:!0,noResultMessage:e.resourcestrings.resourcePickerNoResults,noResourcesAvailableMessage:e.resourcestrings.resourcePickerNoResources})},t.find("form select").change(s),this.bibleVersion=o.defaultVersion.resourceName,this.initDomEvents(!0)}return o.prototype=t.extend(r),o.prototype.getPluginComment=function(){return"\x3c!-- Bible Search Results. "+t.qualifyURL(n.buildUrl("Plugins",{Action:"BibleSearchResults"}))+" --\x3e\r\n"},o.prototype.getUrl=function(){var e=this.getIframeAttributes();return delete e.width,delete e.height,t.qualifyURL(n.buildUrl("BibleSearchResults",this.getIframeAttributes()))},o.prototype.getIframeAttributes=function(){return{resource:this.bibleVersion,style:this.style,size:this.widgetSize,width:this.getWidth(),height:this.getHeight()}},o.prototype.getWidth=function(){return this.sizes[this.widgetSize].width},o.prototype.getHeight=function(){return this.sizes[this.widgetSize].height},o.defaultVersion={resourceName:"esv",title:"Default Version",type:"CUSTOM",abbreviatedTitle:"Default Version",authors:[]},i.registerPanelKindHandler("bible-search-results",{ctor:o}),o}(biblia,util,ROUTING,ContentPaneBase,PluginWidgetPanel),EmbeddedBiblePanel=function(e,t,n,i,r,o,s){"use strict";function a(n,r,a){function l(){var e=!0,t=new RegExp("^\\d+%?$"),n=s.tryParse(f.val());n?(f.toggleClass("invalid",!1),c.startingRef=n):(f.toggleClass("invalid",!0),e=!1);var i=d.val();t.test(i)?(d.toggleClass("invalid",!1),c.width=i):(d.toggleClass("invalid",!0),e=!1);var r=p.val();return t.test(r)?(p.toggleClass("invalid",!1),c.height=r):(p.toggleClass("invalid",!0),e=!1),e}function u(){e.ajax({url:i.buildUrl("FirstVerseInResource",{resourceName:c.bibleVersion}),success:function(e){e&&e.firstVerse?(c.startingRef=s.tryParse(e.firstVerse),f.val(e.firstVerse),f.toggleClass("invalid",!1),c.updateWidget()):startingRef.val("")},error:function(){startingRef.val("")}})}o.call(this,n,r,a);var c=this,h=n.find("form"),f=h.find("input[name=startingReference]"),d=h.find("input[name=width]"),p=h.find("input[name=height]");this.startingRef=null,this.width=0,this.height=0,this.jqContainer=n,this.elementName="bible",this.idPrefix="bible",this.initResourcePicker=function(e,n){e.resourcepicker({change:function(e,t){n(e,t),u()},client:"EmbeddedBiblePlugin",useAbbreviatedTitlesOnly:!0,itemSourceType:"bibles",checkLicenses:!0,topItemsCount:0,pickerDropDownOrigin:"left top",pickerButtonOrigin:"left bottom",pickerDropDownOffset:"-2 3",publicResourcesOnly:!0,titleSuffix:'&nbsp;<div class="arrow"></div>',lazy:!0,noResultMessage:t.resourcestrings.resourcePickerNoResults,noResourcesAvailableMessage:t.resourcestrings.resourcePickerNoResources})};var g=_.throttle(function(){l()&&c.updateWidget()},1e3);h.change(function(e){g()}),this.bibleVersion="leb",u(),l(),this.initDomEvents(!1)}return a.prototype=n.extend(o),a.prototype.getPluginComment=function(){return"\x3c!-- Embedded Bible. "+n.qualifyURL(i.buildUrl("Plugins",{Action:"embeddedbible"}))+" --\x3e\r\n"},a.prototype.getUrl=function(){var e=this.getIframeAttributes();return e.resourceName=e.resource,delete e.resource,n.qualifyURL(i.buildUrl("EmbeddedBible",e))},a.prototype.getIframeAttributes=function(){var t=this.jqContainer.find("form"),n=t.find("input[type=checkbox]"),i=t.find("select"),r={layout:i.val(),resource:this.bibleVersion,width:this.width,height:this.height};return n.not(":checked").each(function(){r[e(this).attr("name")]=!1}),this.startingRef&&(r.startingReference=this.startingRef.toUrlSafeString()),r},a.prototype.getWidth=function(){return this.width},a.prototype.getHeight=function(){return this.height},r.registerPanelKindHandler("embedded-bible",{ctor:a}),a}($,biblia,util,ROUTING,ContentPaneBase,PluginWidgetPanel,BibleReference),BibleVersePanel=function(e,t,n,i,r,o,s){"use strict";function a(n,r,a){function l(){var e=!0,t=new RegExp("^\\d+%?$"),n=s.tryParse(f.val());n?(f.toggleClass("invalid",!1),c.reference=n):(f.toggleClass("invalid",!0),e=!1);var i=d.val();return t.test(i)?(d.toggleClass("invalid",!1),c.width=i):(d.toggleClass("invalid",!0),e=!1),e}function u(){e.ajax({url:i.buildUrl("BibleVerse",{resourceName:c.bibleVersion,reference:c.reference.toUrlSafeString(),purpose:"plaintext"}),success:function(e){e?(c.bibleVerseContent=e.content,c.bibleVerseCitation=' &mdash; <a target="_blank" href = "https://biblia.com'+i.buildUrl("BibleReference",{resourceName:c.bibleVersion,reference:c.reference.toUrlSafeString()})+'">'+c.reference.toString()+"</a>",c.updateWidget()):(c.bibeVerseContent="",c.bibleVerseCitation="")},error:function(){c.bibeVerseContent="",c.bibleVerseCitation=""}})}o.call(this,n,r,a);var c=this,h=n.find("form"),f=h.find("input[name=reference]"),d=h.find("input[name=width]");this.reference=null,this.bibeVerseContent=null,this.bibleVerseCitation=null,this.width=0,this.jqContainer=n,this.elementName="bibleverse",this.idPrefix="bible",this.initResourcePicker=function(e,n){e.resourcepicker({change:function(e,t){n(e,t),u(),c.updateWidget()},useAbbreviatedTitlesOnly:!0,itemSourceType:"bibles",checkLicenses:!0,topItemsCount:0,pickerDropDownOrigin:"left top",pickerButtonOrigin:"left bottom",pickerDropDownOffset:"-2 3",publicResourcesOnly:!0,titleSuffix:'&nbsp;<div class="arrow"></div>',lazy:!0,noResultMessage:t.resourcestrings.resourcePickerNoResults,noResourcesAvailableMessage:t.resourcestrings.resourcePickerNoResources})};var p=_.throttle(function(){l()&&c.updateWidget()},1e3);h.change(function(e){l(),u(),p()}),this.bibleVersion=document.getElementsByClassName("input-label")[0].title;var g=document.getElementsByClassName("reference-input")[0].title;this.reference=s.tryParse(g),f.val(g),f.toggleClass("invalid",!1),u(),l(),this.updateWidget(),this.initDomEvents(!1)}return a.prototype=n.extend(o),a.prototype.getPluginComment=function(){return"\x3c!-- Bible Verse. "+n.qualifyURL(i.buildUrl("Plugins",{Action:"BibleVerse"}))+" --\x3e\r\n"},a.prototype.getPluginElement=function(){var e=this.getIframeAttributes(),t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n+'="'+e[n]+'"');return["<biblia:",this.elementName," ",t.join(" "),">",'<blockquote style="width:',e.width,'px;">',this.bibleVerseContent,this.bibleVerseCitation,"</blockquote>","</biblia:",this.elementName,">"].join("")},a.prototype.getUrl=function(){var e=this.getIframeAttributes();return e.resourceName=e.resource,delete e.resource,n.qualifyURL(i.buildUrl("BibleVerse",e))},a.prototype.getIframeAttributes=function(){var t=this.jqContainer.find("form"),n=t.find("input[type=checkbox]"),i=t.find("select"),r={theme:i.val(),resource:this.bibleVersion,width:this.width};return n.not(":checked").each(function(){r[e(this).attr("name")]=!1}),this.reference&&(r.reference=this.reference.toUrlSafeString()),r},a.prototype.getWidth=function(){return this.width},a.prototype.getHeight=function(){return this.height},r.registerPanelKindHandler("bible-verse",{ctor:a}),a}($,biblia,util,ROUTING,ContentPaneBase,PluginWidgetPanel,BibleReference),QuoteBuilderPanel=function(e,t,n,i,r){"use strict";function o(e,t,i){function o(){var e=!0,t=new RegExp("^\\d+%?$"),n=l.val();return t.test(n)?(l.toggleClass("invalid",!1),s.width=n):(l.toggleClass("invalid",!0),e=!1),e}r.call(this,e,t,i);var s=this,a=e.find("form"),l=a.find("input[name=width]"),u=e.find(".quote-text")[0],c=e.find("#widget-options")[0].dataset;this.reference=null,this.width=500,this.jqContainer=e,this.quote=u.innerHTML,this.citation=' &mdash; <a target="_blank" href = "https://biblia.com'+n.buildUrl("Article",{resourceName:c.resourceid.split(":")[1],articleId:u.dataset.article,offset:u.dataset.offset})+'">'+c.citation+"</a>",this.elementName="quotebuilder",this.idPrefix="bible",this.initResourcePicker=function(){};var h=_.throttle(function(){o()&&s.updateWidget()},1e3);a.change(function(e){h()}),a.submit(function(e){e.preventDefault()}),this.updateWidget(),this.initDomEvents(!1)}return o.prototype=t.extend(r),o.prototype.getPluginComment=function(){return"\x3c!-- Bible Verse. "+t.qualifyURL(n.buildUrl("Plugins",{Action:"QuoteBuilder"}))+" --\x3e\r\n"},o.prototype.getPluginElement=function(){var e=this.getIframeAttributes(),t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n+'="'+e[n]+'"');return["<biblia:",this.elementName," ",t.join(" "),">",'<blockquote style="width:',e.width,'px;">',this.quote,this.citation,"</blockquote>"," </biblia:",this.elementName,">"].join("")},o.prototype.getUrl=function(){var e=this.getIframeAttributes();return e.resourceName=e.resource,delete e.resource,t.qualifyURL(n.buildUrl("HighlightEmbed",e))},o.prototype.getIframeAttributes=function(){var e=document.getElementById("widget-options").dataset;return{width:this.width,resource:e.resourceid.split(":")[1],startPosition:e.startposition,endPosition:e.endposition}},o.prototype.getWidth=function(){return this.width},o.prototype.getHeight=function(){},i.registerPanelKindHandler("quotebuilder",{ctor:o}),o}($,util,ROUTING,ContentPaneBase,PluginWidgetPanel),ReferencePanel=function(e,t,n,i,r,o,s,a,l,u){"use strict";function c(t,r,o,s){l.call(this,t,r,o,s);var a=this;if(this.resourceInfo=null,this.references=null,this.firstBibleReference=null,this.versesWithArt=null,this.isExperiment=!1,this.initializeResourcePicker=function(){if(this.firstBibleReference){var t=this.isExperiment;t?(this.jqPickerContainer=e('<div class="passage-resource-picker exp-resource-picker"></div>'),this.jqPickerContainer.insertAfter(this.jqContent.find(".bible-reference-heading span"))):(this.jqPickerContainer=e('<div class="passage-resource-picker"></div>'),this.jqPickerContainer.prependTo(this.jqToolbar.find(".toolbar-center-section"))),this.jqPickerContainer.passageResourcePicker({initialResourceInfo:this.resourceInfo,reference:this.firstBibleReference.toUrlSafeString(),change:this.onSelectedResourceChanged.bind(this),noResultMessage:n.resourcestrings.resourcePickerNoResults,noResourcesAvailableMessage:n.resourcestrings.resourcePickerNoResources,isExperiment:t})}},this.initializeVerseArt=function(){this.versesWithArt=t.find(".bible-reference-chunk").filter('[data-verseartreference != ""]'),this.versesWithArt.length>0?this.versesWithArt.each(function(t,n){var i=e(n),r=i.data("verseartreference");a.buildVerseArt(i,r)}):e.get("/verseoftheday").done(function(e){a.buildVerseArt(t.find(".bible-reference-chunk").last(),e)})},this.jqContent=t.find("#content-bible"),this.jqContent.length){var c=this.jqContent.data("is-experiment");"boolean"==typeof c&&c&&(this.isExperiment=c)}var h=t.find(".share-button");if(h&&(this.shareButton=new ShareButton(h,{isExperiment:this.isExperiment})),this.jqContent.length){var f=this.jqContent.data();f&&this.initResourceInfo(f)}this.fnClick=function(t){var n=e(t.target).closest("a");if(n.length&&!n.is('[rel="external"]')&&!n.parent().is('[class="ad-widget"]')){if(t.preventDefault(),n.is(".register-button")){var i=window.app.lightbox.jqLightboxContent;i.empty(),window.app.lightbox.setDisplay(Lightbox.displayKinds.narrow),i.html(e('<div class="registration-loading">'+Resources.Common.getString("LoadingEllipsis")+"</div>")),e.ajax("/user/signinorregister?contentType=html",{success:function(t){var n=e(t);i.empty(),i.append(n)},error:function(e){i.html('<div class="registration-loading">Unable to load registration page.</div>')}}),window.app.lightbox.show()}return a.onLinkClick.call(a,n,t)}},this.jqContainer.click(this.fnClick),this.jqContainer.tooltip({selector:a.strTooltipSelector,fnClickStick:function(e){return e.closest("a").is('[rel="popup"]')},onLinkClick:this.fnClick,fnGetContent:function(t,r){var o,s,l=t.data();t.is('[rel="popup"][href^="#"]')?(o=e(t.attr("href")),r(o.length&&e.trim(o.text())?o.children().clone():n.resourcestrings.tooltipError)):(s=u.getForMetadata(l),s.resourceName||(s.resourceName=a.resourceInfo.resourceName),i.fetchTooltipContent(s,a.resourceInfo.resourceName,r))}}),this.initializeResourcePicker(),this.initializeVerseArt()}return c.prototype=r.extend(l),c.prototype.initResourceInfo=function(e){var i=this;e.resource&&(this.trigger(n.events.resourceChange,{newResource:e.resource,oldResource:this.resourceInfo}),this.resourceInfo=e.resource,this.setTitle()),e.coverurl&&(this.resourceInfo.coverurl=e.coverurl,this.jqToolbar.find(".toolbar-cover-section").find("img").attr("src",e.coverurl),this.isExperiment&&this.jqContent.find(".exp-cover-image").attr("src",e.coverurl)),e.reference&&(this.references=t.flatten(e.reference.split(";").map(function(e){return e.split(",")}).filter(function(e){return e.length})),this.references.length&&(this.firstBibleReference=BibleReference.tryParse(this.references[0]),setTimeout(function(){i.trigger(n.events.locationMarkerChange,{newLocation:i.firstBibleReference,resourceInfo:i.resourceInfo,bOriginIsBible:!0,panelId:i.strPanelId,isPanelMuted:i.bIsMuted})},0))),this.jqContainer.trigger(n.events.paneTitleUrlChanged,{title:r.getTitlePart(this.firstBibleReference&&this.firstBibleReference.render?this.firstBibleReference.render():null,this.resourceInfo&&this.resourceInfo.resourceName),url:s.buildUrl("BibleReference",{reference:this.firstBibleReference.toUrlSafeString(),resourceName:this.resourceInfo.resourceName})}),this.shareButton&&this.shareButton.setShareInfo(this.getCurrentPosition(),this.resourceInfo,!0)},c.prototype.setTitle=function(){var e=this.jqToolbar.find(".resource-title");e.text(this.resourceInfo.title),e.outerWidth(!0)>=this.jqToolbar.width()-e.siblings(".share-button").outerWidth(!0)-this.jqToolbar.find(".toolbar-cover-section").outerWidth(!0)-this.jqToolbar.find(".passage-resource-picker").outerWidth(!0)&&e.text(this.resourceInfo.abbreviatedTitle)},c.prototype.buildVerseArt=function(t,n){if(null!==t&&"string"==typeof n){var i="https://sermons.faithlife.com/verse-of-the-day?utm_campaign=promo-soundfaithgrowthhacking2016&utm_content=verseofthedaylightbox&utm_medium=landingpage&utm_source=biblia.com&reference="+n,r=s.buildUrl("VerseOfTheDayImage",{directory:"640x480",reference:n,extension:"png",fallbackOnFailure:!1}),o=BibleReference.tryParse(n),a=e('<div class="votd-inline"></div>'),l=e("<img />",{src:r});null!==o&&a.append(e('<h2 class="votd-inline-label"><a rel="external" href="'+i+'">Verse of the Day: '+o.toString(!0)+"</a></h2>")),a.append(e('<div class="votd-inline-embed"><a rel="external" href="'+s.buildUrl("Plugins",{Action:"bibleverse",reference:n})+'">Embed image</a>')),a.append(e('<a rel="external" href="'+i+'"></a>').append(l)),a.append(e('<div class="votd-inline-instructions"><a rel="external" class="more-link" href="'+i+'">Download</a></div>')),a.append(e('<div class="votd-sermons-logo"><a class="" href="'+i+'"><img src="/public/images/FaithlifeSermons/logo.svg"></a></div>'));var u=t.find(".bible-reference-footnotes"),c=t.find(".votd-placeholder");c?a.insertBefore(c):u?a.insertBefore(u):a.insertAfter(t)}},c.prototype.onSelectedResourceChanged=function(t,i){var r=this,o=this.getCurrentPosition();o.resourceName=i.resourceName,this.setTitle();var s=setTimeout(function(){r.jqContainer.find("#content-bible").empty().append(e('<div class="pane-loading ui"><img src="/public/images/ajax-loader.gif" />Loading...</div>'))},150),a=o.toUrl("xhtml");a?e.ajax({url:a,success:function(t){clearTimeout(s),r.jqContainer.find("#content-bible").remove(),r.jqContent=e(t),r.jqContent.appendTo(r.jqContainer),r.shareButton=new ShareButton(r.jqContainer.find(".share-button"),{isExperiment:r.isExperiment});var n=r.jqContent.data();n&&r.initResourceInfo(n),r.initializeResourcePicker(),r.initializeVerseArt()},error:function(t){if(0!==t.status){var i=t&&403==t.status?n.resourcestrings.resourcePermissionError:n.resourcestrings.resourceChangeError;r.trigger(n.events.info,{nLevel:e.fn.infobar.levels.error,strMsg:i})}}}):r.trigger(n.events.info,{nLevel:e.fn.infobar.levels.error,strMsg:n.resourcestrings.resourceChangeError})},c.prototype.getCurrentPosition=function(){var e=this.resourceInfo;return e.type=o.bible,this.references.length>1?e.reference=new Reference(this.references.join(";")):1===this.references.length&&(e.reference=BibleReference.tryParse(this.references[0])),e.forceShareUrl=!0,new u(e)},c.prototype.getPreferredPane=function(){return this.jqContent.data("preferredpane")},c.prototype.navigateTo=function(e){e.forceShareUrl=!1,this.trigger(n.events.navigationRequest,e,!1),this.unload()},c.prototype.unload=function(){l.prototype.unload.call(this),this.jqContainer.tooltip({selector:this.strTooltipSelector},"destroy"),this.shareButton&&this.shareButton.destroy(),this.jqPickerContainer&&(this.jqPickerContainer.passageResourcePicker("destroy"),this.jqPickerContainer.remove()),this.jqContainer.empty()},a.registerPanelKindHandler("reference",{ctor:c,requiresResourcePicker:!1}),c}($,_,biblia,contentTooltipUtility,util,RESOURCE_TYPES,ROUTING,ContentPaneBase,PanelBase,ResourceNavRequest),StandardResourcePanel=function(e,t,n,i,r,o,s,a,l,u){"use strict";function c(n,i,a,l){r.call(this,n,i,a,n.find(".resource-content").first(),n.find(".content-wrapper").first(),l);var u=this;this.jqReferenceInput.attr("placeholder",s.FrontEnd.getString("Headword")),this.jqReferenceInput.closest("form").submit(function(e){e.preventDefault();var t=u.jqReferenceInput.val();u.navigateTo(new o({resourceName:u.getCurrentResourceName(),urlLocationMarker:t,bPreventPropagation:!0,bIsUserInitiated:!0}),null,null,function(){r.prototype.updateMilestoneCore.call(u,!0)})}),this.jqContainer.bind(e.events.locationMarkerChange,function(e,t){u.shareButton.setShareInfo(u.getCurrentPosition(),u.resourceInfo,!1)}),this.parentId=this.jqContainer.parent(".content-pane").attr("id"),t.log("Creating panel "+i+", "+this.parentId),this.init(),this.shareButton=new ShareButton(this.jqToolbar.find(".share-button")),this.shareButton.setShareInfo(this.getCurrentPosition(),this.resourceInfo,!1)}return c.prototype=n.extend(r),c.prototype.updateMilestoneCore=function(e,t){if(!this.bLock){if(null===e)return void this.setLocationMarker(null);var n=e.data(),i=n.reference?a.tryParse(n.reference,n.urlreference,"reference"):a.tryParse(n.headword,n.urlheadword,"headword");if(i){this.triggerLocationMarkerChange(i,this.bIgnoreLinking);var o=e.closest(".content-chunk").data("resource");if(o)if(i instanceof u){var s=null,l=e.closest("p"),c=l.length?_.find((l.attr("class")||"").split(/\s+/),function(e){return _.startsWith(e,"lang-")}):null;c&&(s=c.slice(5)),this.setParallelResourceContext(o.type,null,i.render(),s)}else this.setParallelResourceContext(o.type,i)}this.setLocationMarker(i,!0),r.prototype.updateMilestoneCore.call(this,t)}},c.prototype.getCurrentPosition=function(){var e=this.resourceInfo?this.resourceInfo:{resourceName:this.getCurrentResourceName()};return this.locationCurrent instanceof l?e.reference=this.locationCurrent:this.locationCurrent instanceof u?e.headword=this.locationCurrent:this.curArticleId?e.articleId=this.curArticleId:this.curIndexedOffset&&(e.indexedOffset=this.curIndexedOffset),new o(e)},i.registerDefaultPanelHandler("resource",{ctor:c,itemBiasType:"-bibles",requiresResourcePicker:!0}),c}(biblia,log,util,ContentPaneBase,PagedResourcePanel,ResourceNavRequest,Resources,locationMarkerUtility,Reference,Headword),ReadingPlanPanel=function(e,t,n,i,r,o){"use strict";function s(n,r,s,a){function l(){var e=n.find(".reading-plan-feed");(u=e.data("feedUrl"))&&window.embeddedFaithlifeManager.addEmbedded({url:u,container:e[0],callback:function(e){e.toggleEditor(!0,{collapse:!0}),e.bind("post",function(){e.toggleEditor(!0,{collapse:!0})})}})}o.call(this,n,r,s,a);var u,c=this;this.onReloadOverview=function(t,r){c.documentId==r&&e.ajax({url:i.buildUrl("ReadingPlanSummary",{readingPlanId:c.documentId,contentType:"xhtml"}),success:function(e){n.find(".document-content").html(e),l()}})},n.on("click",".reading-plan-current-session a",function(){var n=e(this).data();e(document).trigger(t.events.startReadingReadingPlan,{readingPlanId:n.readingPlanId,sessionDate:n.sessionDate,item:n.readingItem,groupId:n.groupId})}).on("click",'.reading-plan-current-session input[type="checkbox"]',function(){var n=e(this).closest(".reading-plan-current-session").find(".reading-session-item").first().data();e(document).trigger(t.events.markReadingPlan,[n.readingPlanId,n.sessionDate])}),e(document).on(t.events.readingPlanMarked,this.onReloadOverview),l(),this.initialized=!0}return s.prototype=n.extend(o),s.prototype.getCurrentNavRequest=function(){return new ReadingPlanNavRequest({readingPlanId:this.documentId})},s.prototype.unload=function(){o.prototype.unload.call(this),e(document).off(t.events.readingPlanMarked,this.onReloadOverview)},r.registerPanelKindHandler("reading-plan",{ctor:s,requiresResourcePicker:!0}),s}($,biblia,util,ROUTING,ContentPaneBase,DocumentPanel),LibraryPanel=function(e,t,n,i,r,o,s,a,l,u){"use strict";function c(n,s,a){function u(t,n,i){return t.children(n).filter(function(t){var n=e(this);return n.offset().left+n.outerWidth()>i.pageX&&n.offset().left<i.pageX})}l.call(this,n,s,a);var c=this;this.jqContent=n.find("#library-content"),this.jqForm=this.jqContainer.find("form").first(),this.jqWrapper=this.jqContent.find(".content-wrapper"),this.jqSearchInput=this.jqForm.find("input[name='q']").first(),this.jqResourceTotal=this.jqForm.find(".total-resource-count"),this.jqSortButton=this.jqContainer.find(".library-sort-button"),this.jqSortPanel=e("#library-sort-template").tmpl();var h=this.jqWrapper.find(".library-item-info").width();this.titleLength=Math.floor(h/4),this.authorAndTypeLength=Math.floor(h/6),this.shouldTruncateTitles=function(){return t.config.tenant!==t.tenants.logosCloud},this.strFilter="",this.maxSize=0,this.pageSize=0,this.numPages=0,this.page=0;var f=this.jqContent.find(".library-chunk");if(f.length){var d=f.first().data();this.strOrderBy=d.orderby,this.strSortDirection=d.sortdirection,this.initialized=!0}this.jqHoverInformation=null,this.infoTemplate=e.template(null,e("#resource-info-template").html()),this.tooltipOptions={selector:"li.library-list-item",containerClass:"library-hover-info",bShowLoading:!1,bClickStick:!1,collision:"fit fit",fnPositioning:function(e,t){return t.closest(".library-bibles-list").length?{my:"left center",at:"right center",offset:"8px 0",collision:"fit fit",of:t}:{my:"right center",at:"left center",offset:"-8px 0",collision:"fit fit",of:t}},fnGetContent:function(t,n){var r=e(t).children("div.library-item").data("resourcename"),s=o.buildUrl("ResourceInformation",{resourceName:r});e.ajax({url:s,success:function(t,r,o){t.description=i.ellipsisize(t.description,c.hoverDescriptionLength),n(e.tmpl(c.infoTemplate,t))}})},fnInsertContent:function(t){this.html(e(t).html())},template:e.tmpl(c.infoTemplate,null)},this.init(),this.shouldTruncateTitles()&&this.jqWrapper.find(".library-item-title").each(function(){e(this).text(i.ellipsisize(e(this).text(),c.titleLength))}),this.jqWrapper.find(".library-item-resource-type",this.jqContent).add(".library-item-authors",this.jqContent).each(function(){c.shouldTruncateTitles()&&e(this).text(i.ellipsisize(e(this).text(),c.authorAndTypeLength))}),this.jqSearchInput.on("keyup",_.debounce(function(){c.jqSearchInput.val()!==c.strFilter&&c.jqSearchInput.closest("form").submit()},700)),this.jqSearchInput.closest("form").submit(function(t){t.preventDefault();var n=c.getCurrentPosition(),o=c.strFilter;i.showLoadingMask(c.jqContent),c.strFilter=c.jqSearchInput.val(),!o&&c.strFilter&&e.extend(n,{orderBy:r.relevance}),c.strFilter||c.strOrderBy!=r.relevance||e.extend(n,{orderBy:r.title}),c.navigateTo(c.createNavRequest(e.extend(n,{query:c.strFilter,start:0})))}),this.jqWrapper.delegate("a.set-default-bible-link","click",function(n){n.preventDefault();var i=e(this);e.ajax({type:"POST",url:i.attr("href"),success:function(e){var t=c.jqContent.find(".default-resource-checked"),n=i.children(".default-resource-unchecked");t.length&&t.removeClass("default-resource-checked").attr("title","Set as default Bible").addClass("default-resource-unchecked").parent().removeClass().addClass("set-default-bible-link"),n.removeClass("default-resource-unchecked").addClass("default-resource-checked").attr("title","Default Bible").parent().removeClass().addClass("dead-link"),c.strOrderBy==r.priority&&c.navigateTo(c.getCurrentPosition())},error:function(n){c.jqContent.trigger(t.events.info,{nLevel:e.fn.infobar.levels.error,strMsg:"Error setting default bible"})}})}),this.jqWrapper.delegate("a.dead-link","click",function(e){e.preventDefault()}),this.jqWrapper.delegate("div.library-item-rating","mouseenter",function(t){e(this).children("span.rating-star").each(function(){var t=e(this);t.data("old-class",t.attr("class"))})}),this.jqWrapper.delegate("div.library-item-rating","mousemove",function(t){var n=u(e(this),"span.rating-star",t);n.data("old-class")&&(n.prevAll().add(n).each(function(t){e(this).removeClass().addClass("rating-star filled")}),n.nextAll().each(function(t){e(this).removeClass().addClass("rating-star")}))}),this.jqWrapper.delegate("div.library-item-rating","mouseleave",function(t){e(this).children("span.rating-star").each(function(){var t=e(this);t.removeClass().addClass(t.data("old-class")),t.data("old-class",null)})}),this.jqWrapper.delegate("div.library-item-rating","click",function(n){var i=u(e(this),"span.rating-star",n),s=i.closest(".library-item").data(),a=i.prevAll().length+1;i.parent().children().each(function(){var t=e(this);t.data("original-class",t.data("old-class")),t.data("old-class",t.attr("class"))}),e.ajax({type:"POST",url:o.buildUrl("SetResourceRating",{resourceName:s.resourcename,rating:a}),success:function(){c.strOrderBy==r.rating&&c.navigateTo(c.getCurrentPosition())},error:function(){i.parent().children().each(function(){var t=e(this);t.data("old-class",t.data("original-class")),t.attr("class",t.data("old-class")),t.data("original-class",null)}),c.jqContent.trigger(t.events.info,{nLevel:e.fn.infobar.levels.error,strMsg:"Error setting resource rating"})}})}),this.jqSortButton.dropdown({jqPanel:c.jqSortPanel}),this.jqSortPanel.find(".library-sort-option").click(function(t){t.preventDefault(),c.navigateTo(c.createNavRequest({orderBy:e(this).data("type")})),c.jqSortButton.dropdown("clickHidePanel",t)})}return c.prototype=i.extend(l),c.prototype.titleLength=0,c.prototype.authorAndTypeLength=0,c.prototype.hoverDelay=800,c.prototype.hoverDescriptionLength=600,c.prototype.init=function(){var t=e('<div class="library-heading">filler</div>').css({position:"relative",left:-1e4}).appendTo(e("body"));this.jqContent.ajaxscroll({fnGetPage:this.ajaxScrollGetPage.bind(this),fnGetRelativePositionUrl:this.getRelativePositionUrl.bind(this),error:this.onError.bind(this),chunkload:this.onChunkLoad.bind(this),edgeTriggerDistance:2400,fnChunkRemove:function(e){e.baseTooltip({selector:"li.library-list-item"},"destroy")},bVirtualizeScrollPosition:!0,unloadTriggerScreens:1,contentChunkClass:"library-chunk",bGuessDensity:!1,nInitialChunkAdjust:-1*t.outerHeight(!0)}),t.remove()},c.prototype.reattachElement=function(){this.detachedElements=this.jqWrapper.children().detach()},c.prototype.detachElement=function(){this.detachedElements&&(this.jqWrapper.append(this.detachedElements),this.detachedElements=null)},c.prototype.createNavRequest=function(t){return new a(e.extend({},this.getCurrentPosition(),t))},c.prototype.setSortInfo=function(e,t){this.strOrderBy=e,this.strSortDirection=t,this.jqSortButton.find(".orderby").text(u.Common.getString(e))},c.prototype.onChunkLoad=function(t,n){function r(){e(this).text(i.ellipsisize(e(this).text(),o.authorAndTypeLength))}var o=this,s="up"==n?"first":"last",a=this.jqContent.find(".library-chunk:"+s);a.data("library-loaded")||(this.shouldTruncateTitles()&&(a.find("span.library-item-title").each(function(){var t=e(this);t.text(i.ellipsisize(t.text(),o.titleLength))}),a.find("div.library-item-resource-type").each(r),a.find("div.library-item-authors").each(r)),a.baseTooltip(this.tooltipOptions),a.data("library-loaded",!0)),"tryjump"===n&&this.jqResourceTotal.length&&this.jqResourceTotal.text(a.data("totalsize"))},c.prototype.ajaxScrollGetPage=function(t){var n=e(t);if(!n.length)return null;var i=n.data();return this.maxSize=i.maxsize,this.pageSize=i.pagesize,this.strFilter=i.filter,this.setSortInfo(i.orderby,i.sortdirection),this.numPages=i.numpages,this.page=Math.floor(i.start/this.pageSize),i?{content:n,prevPageUrl:i.start>0?o.buildUrl("Library",{q:this.strFilter,start:Math.max(i.start-this.pageSize,0),orderBy:this.strOrderBy,sortDirection:this.strSortDirection,contentType:"xhtml"}):null,nextPageUrl:i.start<(i.numpages-1)*this.pageSize?o.buildUrl("Library",{q:this.strFilter,start:i.start+this.pageSize,orderBy:this.strOrderBy,sortDirection:this.strSortDirection,contentType:"xhtml"}):null,indexedResourceStart:0,indexedResourceEnd:Math.floor(this.maxSize/i.pagesize*250),chunkOffset:250*this.page,chunkLength:i.maxcount/i.pagesize*250,hash:this.strFilter+"__"+i.start,targetSelector:i.offset?"#list-item-"+i.start+"-"+i.offset:null}:null},c.prototype.getRelativePositionUrl=function(e){var t=Math.round(e/100*this.maxSize),n=Math.floor(t/this.pageSize);return o.buildUrl("Library",{q:this.strFilter,start:n*this.pageSize,offset:t-n*this.pageSize,orderBy:this.strOrderBy,sortDirection:this.strSortDirection,contentType:"xhtml"})},c.prototype.onError=function(e){},c.prototype.getCurrentPosition=function(){var e=this.jqContent.scrollTop(),t=this.jqWrapper.data("top"),n=i.findElementAtTopOfScollingContainer(this.jqContent,e,t,".library-list-item"),r=n?n.closest(".library-chunk"):null;return new a({query:this.strFilter,start:r?r.data().start:0,offset:n?n.data().index:0,orderBy:this.strOrderBy,sortDirection:this.strSortDirection})},c.prototype.navigateTo=function(e){function r(){i.hideLoadingMask(o.jqContent)}var o=this,s=e.toUrl("xhtml");if(!(e instanceof a))return this.jqWrapper.find(".library-chunk").baseTooltip(null,"cancel"),void this.trigger(t.events.navigationRequest,e);this.jqContent.ajaxscroll("tryJumpTo",s,r,r),n.trackPageView(s)},c.prototype.unload=function(){this.jqWrapper.find(".library-chunk").baseTooltip(null,"destroy"),l.prototype.unload.call(this)},s.registerPanelKindHandler("library",{ctor:c,requiresResourcePicker:!1}),c}($,biblia,bibliaHistory,util,RESOURCE_ORDERS,ROUTING,ContentPaneBase,LibraryNavRequest,PanelBase,Resources),registerPanel=function(e){"use strict";function t(e,t,n){t.css("display","block"),t.text(n),e.addClass("error-input")}function n(e,t){
t.text(""),e.removeClass("error-input")}return{handleRegistration:function(i){var r=e(i.target).closest(".register-section"),o=r.find("input[name=ReadingPlanGroupId]"),s=0!==o.length?o.val():null,a=0!==r.find("input[name=ReadingPlanTemplateId]").length,l="normal";a?l="template":"57115"===s?l="30 day challenge":s&&(l="group reading plan"),window._gaq=window._gaq||[],window._gaq.push(["_trackEvent","registration","registered",l]);var u=r.find("input[name=Email]"),c=r.find("input[name=Password]"),h=!0;if(""===u.val(u.val().replace(/\s+/g,"")).val()?(t(u,r.find(".email-error"),Resources.Common.getString("ErrorMustProvideEmail")),h=!1):n(u,r.find(".email-error")),""===c.val().trim()?(t(c,r.find(".password-error"),Resources.Common.getString("ErrorMustProvidePassword")),h=!1):c.val().length<5?(t(c,r.find(".password-error"),Resources.Common.getString("ErrorPasswordTooShort")),h=!1):n(c,r.find(".password-error")),r.find(".registration-failed-error").css("display","none"),h){r.find("form").submit();var f=r.find(".registration-loading"),d=r.find(".submit-cell button");f.css("display","block"),d.prop("disabled",!0)}else i.preventDefault()}}}($),EmbeddedResourcePane=function(e,t,n,i,r){"use strict";function o(n){r.call(this,n),this.fnInitialize=function(){if(this.jqContainer.children().length){var r="minimal"===this.jqResourceContainer.data("layout"),o=this.getPanelKindHandler(this.jqResourceContainer),s=4;if(this.panelInstance=new o.ctor(this.jqResourceContainer,"embedded-resource-pane",!1,{numFontNotches:11,defaultFontNotch:s,getFontSize:function(){return s},setFontSize:function(t){var i=0,r=[];e.times(11,function(){r.push("font-size-"+i++)}),s=t,n.removeClass(r.join(" ")),n.addClass("font-size-"+s)}}),this.panelInstance&&(this.initialized||this.registerInitialHistoryState(),this.panelInstance.jqToolbar.length&&(this.jqPickerButton=this.panelInstance.jqToolbar.find(".resource-picker-button").children(".resource-title").first(),this.jqPickerButton.length&&o.requiresResourcePicker&&(n.is(".disable-resource-picker")?(this.jqPickerButton.siblings(".arrow").remove(),this.jqPickerButton.unwrap()):this.jqPickerButton&&this.jqPickerButton.resourcepicker({client:this.jqContainer.data("client"),changePickerText:!1,initialResourceInfo:this.getResourceInfo(),change:this.onSelectedResourceChanged.bind(this),itemSourceType:o.itemSourceType,itemBiasType:o.itemBiasType,titleSuffix:'&nbsp;<div class="arrow"></div>',lazy:!0,noResultMessage:i.resourcestrings.resourcePickerNoResults,noResourcesAvailableMessage:i.resourcestrings.resourcePickerNoResources}),this.initialized=!0),r&&!this.jqContainer.is(".hide-text-size-button")))){var a=t('<a class="toc-show show-normal"></a>'),l=t('<a class="text-resize-button show-normal">Aa&nbsp;<div class="arrow"></div></a>');this.panelInstance.jqToolbar.find(".toolbar-bottom-section").append(a).append(l),this.panelInstance.setMenuButton(l)}this.updateHistoryControls()}},this.fnInitialize()}return o.prototype=n.extend(r),o.create=function(e){return new o(e)},o}(_,$,util,biblia,ContentPaneBase),ReadingPlanNote=function(e,t){"use strict";function n(n){function i(){r.jqNote.on("click","a.reference",function(n){n.preventDefault(),n.stopPropagation();var i=e(this),o=i.tmplItem();r.jqNote.trigger(t.events.startReadingReadingPlan,{readingPlanId:r.readingPlanId,sessionDate:o.data.sessions[0].date,groupId:r.groupId,item:i.index()})}).on("click","a.quit",function(){return r.jqNote.trigger(t.events.deleteReadingPlan,r),!1}).on("click","a.catch-up",function(){return r.jqNote.trigger(t.events.catchUpReadingPlan,r),!1}).on("change",":checkbox",function(){var n,i=e(this);if(!i.is(":checked"))return!1;n=i.tmplItem(),r.jqNote.trigger(t.events.markReadingPlan,[n.data.id,n.data.sessions[0].date])})}var r=this;this.jqNote=n,this.data=n.tmplItem().data,this.readingPlanId=this.data.id,this.groupId=this.data.groupId,this.tmplReadingPlan=e.template(null,e("#reading-plan-template").html()),i(),this.markRead=function(t){var n=e.tmpl(r.tmplReadingPlan,t).insertAfter(r.jqNote);r.jqNote.remove(),r.jqNote=n,i()},this.getBehindCount=function(){return this.jqNote.tmplItem().data.numberBehind}}return n}($,biblia),ReadingPlanManager=function(e,t,n,i,r,o){"use strict";function s(r,o){function s(e){return e.jqNote.slideUp(200,function(){delete l.notes[e.readingPlanId],e.jqNote.remove(),Object.keys(l.notes).length||l.jqNoReadingPlans.slideDown(200)}),!1}function a(t,i){var r;i.sessions.length?(r=i.sessions[0],l.updateNotificationNumber(+l.jqNotification.text()-(t.numberBehind-i.numberBehind)),t.markRead(i),r.items.length&&l.startReading(i.id,r.date,i.groupId,0)):s(t),e(document).trigger(n.events.readingPlanMarked,i.id)}var l=this;this.jqContainer=r,this.jqNotification=o,this.jqNoReadingPlans=this.jqContainer.find(".no-reading-plans"),this.tmplReadingPlan=e.template(null,e("#reading-plan-template").html()),this.notes={},this.readingPlanChunkSize=3,this.jqMoreLink=this.jqContainer.find(".more-link"),this.appendPlan=function(n){var r,o=this.jqContainer.find(".reading-plan:visible:last");return t.each(n.items,function(e){e.url=null!==e.startReference?i.buildUrl("ResourceReference",{resourceName:e.resourceName,reference:e.startReference}):i.buildUrl("Offset",{resourceName:e.resourceName,offset:e.startOffset})}),r=e.tmpl(l.tmplReadingPlan,n),o.length?r.insertAfter(o):r.insertBefore(l.jqMoreLink),l.notes[n.id]=new ReadingPlanNote(r)},this.displayAuthError=function(e){r.trigger(n.events.readingPlanError,e)},this.jqMoreLink.on("click",function(){l.jqContainer.find("li:hidden").slice(0,l.readingPlanChunkSize).slideDown(200),l.jqContainer.find("li:hidden").length||l.jqMoreLink.hide()}),e(document).on(n.events.startReadingReadingPlan,function(e,t){l.startReading(t.readingPlanId,t.sessionDate,t.groupId,t.item)}),e(document).on(n.events.markReadingPlan,function(t,n,r){var o=i.buildUrl("ReadingPlanMarkRead",{readingPlanId:n,sessionDate:r,contentType:"json"});e.ajax({url:o,type:"POST",success:function(e){a(l.notes[n],e)},error:l.displayAuthError})}),r.on(n.events.catchUpReadingPlan,function(t,n){var r=i.buildUrl("ReadingPlanCatchUp",{readingPlanId:n.readingPlanId,contentType:"json"});e.ajax({url:r,type:"POST",success:function(e){a(n,e)},error:l.displayAuthError})}),r.on(n.events.deleteReadingPlan,function(t,n){e.ajax({url:i.buildUrl("ReadingPlanQuit",{readingPlanId:n.readingPlanId}),type:"POST",success:function(){s(n)}})})}return s.prototype.loadReadingPlans=function(){var t=this;e.get(i.buildUrl("GetReadingPlans"),function(n){n&&n.results&&(n.results.length&&(t.jqContainer.children().first().remove(),e.each(n.results,function(e,n){var i=t.appendPlan(n);e>=t.readingPlanChunkSize&&(i.jqNote.hide(),t.jqMoreLink.show())}),n.results.length<=t.readingPlanChunkSize&&t.jqMoreLink.hide()),t.updateNotification(n.results))}).error(t.displayAuthError)},s.prototype.addReadingPlan=function(t){var n=this;e.post(i.buildUrl("AddReadingPlan",t?{templateId:t}:null),function(e){n.jqNoReadingPlans.hide(),n.appendPlan(e).jqNote.hide().slideDown(200)})},s.prototype.updateNotification=function(e){for(var t=0,n=0,i=e.length;n<i;n++)t+=e[n].numberBehind;this.updateNotificationNumber(t)},s.prototype.updateNotificationNumber=function(e){e>0?this.jqNotification.attr("title",["Behind by ",e," reading",1!=e?"s":""].join("")).css("visibility","visible").children(".content").text(e).show():this.jqNotification.hide()},s.prototype.startReading=function(t,o,s,a){var l=this;e.ajax({url:i.buildUrl("StartReading"),data:{readingPlanId:t,sessionDate:o,groupId:s,item:a},success:function(e){var i=new r({resourceName:e.resourceName,indexedOffset:e.offset,type:e.type});l.jqContainer.trigger(n.events.navigationRequest,i),s&&l.jqContainer.trigger(n.events.navigationRequest,new ReadingPlanNavRequest({readingPlanId:t,locationRequest:i}))},error:l.displayAuthError})},s.tmplMarker=e.template(null,e("#reading-marker-template").html()),s.processContentChunk=function(t){function i(e){return{start:o.FrontEnd.getString("StartReading"),continue:o.FrontEnd.getString("KeepReading"),stop:o.FrontEnd.getString("StopReading")}[e]}var a=t.find(".reading-marker");return!!a.length&&(a.domSplit("p"),a.each(function(t,o){function a(t,n){var i,r=t.tmplItem(),o=t.closest(".resource-reading-marker"),s=o.closest(".content-wrapper").find(".resource-reading-marker");return n.preventDefault(),n.stopPropagation(),i=s.index(o),o.add(i>0?e(s[i-1]):null).remove(),r}var l=e(o),u=l.data(),c={type:/reading-(start|stop|continue)/.exec(l.attr("class"))[1],title:u.title||"",displayDate:u.displaydate,date:u.date,readingPlanId:u.readingplanid,nextTitle:u.nexttitle,nextResource:u.nextresource,nextReference:u.nextreference,nextStartOffset:u.nextstartoffset},h=e.tmpl(s.tmplMarker,c,{getDisplayType:i});"stop"==c.type&&h.find("a.mark-read").click(function(t){var i=a(e(this),t);e(document).trigger(n.events.markReadingPlan,[i.data.readingPlanId,i.data.date])}).bind("mouseenter mouseleave",!1),"continue"==c.type&&h.find("a.continue-to-next").click(function(t){var i=a(e(this),t);e(document).trigger(n.events.navigationRequest,new r({reference:i.data.nextReference,indexedOffset:i.data.nextStartOffset,resourceName:i.data.nextResource}))}),l.replaceWith(h)}),!0)},s}($,_,biblia,ROUTING,ResourceNavRequest,Resources),GoBoxHandler=function(e,t,n,i){"use strict";function r(r,o,s){function a(i){o&&o.show(),e.ajax({url:i,success:function(e){var i;e.reference?(i=new t({datatype:e.dataType}),i.setReference(e.reference)):i=new n({query:e.query,resources:SearchController.entireLibraryResource}),l(i)},complete:function(){setTimeout(function(){r.find('input[type="text"]').val(""),o&&o.hide()},300)}})}function l(e){var t=e instanceof n&&!s?i.events.searchRequest:i.events.navigationRequest;r.trigger(t,e)}r.submit(function(e){e.preventDefault(),r.find("input[name='query']").first().val()&&a(r.attr("action")+"?"+r.serialize()+"&contentType=json")})}return r.create=function(e,t,n){return new r(e,t,n)},r}($,ResourceNavRequest,SearchNavigationRequest,biblia),BiblesSidebarSection=function(e,t,n,i){"use strict";function r(r,o,s,a){function l(i){var a=r.find(".resource-item");if(s=i||s,a.removeClass("selected"),s&&(o.text(s.type===n.bible?s.abbreviatedTitle:""),a.filter(function(){var e=t(this).data();return e&&s&&e.resourcename==s.resourceName}).addClass("selected")),s&&s.type===n.bible&&!e.any(c,function(e){return s&&e.resourceName===s.resourceName})){var l=t.tmpl(h,s);l.find(".resource-item").addClass("selected"),u?u.replaceWith(l):r.find(".back-link").after(l),u=l}else u&&u.length&&(u.remove(),u=null)}var u,c,h=t.template(null,t("#go-resources-bibles-template").html());t.ajax(i.buildUrl("GetDynamicTranslations",{resourceName:"fsb"})).success(function(e){var n=t.tmpl(h,e.resources);c=e.resources,r.append(n),l()}),l(s),t(document).bind(biblia.events.primaryResourceChange,function(e,t){l(t)}),r.on("click","a",function(e){var n=t(this),i=ResourceNavRequest.getForMetadata(n.data());i&&(i.setReference(a()),r.trigger(biblia.events.navigationRequest,i),e.preventDefault(),e.stopPropagation())})}return r}(_,$,RESOURCE_TYPES,ROUTING),ResourcesSidebarSection=function(e,t,n,i,r,o){"use strict";function s(s,a,l,u){var c=s.find(".resources-library"),h=s.find(".resources-section"),f=s.find(".bibles-section"),d={duration:250,easing:"easeInOutQuad",hideAfter:!0};s.on("click","a",function(i){var r=e(this),o=t.getForMetadata(r.data());o&&(s.trigger(n.events.navigationRequest,o),i.preventDefault())}),s.on("click",".resources-bibles",function(){s.removeClass("resources-section-selected bibles-section-selected"),i.slide(h,f,"left",function(){s.addClass("bibles-section-selected")},d)}),s.on("click",".bibles-section .back-link",function(){s.removeClass("resources-section-selected bibles-section-selected"),i.slide(f,h,"right",function(){s.addClass("resources-section-selected")},d)}),s.on("click",".resources-library a",function(e){s.trigger(n.events.navigationRequest,new r),e.preventDefault()}),a===n.paneGroupClasses.library&&c.addClass("selected"),e(document).bind(n.events.paneGroupChange,function(e,t){c.toggleClass("selected",t===n.paneGroupClasses.library)}),new o(f,h.find(".current-resource"),l,u)}return s.create=function(e,t,n,i){return new s(e,t,n,i)},s}($,ResourceNavRequest,biblia,util,LibraryNavRequest,BiblesSidebarSection),FavoritesSectionHandler=function(e,t,n,i,r,o,s,a){"use strict";function l(l){function u(n,i){var r=e("<ul></ul>");if(p=n,n){var o,s=t.where(y,{id:n})[0];d=s.title,o=e.tmpl(b,{title:d,isParent:!0,isFolder:!0}),o.find(".title a").on("click",function(){return R||u(s.parentId,"right"),!1}),r.append(o)}else d=null;t.each(t.where(y,{parentId:n}),function(t){var n=e.tmpl(b,{title:t.title,isParent:!1,isFolder:"folder"==t.kind,id:t.id});r.append(n)}),i?(g.append(r),util.slide(f,r,i,function(){f.remove(),f=r,R=!1},{duration:200}),R=!0):(g.empty().append(r),f=r)}function c(e,t,n){var i=n&&"right"==n.toLowerCase()?v:m,r=e?e.render()+(t.abbreviatedTitle?" ("+t.abbreviatedTitle+")":""):t.title;i.show().find(".reference").text(r).attr("title",r),i.data({title:r,resourceName:t.resourceName,resourceLocation:e})}function h(){l.trigger(a.events.info,{nLevel:e.fn.infobar.levels.error,strMsg:document.getElementById("error-while-accessing-favorites").innerHTML})}var f,d,p,g=l.find(".favorites-list"),m=l.find(".add.left-panel"),v=l.find(".add.right-panel"),b=e.template(null,e("#go-favorites-template").html()),y=[],R=!1;user.isAuthenticated&&(e.get(r.buildUrl("ListFavorites"),function(e){y=e.favorites,u(),l.find(".favorites-list, .add-favorite-buttons").show(),l.find(".search-ajax-loading").hide()}).error(h),l.on("click","ul .title a",function(){var r=e(this).parents("li"),o=t.first(t.where(y,{id:r.data().id}));return"resource"==o.kind?l.trigger(a.events.navigationRequest,new n({resourceName:o.resourceFavorite.resourceName,datatype:o.resourceFavorite.resourceType,headword:o.resourceFavorite.headword,reference:o.resourceFavorite.reference,indexedOffset:o.resourceFavorite.indexedOffset})):"readingPlan"==o.kind?e(document).trigger(a.events.navigationRequest,new i({readingPlanId:o.readingPlanFavorite.readingPlanId})):"folder"!=o.kind||R||u(o.id,"left"),!1}),l.find(".add").on("click",function(){var t=e(this).data(),n=t.resourceLocation instanceof o?t.resourceLocation.toUrlSafeString():null,i=t.resourceLocation instanceof s?t.resourceLocation.toUrlSafeString():null,a=t.resourceName,l=r.buildUrl("AddFavorite",{title:t.title,folderName:d,resourceName:a,reference:n,headword:i});e.post(l,function(r){var o=e.tmpl(b,{title:t.title,isParent:!1,isFolder:!1,id:r.id}).hide();y.push({title:t.title,id:r.id,parentId:p,kind:"resource",resourceFavorite:{resourceName:a,reference:n,headword:i}}),o.appendTo(f).slideDown(200)}).error(h)}),l.on("click","li .delete-button",function(){var n=e(this).parent("li"),i=n.data().id;e.post(r.buildUrl("DeleteFavorite",{favoriteId:i}),function(e){n.slideUp(200,function(){e.success?(n.remove(),y=t.reject(y,function(e){return e.id==i})):h()})}).error(h)}),e(document).bind(a.events.locationMarkerChange,function(e,t){var n;t.isPanelMuted||(n=-1!=t.panelId.indexOf("left")?"left":-1!=t.panelId.indexOf("right")?"right":null,c(t.newLocation,t.resourceInfo,n))}),e(document).bind(a.events.updateFavoriteLinks,function(e,n){t.each(n.favoriteInfos,function(e){(e.locationMarker||e.resourceInfo)&&c(e.locationMarker,e.resourceInfo,e.side)})}),e(document).bind(a.events.resourceChange,function(e,t){var n,i=m.data().resourceName,r=v.data().resourceName;t.oldResource&&(t.oldResource.resourceName==i?n="left":t.oldResource.resourceName==r&&(n="right"),n&&c(null,t.newResource,n))}))}return l.create=function(e){return new l(e)},l}($,_,ResourceNavRequest,ReadingPlanNavRequest,ROUTING,Reference,Headword,biblia),TabController=function(){"use strict";function e(e){if(!e||1!==e.length)throw new Error("invalid container");this.container=e}return e.prototype.matches=function(e){return this.container.length==e.length==1&&this.container[0]==e[0]},e}(),HomeController=function(e,t,n){"use strict";function i(n){t.call(this,n),GoBoxHandler.create(this.container.find("form").first(),this.container.find("#go-loading-indicator")),this.entireLibraryToken="ENTIRE_LIBRARY",this.lastViewClass="",this.initExpanders=function(){function t(e){e.siblings(".expander-content:first:not(:empty)").slideDown().parent().addClass("expanded").closest(".sidebar-section").addClass("expanded")}function n(e){e.siblings(".expander-content:first").slideUp().parent().removeClass("expanded").closest(".sidebar-section").removeClass("expanded")}function i(i){var r=e(this);r.parent().hasClass("expanded")?n(r):t(r)}this.container.on("click",".expander:not(.disabled) .expander-title",i)},this.initExpanders(),this.container.on("click",".language-option",function(){e.ajax({type:"POST",url:"/setlanguage",data:{languageCode:e(this).attr("value")},success:function(){location.reload()}})}),this.readingPlanManager=new ReadingPlanManager(this.container.find(".reading-plans-section"),this.container.find("#reading-plans .notification-icon")),user.isAuthenticated&&this.readingPlanManager.loadReadingPlans()}return i.prototype=n.extend(t),i.prototype.saveViewClass=function(e){this.lastViewClass=e},i.prototype.getViewClass=function(){return this.lastViewClass},i}($,TabController,util),GoController=function(e,t,n,i,r){"use strict";function o(t,o,s,a){e.call(this,t);var l={go:0,resources:1,favorites:2};this.jqResourcesSection=this.container.find("#go-pane-resources"),this.jqGoSection=this.container.find("#go-pane-go"),this.jqFavoritesSection=this.container.find("#go-pane-favorites"),this.container.tabs({active:o===biblia.paneGroupClasses.library?l.resources:l.go}),this.container.find(".go-sub-tabs").css("visibility","visible"),n.create(this.jqGoSection.find("form").first(),this.jqGoSection.find(".search-ajax-loading")),i.create(this.jqResourcesSection,o,s,a),r.create(this.jqFavoritesSection)}return o.prototype=t.extend(e),o}(TabController,util,GoBoxHandler,ResourcesSidebarSection,FavoritesSectionHandler),DailyDevotional=function(e,t,n,i,r){"use strict";function o(o){var s=e.template(null,e("#devotion-item-template").html()),a=(new Date).toISOString();this.jqDevotionalItem=e.tmpl(s,o),this.jqDevotionalItem.on("click","input[type=checkbox]",function(i){var l=this,u=e(l).closest("li");l.checked?e.post(t.buildUrl("MarkDevotionalRead",{resourceName:o.resourceName,timeRead:a,timezoneOffset:r.timezoneOffset}),function(t){u.replaceWith(e.tmpl(s,t.devotion))}).error(function(){l.checked=!1,jqContainer.trigger(n.events.info,{nLevel:e.fn.infobar.levels.error,strMsg:document.getElementById("error-while-marking-devotional-read").innerHTML})}):i.preventDefault()}),this.jqDevotionalItem.on("click","a",function(){e(this).trigger(n.events.navigationRequest,new i({resourceName:o.resourceName,reference:o.nextReadingReference}))})}return o}($,ROUTING,biblia,ResourceNavRequest,util),DevotionsController=function(e,t,n,i,r,o,s){"use strict";function a(a){function l(){a.toggleClass("sidebar-pane-error",!0)}n.call(this,a);var u,c,h=e.tmpl(e("#add-devotion-template").html()),f=h.find("#devotion-type-menu"),d=h.find("#daily-devotionals-menu"),p=h.find("#reading-plan-templates-menu"),g=a.find(".add-devotional"),m=a.find(".devotionals-section"),v=e("<p>No devotional resources to add.</p>");user.isAuthenticated&&(c=new o(this.container.find(".reading-plans-section"),e("")),c.loadReadingPlans(),g.dropdown(t.extend({jqPanel:h,strBtnActiveClass:"active",strBtnPos:"right bottom",strPnlPos:"right top",fnOnHide:function(){f.show(),d.hide(),p.hide()}})),e.get(s.buildUrl("ListDevotionals",{timezoneOffset:i.timezoneOffset}),function(e){t.each(e.devotionals,function(e){m.append(new DailyDevotional(e).jqDevotionalItem)})}),e.get(s.buildUrl("GetReadingPlanTemplates",{contentType:"json"}),function(n){var i=p.empty(),r=e("<ul></ul>").appendTo(i);t.each(n.templates,function(e){r.append('<li data-templateid="'+e.templateId+'">'+e.title+"</li>")})}),e.get(s.buildUrl("AvailableDevotionals"),function(n){d.empty(),n.devotionals.length?(u=e("<ul></ul>").appendTo(d),t.each(n.devotionals,function(e){u.append('<li data-resourcename="'+e.resourceName+'">'+e.resourceTitle+"</li>")})):d.empty().append(v)}),f.find("li").on("click",function(){return f.hide(),"daily-devotional"===e(this).attr("class")?d.show():p.show(),!1}),p.on("click","li",function(t){c.addReadingPlan(e(this).data().templateid),g.dropdown("clickHidePanel",t)}),d.on("click","li",function(t){var n=e(this),o=n.data().resourcename;g.dropdown("clickHidePanel",t),e.post(s.buildUrl("AddDevotional",{resourceName:o,timezoneOffset:i.timezoneOffset}),function(e){m.append(new DailyDevotional(e.devotional).jqDevotionalItem),n.remove(),u.children().length||u.replaceWith(v)}).error(function(){a.trigger(r.events.info,{nLevel:e.fn.infobar.levels.error,strMsg:Resources.FrontEnd.getString("ErrorWhileAddingDevotional")})})}),a.bind(r.events.readingPlanError,l))}return a.prototype=i.extend(n),a}($,_,TabController,util,biblia,ReadingPlanManager,ROUTING),SearchController=function(e,t,n,i,r){"use strict";function o(n,r,s){t.call(this,n);var a=this;s=s||o.topBibles,this.form=this.container.find("form").first(),this.jqSearchInput=this.form.find("input").first().filterInput({showClear:!1,rightMargin:38}),this.template=e.template(null,e("#search-results-template").html()),this.jqResourceSelector=r,this.jqLoadingIndicator=e('<div class="search-ajax-loading ui"><img src="/public/images/ajax-loader.gif" />'+Resources.Common.getString("LoadingEllipsis")+"</div>"),this.strUrl=null,this.params=null,this.isTabSelected=!1,this.hasSelectedSearchTarget=!1,this.injectedResources={},this.injectedResources[i.tenants.biblia]=[o.openResources,o.topBibles,o.entireLibraryResource],this.injectedResources[i.tenants.faithlifeReader]=[o.bible,o.bibleAndNotes,o.fsbCollection,o.lexhamDictionary,o.openResources,o.topBibles,o.entireLibraryResource],this.injectedResources[i.tenants.logosCloud]=[o.openResources,o.topBibles,o.entireLibraryResource],this.initResourcePicker=function(){a.jqResourceSelector.resourcepicker({initialResourceInfo:a.resourceInfo,change:a.onSelectedResourceChanged.bind(a),useAbbreviatedTitlesOnly:!0,itemSourceType:"",topItemsCount:0,pickerDropDownOrigin:"left top",pickerButtonOrigin:"left bottom",pickerDropDownOffset:"-2 3",lazy:!0,noResultMessage:i.resourcestrings.resourcePickerNoResults,noResourcesAvailableMessage:i.resourcestrings.resourcePickerNoResources,injectResources:a.injectedResources[i.config.tenant]})},this.setCurrentResource(s),e(document).bind(i.events.primaryResourceChange,function(e,t){a.isTabSelected||a.hasSelectedSearchTarget||a.setCurrentResource(t)}),this.getTitle=function(){return this.initResourcePicker(),this.jqTitle},this.container.delegate(".search-result","click",function(t){t.preventDefault();var n=e(this),r=n.tmplItem();if(n.radioClass("selected"),n.length&&r&&r.data){var o=r.data.nav;o&&a.container.trigger(i.events.navigationRequest,o)}}),this.form.submit(function(t){t.preventDefault();var n=e(this);a.requestResults(n.attr("action"),{query:n.find("input[name='query']").first().val(),resources:n.find("input[name='resources']").first().val(),contentType:"js"})}),e(document).bind(i.events.searchRequest,function(e,t){if(!t.query)return void log.log("received invalid search request: no query",t);log.log("received search request",t),a.runSearch(t.query,t.resources)}),e(document).bind(i.events.changeTab,function(e,t){a.isTabSelected=t===i.tabs.search})}return o.prototype=n.extend(t),o.prototype.runSearch=function(e,t){this.form.find("input[name='query']").first().val(e),this.form.find("input.input-hint").focus();for(var n in this.injectedResources[i.config.tenant]){var r=this.injectedResources[i.config.tenant][n];t==r.resourceName&&(t=r)}var s=t||o.entireLibraryResource;this.jqResourceSelector.resourcepicker("selectItem",s),this.setCurrentResource(s)},o.prototype.setCurrentResource=function(e){e&&(this.resourceInfo=e,this.initResourcePicker(),this.form.find("input[name='resources']").val(e.resourceName).submit())},o.prototype.requestResults=function(t,n){function s(){a.strUrl=t,a.params=n;var i=t+"?"+e.param(n),o=a.container.find("#search-results-container");o.ajaxscroll({fnGetPage:a.getPage.bind(a),chunkload:a.showLoading.bind(a),error:a.onError.bind(a),edgeTriggerDistance:400,unloadTriggerScreens:-1,bVirtualizeScrollPosition:!1,initialPageUrl:i,clearInitialContent:!0}).append(a.jqLoadingIndicator),o.referenceCompare(),r.trackPageView(i)}var a=this,l=n.query;!function(){a.currentRequest&&(a.currentRequest.abort(),a.currentRequest=null)}(),l&&e.trim(l)&&(n.resources==o.openResources.resourceName?a.container.trigger(i.events.openResourceRequest,[function(e){var t=[];for(var i in e)e[i].resourceName&&t.push(e[i].resourceName);n.resources=t.join(","),s()}]):n.resources==o.bible.resourceName?a.container.trigger(i.events.obtainLeftPaneBible,function(e){n.resources=e,s()}):n.resources==o.bibleAndNotes.resourceName?a.container.trigger(i.events.obtainLeftPaneBible,function(e){n.resources=e+",fsb",s()}):n.resources==o.fsbCollection.resourceName?(n.resources="fsbinfographics,fsbphotos,fsbvideos",s()):n.resources==o.lexhamDictionary.resourceName?(n.resources="lbd",s()):s())},o.prototype.onError=function(){this.jqSearchInput.filterInput("setResultCount","Error."),this.jqLoadingIndicator.detach()},o.prototype.getPage=function(t){var n={hitCount:t.hitCount,resultCount:t.resultCount,results:[],phrases:t.phrases};e.each(t.results,function(e,t){var i=new ResourceNavRequest({type:t.resourceType,resourceName:t.resourceName});t.indexedOffset?i.indexedOffset=t.indexedOffset:t.reference&&i.setReference(t.reference),n.results.push({nav:i,title:t.title,resourceTitle:t.resourceTitle,resourceAbbreviatedTitle:t.resourceAbbreviatedTitle,preview:t.preview})});var i=e('<div class="content-chunk"></div>').append(e.tmpl(this.template,n));return i.children().length||i.append(e("<div></div>").attr("id","search-result-summary").text(Resources.Common.getString("NoResultsFound"))),this.jqSearchInput.filterInput("setResultCount",t.hitCount),this.params.start=t.start+t.limit,{content:i,prevPageUrl:null,nextPageUrl:t.start+t.limit>=t.resultCount?null:this.strUrl+"?"+e.param(this.params),chunkloadData:t.start+t.limit<t.resultCount}},o.prototype.showLoading=function(e,t,n,i,r){var o=this.container.find("#search-results-container");r?o.find(".content-chunk:last").append(this.jqLoadingIndicator):this.jqLoadingIndicator.detach()},o.prototype.onSelectedResourceChanged=function(e,t){this.setCurrentResource(t),this.hasSelectedSearchTarget=!0},o.entireLibraryResource={resourceName:"ENTIRE_LIBRARY",title:Resources.FrontEnd.getString("EntireLibrary"),type:"CUSTOM",abbreviatedTitle:Resources.FrontEnd.getString("EntireLibraryAbbreviated"),authors:[]},o.topBibles={resourceName:"TOP_BIBLES",title:Resources.FrontEnd.getString("TopBibles"),type:"CUSTOM",abbreviatedTitle:Resources.FrontEnd.getString("TopBiblesAbbreviated"),authors:[]},o.openResources={resourceName:"OPEN_RESOURCES",title:Resources.FrontEnd.getString("OpenBooks"),type:"CUSTOM",abbreviatedTitle:Resources.FrontEnd.getString("OpenBooksAbbreviated"),authors:[]},o.bibleAndNotes={resourceName:"BIBLE_AND_NOTES",title:Resources.FrontEnd.getString("BibleAndNotes"),type:"CUSTOM",abbreviatedTitle:Resources.FrontEnd.getString("BibleAndNotesAbbreviated"),authors:[]},o.bible={resourceName:"BIBLE",title:Resources.FrontEnd.getString("Bible"),type:"CUSTOM",abbreviatedTitle:Resources.FrontEnd.getString("BibleAbbreviated"),authors:[]},o.lexhamDictionary={resourceName:"LEXHAM_BIBLE_DICTIONARY",title:Resources.FrontEnd.getString("LexhamBibleDictionary"),type:"CUSTOM",abbreviatedTitle:Resources.FrontEnd.getString("LexhamBibleDictionaryAbbreviated")},o.fsbCollection={resourceName:"fsbCollections",title:Resources.FrontEnd.getString("InfographicsImagesVideos"),type:"CUSTOM",abbreviatedTitle:Resources.FrontEnd.getString("InfographicsImagesVideosAbbreviated"),authors:[]},o}($,TabController,util,biblia,bibliaHistory),NotesController=function(e,t,n,i,r,o){"use strict";function s(r){function s(e,t,n,i,o){h.curReference=e,h.curResource=n,r.find(".community-notes-verse").text(t),h.notesApi&&h.notesApi.load({reference:e,resource:n,resourceVersion:i,hasExistingNote:o})}function a(t,n,i){u&&u.abort(),u=e.ajax(o.buildUrl("GetResourceReferenceInfo",{renderedReference:t.replace(":","."),resourceName:n}),{success:function(e){s(e.reference,e.renderedReference,e.resourceName,e.resourceVersion,i)}})}i.call(this,r);var l,u,c=document.getElementById("community-notes-container"),h=this;this.notesApi=null,this.curReference="",this.curResource="",l=t.throttle(a,300),e(window.document).bind(n.events.locationMarkerChange,function(e,t){t.bOriginIsBible&&l(t.newLocation.render(),t.resourceInfo.resourceName)}),e(window.document).bind(n.events.communityNoteSelected,function(e,t){a(t.renderedReference,t.resource,!0)}),window.embeddedFaithlifeManager.addEmbedded({url:"/v1/notes",container:c,callback:function(e){h.notesApi=e,r.on("click",".community-post-toggle",function(){e.toggleEditor()}),e.toggleEditor(!1),h.curReference&&h.curResource&&a(h.curReference,h.curResource,!0)}})}return s.prototype=r.extend(i),s}($,_,biblia,TabController,util,ROUTING),TabStripHandler=function(e,t,n,i){"use strict";function r(e,t,n){var i=e.offset(),r=t-i.left,o=n-i.top,s=e.width(),a=e.height();return o<0||r<0||o>=a||r>=s}function o(o){function f(e){return t.findWhere(o.getPanes(),{strPaneId:e})}function d(e){return w.find('.panel-tab-wrapper[data-pane-id="'+e+'"]')}function p(){var e=C.scrollLeft(),t=w.width(),n=C.width();y.toggle(0!==e),R.toggle(t-e>n)}function g(e,n){function i(){o.tab.removeClass("minimal"),o.tab.addClass("abbreviated"),o.abbreviatedSize||(o.abbreviatedSize=o.tab.width()),a=t.sortedIndex(P.abbreviated,o,"abbreviatedSize"),P.abbreviated.splice(a,0,o)}var r,o,s,a,l=w.children(".panel-tab-wrapper");if(0!==l.length){if(r=C.width(),s=r>x||r===x&&n,x=r,s)for(;w.width()<=r;){var u=!1;if(0!==P.minimal.length?(o=P.minimal[P.minimal.length-1],w.width()-o.minimalSize+o.abbreviatedSize<=r&&(u=!0,P.minimal.pop(),i())):0!==P.abbreviated.length&&(o=P.abbreviated[P.abbreviated.length-1],w.width()-o.abbreviatedSize+o.originalSize<=r&&(u=!0,o.tab.removeClass("abbreviated"),P.abbreviated.pop(),a=t.sortedIndex(P.original,o,"originalSize"),P.original.splice(a,0,o))),!u)break}else for(;w.width()>r;)if(0!==P.original.length)o=P.original.pop(),i();else{if(0===P.abbreviated.length)break;o=P.abbreviated.pop(),o.tab.addClass("minimal"),o.minimalSize||(o.minimalSize=o.tab.width()),P.minimal.splice(0,0,o)}p()}}function m(e){var t=e.panelInstance.panelKind,n=e.getResourceInfo(),i={paneId:e.strPaneId};if(e.panelInstance.interactiveInfo)i.coverUrl=e.panelInstance.interactiveInfo.coverUrl,i.title=e.panelInstance.interactiveInfo.title,i.abbreviatedTitle=e.panelInstance.interactiveInfo.title;else if(n)i.coverUrl=n.coverUrl,i.title=n.title,i.abbreviatedTitle=n.abbreviatedTitle;else{if(!t)return null;var r;e.panelInstance.getTabTitles&&(r=e.panelInstance.getTabTitles()),i.iconTemplate=t.iconTemplate,r?(i.title=r.tabTitle,i.abbreviatedTitle=r.abbreviatedTitle):(i.title=t.title,i.abbreviatedTitle=t.title)}return s.tmpl(i)}var v=o.container.parent(".main-layout-container"),b=o.container.find(".tab-strip-container"),y=b.find(".left-tab-scroll-arrow"),R=b.find(".right-tab-scroll-arrow"),C=b.find(".tab-strip-scroll-area"),w=C.find(".tab-strip"),x=b.width(),k=null,S=null,T=null,P={original:[],abbreviated:[],minimal:[]},_=t.throttle(function(t){var n,i,r,o,s,a,l=e(t.target),u=t.originalEvent.pageX-w.offset().left;l[0]===C[0]?n=w.children(".drop-location-indicator").last():l.hasClass("drop-location-indicator")?n=l:(i=l.closest(".panel-tab-wrapper"),r=i.prev(),o=r.position().left,s=i.next(),a=s.position().left,n=Math.abs(u-o)<Math.abs(u-a)?r:s),n.radioClass("active")},u,{trailing:!1}),I=t.throttle(function(s){
var a=s.originalEvent.pageX,l=s.originalEvent.pageY,u=a/window.innerWidth,c=o.getSide(),h=c===n.left&&u<.5||c===n.right&&u>=.5,f=o.getPanes().length,d=o.canExpand(),p={},g=0!==v.find(".tab-strip-container").filter(function(t,n){return!r(e(n),a,l)}).length;if(p[n.left]="over-left",p[n.right]="over-right",g&&(h&&f>1||!h&&!d))return v.removeClass("dragging"),void(T=null);v.addClass("dragging"),T=o.getCurrentDisplayState()===i.paneStates.expanded||d&&1===f&&u>.25&&u<.75?"Both":u<.5?n.left:n.right,v.removeClass(t.values(p).join(" ")),v.addClass(p[T])},c,{trailing:!1});this.getPaneByPanelId=function(e){return t.findWhere(o.getPanes(),{panelInstance:{strPanelId:e}})},this.container=b,this.addTab=function(e){var n,i,r=m(e),o=r.filter(".panel-tab-wrapper"),s=w.children(".drop-location-indicator.active");s.removeClass("active"),s&&0!==s.length?r.insertAfter(s):w.append(r),n={tab:o,originalSize:o.width()},i=t.sortedIndex(P.original,n,"originalSize"),P.original.splice(i,0,n),g()},this.removeTab=function(e){var n=d(e);t.forOwn(P,function(e){t.remove(e,function(e){return e.tab[0]===n[0]})}),n.push(n.next(".drop-location-indicator")[0]),n.remove(),g(null,!0)},this.setSelectedTab=function(e){d(e).radioClass("selected")},w.on("click",".panel-tab-wrapper",function(){var t=e(this).data().paneId,n=f(t);n&&o.currentPane!==n&&o.attachPane(n)}),w.on("click",".tab-close-button",function(){var t=e(this).parent().data().paneId,n=f(t);o.closePane(n)}),w.on("dragstart",".panel-tab",function(t){var n=e(this).parent(".panel-tab-wrapper"),i=n.data().paneId;t.originalEvent.dataTransfer.setData("Text",""),S=f(i),o.unsetCurrentPane(S),setTimeout(function(){n.radioClass("dragging")},0)}),w.on("dragend",function(t){if(S){var n=v.find(".drop-location-indicator.active"),r=w.contains(n),s=e(t.target).parents(".panel-tab-wrapper"),a=o.getSide(),l=null;setTimeout(function(){s.removeClass("dragging")},0),0!==n.length&&!r||T&&T!==a&&"Both"!==T?o.transferPane(S):0!==n.length?(n.removeClass("active"),o.attachPane(S),s.prev()[0]!==n[0]&&s.next()[0]!==n[0]&&(s.push(s.next(".drop-location-indicator")[0]),s.insertAfter(n))):(o.attachPane(S),"Both"===T?l=i.paneStates.expanded:T===a&&(l=i.paneStates.normal),l&&S.setDisplayState(l)),v.removeClass("dragging"),S=null,t.preventDefault()}}),w.on("drop",function(e){e.preventDefault()}),C.on("dragover",function(e){var t=o.getPanes().length,n=0!==v.find(".panel-tab-wrapper.dragging").length;0!==t&&n&&(_(e),e.preventDefault())}),C.on("dragleave",function(e){r(C,e.originalEvent.pageX,e.originalEvent.pageY)&&w.children(".drop-location-indicator").removeClass("active")}),b.on("mousedown",".left-tab-scroll-arrow, .right-tab-scroll-arrow",function(){function t(){n+=(i?-1:1)*a,C.scrollLeft(n),clearTimeout(k),k=setTimeout(t,l)}var n=C.scrollLeft(),i=e(this).is(".left-tab-scroll-arrow");t()}),b.on("mouseup mouseleave",".left-tab-scroll-arrow, .right-tab-scroll-arrow",function(){clearTimeout(k),p()}),o.container.on(i.events.updateTabTitle,".content-pane",function(n,i,r){var o,s=e(this).data().paneId,a=d(s),l=null;if(t.forOwn(P,function(e){l=l||t.remove(e,function(e){return e.tab[0]===a[0]})[0]}),!l){var u=a.filter(".panel-tab-wrapper");l={tab:u,originalSize:u.width()}}i&&(a.find(".tab-title").text(i),a.removeClass("minimal abbreviated"),l.originalSize=a.width()),r&&(a.find(".tab-abbreviated-title").text(r),l.abbreviatedSize=null),l.tab=a,o=t.sortedIndex(P.original,l,"originalSize"),P.original.splice(o,0,l),g()}),v.on("dragleave",function(e){S&&r(v,e.originalEvent.pageX,e.originalEvent.pageY)&&(v.removeClass("dragging"),T=null)}),v.on("dragover",function(e){S&&(I(e),e.preventDefault())}),e(window).resize(t.debounce(g,h))}var s=e("#panel-tab-template"),a=12,l=80,u=150,c=100,h=200;return o.create=function(e){return new o(e)},o}($,_,PANES,biblia),PaneStackBase=function(e,t,n,i,r,o){"use strict";function s(s,a,l){function u(e){var i=0,r=[];t.times(h,function(){r.push("font-size-"+i++)}),f=e,s.removeClass(r.join(" ")),s.addClass("font-size-"+f);try{localStorage.setItem(n.keys.localStorage[a],e)}catch(e){}}var c=this,h=11,f=null;if(!l)throw new Error("Setting object in PaneStackBase must be non-null and non-empty.");this.container=s,this.currentPane=null,this.defaultPanelSettings={numFontNotches:h,defaultFontNotch:4,getFontSize:function(){return f},setFontSize:u},this.getSide=function(){return a},this.getCurrentReference=function(){return this.currentPane&&this.currentPane.getCurrentReference()},this.getCurrentLocation=function(){return this.currentPane&&this.currentPane.getCurrentLocation()},this.getCurrentResourceInfo=function(){return this.currentPane&&this.currentPane.getResourceInfo()},this.getFavoriteInfo=function(){return{side:this.getSide(),resourceInfo:this.getCurrentResourceInfo(),locationMarker:this.getCurrentLocation()}},this.getNavRequestForPane=function(e){var t=e.panelInstance;if(t){if(t.getCurrentPosition)return t.getCurrentPosition();if(t instanceof r)return t.getCurrentNavRequest()}return null},this.hide=function(){t.each(c.getPanes(),function(e){e.setDisplayState(n.paneStates.hidden),e.mute()})},this.unhide=function(){this.currentPane&&(this.currentPane.setDisplayState(n.paneStates.normal),this.currentPane.unmute())},this.stretch=function(){t.each(c.getPanes(),function(e){e.setDisplayState(e===c.currentPane?n.paneStates.expanded:n.paneStates.hidden)})},this.setFullscreen=function(){t.each(c.getPanes(),function(e){e.setDisplayState(e===c.currentPane?n.paneStates.fullscreen:n.paneStates.hidden)})},this.restore=function(){t.each(c.getPanes(),function(e){e.setDisplayState(n.paneStates.normal)})},this.handleLinkRequest=function(e){t.each(this.getPanes(),function(t){var n=t.getResourceInfo();n&&n.supportsBibleRefs&&t.panelInstance.navigateTo(e)})},this.isLinkable=function(){var e=this.getCurrentResourceInfo();return e&&e.supportsBibleRefs};try{f=localStorage.getItem(n.keys.localStorage[a])}catch(e){}null===f&&(f=4),u(f),s.on(n.events.navigationRequest,function(e,t){return t instanceof i&&(t.fontSize=1+.125*(f-4)),!0}),s.on(n.events.syncPosition,function(t,n,i,r){var s=o.buildUrl(n,e.extend({resourceName:i},"SyncWriteReference"==n?{reference:r,pane:c.getSide()}:{},"SyncWriteHeadword"==n?{headword:r,pane:c.getSide()}:{},"SyncWriteOffset"==n?{offset:r,pane:c.getSide()}:{}));s&&e.post(s)}),s.on(n.events.setExpanded,function(e,t){c.updateExpandedStateCallback(t)})}return s.prototype.updateExpandedStateCallback=function(e){this.container.toggleClass("expanded",e)},s.prototype.lazyLoad=function(){},s.prototype.needsLoading=function(){return!1},s.prototype.getPanes=function(){return null},s.prototype.getPrimaryPane=function(){return null},s.prototype.getPaneForResourceName=function(e){var t=this.getCurrentResourceInfo();return t&&t.resourceName===e?this.currentPane:null},s.prototype.currentPaneContains=function(e){return e.length&&this.currentPane.jqContainer.contains(e)},s.prototype.containsElement=function(e){return t.any(this.getPanes(),function(t){return t.jqContainer.contains(e)})},s.prototype.getTitleUrl=function(){return null},s}($,_,biblia,ArticlePopupNavigationRequest,ReadingPlanPanel,ROUTING),LimitedPaneStack=function(e,t,n,i,r,o,s,a){"use strict";function l(l,u,c){function h(e){var i;p.currentPane!==e&&(i=p.currentPane&&p.currentPane.panelInstance&&p.currentPane.panelInstance.paneState,p.currentPane=e,p.currentPane.setDisplayState(i||n.paneStates.normal),p.currentPane.unmute(),t.each(t.without(p.getPanes(),p.currentPane),function(e){e.setDisplayState(n.paneStates.hidden),e.mute()}),l.trigger(n.events.currentPaneChanged,p))}function f(t){var n,s=e(t),a=s.find(".content-chunk, .content-media").first(),l=s.find(".document-content").first(),u=s.filter(".content-body").first();if(a.length){var c=a.data();if(c&&c.resource&&c.resource.resourceName)return new i({resourceName:c.resource.resourceName,type:c.resource.type})}return l.length&&(n=l.data(),"reading-plan"===n.panel)?new r({readingPlanId:n.id}):u.length&&u.hasClass("signin-or-register")?new o:null}function d(e,n){var i=t.first(t.without(p.getPanes(),n)),r=f(e);r?(i.loadContent(e,r),h(i)):log.error("LimitedPaneStack could not load content in either pane. It failed to meet the specified predicate.")}a.call(this,l,u,c);var p=this;if(!c.isNavRequestForPrimaryPane||!t.isFunction(c.isNavRequestForPrimaryPane))throw new Error('Setting "isNavRequestForPrimaryPane" in PaneStackBase must be a function.');this.primaryPane=null,this.closeablePane=null,this.load=function(e,t,n){function i(e){t&&t(e)}var r=c.isNavRequestForPrimaryPane(e)?this.primaryPane:this.closeablePane;r.load(e,i),n||h(r)},function(){function n(e){return c.isNavRequestForPrimaryPane(f(e))}var i=l.find(".content-pane").map(function(t){return s.create(e(this),"resource-pane-"+u.toLowerCase()+"-"+t,d,e.extend({},c.panelSettings,p.defaultPanelSettings))}).get();if(2!==i.length)throw new Error("Invalid number of panes in pane stack.");p.primaryPane=t.find(i,function(e){return c.isNavRequestForPrimaryPane(p.getNavRequestForPane(e))})||t.find(i,function(e){return e&&!e.initialized}),p.closeablePane=t.first(t.without(i,p.primaryPane)),p.primaryPane.setContentAllowedPredicate(n),p.closeablePane.jqContainer.addClass("closeable"),p.closeablePane.setContentAllowedPredicate(function(e){return!n(e)}),h(p.closeablePane.initialized?p.closeablePane:p.primaryPane)}(),l.on(n.events.paneClosed,function(e){p.currentPane===p.closeablePane&&(h(p.primaryPane),l.trigger(n.events.resourceChange,{}),e.stopPropagation())})}return l.prototype=util.extend(a),l.prototype.lazyLoad=function(e,t){this.load(e,t,!0)},l.prototype.needsLoading=function(){return!this.primaryPane.initialized&&!this.primaryPane.isLoading},l.prototype.getPanes=function(){return t.filter([this.primaryPane,this.closeablePane],function(e){return null!==e})},l.prototype.getPrimaryPane=function(){return this.primaryPane},l.prototype.getTitleUrl=function(){return this.currentPane.panelInstance&&this.currentPane.panelInstance.getTitleUrl()},l}($,_,biblia,ResourceNavRequest,ReadingPlanNavRequest,UnauthenticatedSecondaryContentNavRequest,ContentPane,PaneStackBase),PaneStack=function(e,t,n,i,r,o,s){"use strict";function a(e,t,r){n.call(this,e,t,{panelSettings:r,isNavRequestForPrimaryPane:function(e){return e instanceof i}})}return a.prototype=t.extend(n),a.prototype.lazyLoad=function(t,n){var i=this.getPrimaryPane(),a=e("body").data("readingPlanId");this.getSide()!==r.right||user.isAuthenticated?this.load(t,n,!0):i.load(new o),a&&this.load(new s({readingPlanId:a}))},a}($,util,LimitedPaneStack,ResourceNavRequest,PANES,UnauthenticatedSecondaryContentNavRequest,ReadingPlanNavRequest),PaneGroup=function(e){"use strict";function t(t,n,i){this.panes=n,this.displayClass=t,this.history=null,this.isCloseable=function(){return i},this.containsElement=function(t){return e.any(this.panes,function(e){return e.jqContainer.contains(t)})}}return t.prototype.getTitleUrl=function(){throw new Error("Method not implemented.")},t.prototype.getActiveReference=function(){return null},t.prototype.getPrimaryResourceInfo=function(){return null},t.prototype.hasPane=function(t,n){return t&&(n?e.first(this.panes)===t:e.include(this.panes,t))},t.prototype.display=function(){e.each(this.panes,function(e){e.unmute()}),e.each(this.panes,function(e){e.reattachElements()})},t.prototype.hide=function(){e.each(this.panes,function(e){e.mute()}),e.each(this.panes,function(e){e.detachElements()})},t}(_),ResourcePaneGroupBase=function(e,t,n,i,r,o,s,a,l,u,c,h){"use strict";function f(a,l){function u(){return{panesAreLinked:m.panesAreLinked,panesAreLinkable:h()}}function h(){return e.all(m.paneStacks,function(e){return e.isLinkable()})}function f(e){m.panesAreLinked=!!e}function d(t){var n=e.without(m.paneStacks,t);return e.all(n,function(e){return 0===e.getPanes().length})}function p(i,r){var o=e.find(m.paneStacks,function(e){return e.currentPaneContains(t(i.target))}),a=e.without(m.paneStacks,o);m.panesAreLinked&&r.newLocation instanceof n&&!r.bIsLinkChange&&e.each(a,function(e){e.handleLinkRequest(new s({reference:r.newLocation,bIgnoreLinking:!0,preventDefaultFallback:!0}))})}function g(t,n){var r=e.find(m.paneStacks,function(n){return e.any(n.getPanes(),function(e){return e.panelInstance==t})}),o=e.without(m.paneStacks,r);if(r)switch(n){case i.paneStates.normal:r.unhide(),e.each(o,function(e){e.unhide()});break;case i.paneStates.expanded:r.stretch(),e.each(o,function(e){e.hide()});break;case i.paneStates.fullscreen:r.setFullscreen(),e.each(o,function(e){e.hide()})}else log.error("Attempted to resize a panel that does not belong to this pane group.")}var m=this;this.paneStacks=l.find(".content-pane-stack").map(function(e){return new o(t(this),0===e?c.left:c.right,{getLinkState:u,setLinked:f},d)}).get(),r.call(this,a,e.flatten(e.map(this.paneStacks,function(e){return e.getPanes()})),!1),this.panesAreLinked=!1,this.reloadLeftmostBible=function(){var e=this.getLeftmostBiblePane();e&&(e.initialized=!1)},this.getLeftmostBibleInfo=function(){var e=this.getLeftmostBiblePane();return e?e.getResourceInfo():null},t(document).bind(i.events.resizePane,function(e,t,n){g(n,t)}),this.handleLinking=e.debounce(p,300)}return f.prototype=util.extend(r),f.prototype.getPaneStacksNeedingLoading=function(){return e.filter(this.paneStacks,function(e){return e.needsLoading()})},f.prototype.isElementInPrimaryPane=function(e){return this.paneStacks[0].currentPaneContains(e)},f.prototype.getTitleUrl=function(){return this.paneStacks[0].getTitleUrl()},f.prototype.getActiveReference=function(){return e.chain(this.paneStacks).map(function(e){return e.getCurrentReference()}).filter(function(e){return null!==e}).first().value()},f.prototype.getResourceInfos=function(){return e.map(this.paneStacks,function(e){return e.getCurrentResourceInfo()})},f.prototype.getPrimaryResourceInfo=function(){return e.first(e.filter(e.map(this.paneStacks,function(e){return e.getCurrentResourceInfo()}),function(e){return null!==e}))},f.prototype.getBiblePaneStacks=function(t){return e.filter(t,function(e){var t=e.getCurrentResourceInfo();return t&&t.type===h.bible})},f.prototype.getRequestTarget=function(t,n){var i=this.getBiblePaneStacks(n),r=e.difference(n,i),o=null;return t instanceof s?(t.resourceName&&(o=e.find(n,function(e){return e.getCurrentResourceInfo()&&e.getCurrentResourceInfo().resourceName===t.resourceName})),!o&&t.datatype&&"bible"!==t.datatype&&(o=e.find(n,function(n){var i=n.getCurrentResourceInfo();return i&&e.include(i.supportedDataTypes,t.datatype)})),!o&&t.type&&(o=e.find(n,function(e){var n=e.getCurrentResourceInfo();return n&&(n.type===t.type||n.type!==h.bible&&t.type!==h.bible)}))):t instanceof a&&(o=e.last(t.locationRequest?e.without(this.paneStacks,getRequestTarget(t.locationRequest,this.paneStacks)):this.paneStacks)),{paneStack:o||e.first(t instanceof s&&t.isBibleRequest()?i:r)||e.first(n),pane:null}},f.prototype.handleNavRequest=function(t,i){var r,o=e.find(this.paneStacks,function(e){return e.currentPaneContains(i)}),s=e.without(this.paneStacks,o);return!!resourcePaneGroupRequestTypeRegistry.isRegistered(t)&&(!t.type&&t.reference instanceof n&&(t.type=h.bible),r=this.getRequestTarget(t,o&&!t.openInSameSide?s:this.paneStacks),r.paneStack?r.paneStack.load(t,null,!1,r.pane):log.error("No target pane found for navigation request "+t.toUrl()),!0)},f.prototype.lazyLoad=function(n,i,r,o){var a=this.getPaneStacksNeedingLoading();if(0!==a.length){e.any(this.paneStacks,function(e){return e.getPaneForResourceName(i)})?e.each(a,function(e){e.lazyLoad(new s({associated:!0,pane:e.getSide(),reference:n,resourceName:i}))}):function(o){var l=e.without(a,o),u=new s(n||i?{reference:n,resourceName:i}:{defaultAll:!0});t.extend(u,{isPreloading:r}),o.lazyLoad(u,function(t){e.each(l,function(e){e.lazyLoad(new s({associated:!0,pane:e.getSide(),reference:n,resourceName:t.resourceName,isPreloading:r}))})})}(e.find(a,function(e){return e.getSide()===o})||this.paneStacks[0])}},f.prototype.getLinkability=function(){return e.all(this.paneStacks,function(e){return e.isLinkable()})},f.prototype.getLeftmostBiblePane=function(){return e.find(e.map(self.paneStacks,function(e){return e.getPrimaryPane()}),function(e){return e.panelInstance instanceof BiblePanel})||null},f}(_,$,BibleReference,biblia,PaneGroup,PaneStack,ResourceNavRequest,ReadingPlanNavRequest,0,0,PANES,RESOURCE_TYPES),ResourcePaneGroup=function(e,t){"use strict";function n(e,n){t.call(this,e,n)}return n.prototype=e.extend(t),n}(util,ResourcePaneGroupBase),FullsizePaneGroup=function(e,t,n,i,r){"use strict";function o(i,r){e.call(this,i,[t.create(r.find(".content-pane").first(),"fullsize-content-pane")],!0);var o=this;this.pane=this.panes[0],this.pane.jqContainer.bind(n.events.paneTitleUrlChanged,function(e,t){o.currentTitleUrl=t})}return o.prototype=i.extend(e),o.prototype.getTitleUrl=function(){return this.currentTitleUrl},o.prototype.getActiveReference=function(){return this.pane.getCurrentReference()},o.prototype.getPrimaryResourceInfo=function(){return this.pane.getResourceInfo()},o.prototype.handleNavRequest=function(e,t){return!!r.isRegistered(e)&&(this.pane.load(e),!0)},o}(PaneGroup,ContentPane,biblia,util,fullsSizePaneGroupRequestTypeRegistry),LibraryPaneGroup=function(e,t,n){"use strict";function i(e,t,i){n.call(this,e,[ContentPane.create(t.find(".content-pane").first(),"library-pane")],i),this.pane=this.panes[0]}return i.prototype=e.extend(n),i.prototype.handleNavRequest=function(e){return e instanceof t&&(this.pane.initialized||this.pane.load(e),!0)},i.prototype.getTitleUrl=function(){return{title:"Library",url:"/library"}},i}(util,LibraryNavRequest,PaneGroup),PaneManager=function(e,t,n,i,r,o,s){"use strict";function a(a){var l,u,c,h,f=[],d=[];this.getActiveReference=function(){return a.backgroundReference?a.backgroundReference:l.getActiveReference()},this.getCurrentBibleInfo=function(){return u.getLeftmostBibleInfo()},this.getPrimaryResourceInfo=function(){return l.getPrimaryResourceInfo()||u.getPrimaryResourceInfo()},this.getTitleUrl=function(){return l.getTitleUrl()},this.reloadBiblePanes=function(){e.each(u.getBiblePanes(),function(e,t){t.forceLoad()})},this.closeCurPane=function(e){l.isCloseable()&&(this.switchToPaneGroup(d.pop()||u),this.loadLazyContent(),e())},this.loadLazyContent=function(){var e=this.getActiveReference(),t=this.getPrimaryResourceInfo()?this.getPrimaryResourceInfo().resourceName:null,n=l!==u,i=s.left;e&&e.strReference&&-1!==e.strReference.indexOf(";")&&(e=new Reference(e.strReference.split(";")[0])),l instanceof o&&l.pane.panelInstance instanceof ReferencePanel&&(i=l.pane.panelInstance.getPreferredPane()),u.lazyLoad(e,t,n,i)},this.loadNavRequest=function(e,n){var i=t.find(f,function(t){return t.handleNavRequest(n,e)});if(i){if(i!==l){if(l!==c){var r=d.indexOf(l);-1!==r&&d.splice(r,1),d.push(l)}this.switchToPaneGroup(i,!0)}}else log.error("Failed to navigate to "+n.toUrl())},this.switchToPaneGroup=function(i){var r,o=t.without(f,i),s=l.displayClass;l=i,t.each(n.paneGroupClasses,function(e){a.jqContainer.removeClass(e)}),a.jqContainer.addClass(i.displayClass),t.each(o,function(e){e.hide()}),l.display(),a.jqContainer.trigger(n.events.updatePageTitleUrl),r=t.map(l.paneStacks,function(e){return e.getFavoriteInfo()}),e(document).trigger(n.events.updateFavoriteLinks,{favoriteInfos:r}),e(document).trigger(n.events.paneGroupChange,[l.displayClass,s])},this.reloadPreferredBiblePaneIfInactive=function(){l!==u&&(u.reloadLeftmostBible(),this.loadLazyContent())},this.isActivePane=function(e,t){return l.hasPane(e,t)},this.getCurPaneGroupClass=function(){return l.displayClass},this.getResourcePaneGroup=function(){return u},this.isElementInPrimaryPane=function(e){return l===h&&l.containsElement(e)||l===u&&u.isElementInPrimaryPane(e)},u=new i(n.paneGroupClasses.resource,e("#two-pane-reading-container")),c=new r(n.paneGroupClasses.library,e("#library-container"),!0),h=new o(n.paneGroupClasses.contentPage,e("#single-pane-content-container")),f.push(u),f.push(h),f.push(c),l=t.find(f,function(e){return a.jqContainer.hasClass(e.displayClass)}),t.each(t.without(f,l),function(e){e.hide()}),a.jqContainer.bind(n.events.currentPaneChanged,function(i,r){t.contains(l.paneStacks,r)&&e(document).trigger(n.events.updateFavoriteLinks,{favoriteInfos:[r.getFavoriteInfo()]})}),l||log.error("Failure attempting to determine the starting pane group."),a.jqContainer.bind(n.events.paneTitleUrlChanged,function(t){l.containsElement(e(t.target))&&a.jqContainer.trigger(n.events.updatePageTitleUrl)})}return a}($,_,biblia,ResourcePaneGroup,LibraryPaneGroup,FullsizePaneGroup,PANES),SidebarManagerBase=function(e,t,n){"use strict";function i(n,i,r){var o=this,s=r.getCurrentBibleInfo();if(!n||1!==n.length)throw new Error("invalid container");this.container=n,this.paneManager=r,this.tabControllers={},this.curTab=null,this.initTabControllers(s,i),e(document).bind(t.events.primaryResourceChange,function(e,t){s=t}),e(document).bind(t.events.communityNoteSelected,function(e,n){n.bForceFocus&&o.jqTabs.tabs("option","active",t.tabs.notes)}),this.initMainTabs(i)}return i.prototype.initTabControllers=function(e){throw new Error("Must be implemented in child class.")},i.prototype.getStartingTab=function(e){return null},i.prototype.getPaneGroupTabMap=function(){throw new Error("Must be implemented in child class.")},i.prototype.initMainTabs=function(i){var r=this,o=this.getStartingTab(i)||t.tabs.standard;this.container.find(".sidebar-tabs").removeClass("hidden"),this.jqTabs=this.container.on("tabsactivate",function(n,i){var o=e(i.newPanel);for(var s in r.tabControllers)r.tabControllers[s]&&r.tabControllers[s].matches(o)&&(r.curTab=+s,r.container.trigger(t.events.changeTab,+s))}).tabs({active:o,disabled:[],create:function(t,n){var i=e.extend({},t,{type:"tabsactivate"});r.container.trigger(i,{newTab:n.tab,newPanel:n.panel})}}),e(document).bind(t.events.searchRequest,function(){r.jqTabs.tabs("option","active",t.tabs.search)}),n.submitOnEnter(this.container.find("form"))},i.prototype.selectTab=function(e){this.jqTabs.tabs("option","active",e)},i.prototype.getCurrentTab=function(){return this.curTab},i}($,biblia,util),SidebarManager=function(e,t,n,i,r,o,s,a,l){"use strict";function u(e,t,n){r.call(this,e,t,n)}return u.prototype=i.extend(r),u.prototype.initTabControllers=function(t,i){this.tabControllers[n.tabs.home]=new o(e("#sidebar-pane-home"),i),this.tabControllers[n.tabs.library]=new s(e("#sidebar-pane-library")),this.tabControllers[n.tabs.search]=new a(e("#sidebar-pane-search"),e(".tab-title-container .search-picker"),t),this.tabControllers[n.tabs.notes]=new l(e("#sidebar-pane-notes"))},u.prototype.getStartingTab=function(e){return e===n.paneGroupClasses.library?n.tabs.library:null},u.prototype.initMainTabs=function(n){function i(e){s.removeClass(t.values(o).join(" ")),s.addClass(o[e.attr("href")])}var o={"#sidebar-pane-home":"home","#sidebar-pane-library":"library","#sidebar-pane-search":"search","#sidebar-pane-notes":"notes"},s=e("#sidebar .tab-title-container");this.container.bind("tabsactivate",function(t,n){i(e(n.newTab).children("a"))}),r.prototype.initMainTabs.call(this,n),e("#sidebar .ui-tabs-nav a").hover(function(){i(e(this))},function(){i(e(this).closest("ul").find("li.ui-tabs-active:first a"))})},u}($,_,biblia,util,SidebarManagerBase,HomeController,TabController,SearchController,NotesController),TabPaneGroupBinder=function(e,t,n){"use strict";function i(i){this.handleTabChange=function(i,r){i===t.tabs.library&&r!==t.paneGroupClasses.library?e(document).trigger(t.events.navigationRequest,new n):i!==t.tabs.library&&r===t.paneGroupClasses.library&&e(document).trigger(t.events.paneClosed)},this.handlePaneGroupChange=function(e){e===t.paneGroupClasses.library&&i.getCurrentTab()===t.tabs.library&&i.selectTab(t.tabs.home)}}return i}($,biblia,LibraryNavRequest),Lightbox=function(e,t){"use strict";function n(i){function r(t){t.which==e.ui.keyCode.ESCAPE&&(l.hide(),e(document).unbind("keydown",r))}var o=i,s=o.find(".lightbox"),a={},l=this;a[n.displayKinds.wide]="wide",a[n.displayKinds.full]="full",a[n.displayKinds.narrow]="narrow",a[n.displayKinds.verseOfTheDay]="verse-of-the-day",a[n.displayKinds.welcome]="welcome",a[n.displayKinds.register]="register",a[n.displayKinds.normal]="",this.jqLightboxContent=s.find(".lightbox-content"),this.show=function(){o.stop().fadeIn(200),e(document).keydown(r)},this.hide=function(){o.stop().fadeOut(200,function(){l.jqLightboxContent.empty()}),l.jqLightboxContent.trigger(t.events.popupClosed)},this.setDisplay=function(e){s.removeClass(_.keys(a).join(" ")),s.addClass(a[e])},o.click(function(e){e.srcElement==this&&l.hide()}),l.jqLightboxContent.bind(t.events.navigationRequest,function(){return l.hide(),!0}),s.on("click",".x-close, .read-more-link",function(e){l.hide(),e.preventDefault()})}return n.displayKinds={normal:"normal",wide:"wide",narrow:"narrow",full:"full",verseOfTheDay:"verseOfTheDay",welcome:"welcome",register:"register"},n}($,biblia),ResourcePreviewPopup=function(e){"use strict";function t(){}return t.show=function(e,t){t.find(".content-resource-preview").appendTo(e)},t}($),VerseOfTheDayPopup=function(){"use strict";function e(){}return e.show=function(e,t){t.children().appendTo(e)},e}(),ArticlePopup=function(e,t,n,i,r){"use strict";function o(o,s,a){var l=this;o.tooltip({containerClass:"lightbox-tooltip",selector:".resourcetext a:not([data-external-link])",fnClickStick:function(e){return e.is('[rel="popup"]')},onLinkClick:function(t){return l.onLinkClick(e(t.target).closest("a"))},fnGetContent:function(e,o){function l(e){return n.addUrlParameter(e,"dynamicTextSource",a)}var u,c=e.data();e.is('[rel="popup"]')?o(c.content||t.resourcestrings.tooltipError):(u=i.getForMetadata(c),u?!u.resourceName&&u.reference instanceof r?(u.resourceName=a,contentTooltipUtility.fetchTooltipContent(u,s,o,l)):contentTooltipUtility.fetchTooltipContent(u,s,o,l):o(t.resourcestrings.tooltipError))}}),o.bind(t.events.popupClosed,function(){o.tooltip(null,"destroy")})}return o.prototype.onLinkClick=function(){throw new Error("onLinkClick must be implemented by the concrete class.")},o}($,biblia,util,ResourceNavRequest,BibleReference),MediaArticlePopup=function(e,t,n,i,r,o,s){"use strict";function a(a,l,u){function c(t,n){var r,o,s,a,l=function(){if(r){var e=i.scaleDimensionsToFit(s,a,p.width(),p.height());o.css({width:e.width}),r.css({width:e.width,height:e.height})}};return i.lazyLoadImage({src:t.path},function(){r=e(this),s=r[0].width,a=r[0].height,n.find(".media-placeholder").replaceWith(r),r.wrap(e('<a target="_blank" class="full-image-link" />').attr("href",r.attr("src"))),o=r.parent(),l(),n.find(".media-ajax-loading").hide()}),l}function h(n,r,o,s){var a,l="video"+Math.floor(1e9*Math.random()),u=function(){if(a){var e=i.scaleDimensionsToFit(o,s,p.width(),p.closest(".resource-content").height());a.size(e.width,e.height)}};return e("head #videojscss").length||e('<link href="//vjs.zencdn.net/c/video-js.css" rel="stylesheet" id="videojscss" />').appendTo("head"),t.script("//vjs.zencdn.net/c/video.js").wait(function(){var t=e("<video />",{id:l,class:"video-js vjs-default-skin media-video"});r.find(".media-placeholder").replaceWith(t),r.find(".media-ajax-loading").hide(),_V_(l,{controls:!0,poster:n.thumbnailPath,preload:"auto"},function(){a=this,u(),a.src({type:"video/mp4",src:n.path})})}),u}function f(t){!b&&t.length&&(b=!0,e.ajax({url:i.addUrlParameter(t.attr("href"),"contentType","xhtml"),success:function(n){var r=R.jqResourceContent,o=e(n),s=R.jqResourceContent.clone().empty().append(o).appendTo(m);i.slide(R.jqResourceContent,s,t.hasClass("media-nav-left")?"right":"left",function(){r.remove()}),R.jqResourceContent=s,g.find(".media-nav-left, .media-nav-right").remove(),R.init(o),b=!1},error:function(){R.jqContainer.trigger(n.events.info,{nLevel:e.fn.infobar.levels.error,strMsg:n.resourcestrings.resourceChangeError}),b=!1}}))}function d(t){t.which!==e.ui.keyCode.LEFT&&t.which!==e.ui.keyCode.RIGHT||f(g.find(".media-nav-"+(t.which===e.ui.keyCode.LEFT?"left":"right")))}o.call(this,a,l.resourceName,u);var p,g,m=e("#media-article-popup").clone().attr("id","").appendTo(a),v=m.find("span.title"),b=!1,y=new r(m.find(".share-button"),{strBtnPos:"right bottom",strPnlPos:"right top"}),R=this;this.jqContainer=a,this.jqResourceContent=m.find(".resource-content"),this.init=function(t){var i,r=t.data(),o=r.media;if(g=t,p=t.find(".media-display-section"),v.html(o.title),o.kind===MEDIA_KINDS.image)i=c(o.image,t);else{if(o.kind!==MEDIA_KINDS.video)throw new Error("Unknown media kind",o);i=h(o.video,t,o.width,o.height)}y.setShareInfo(s.createFromArticle(r.articleid,r.resource.resourceName,r.resource.type),r.resource,!1,r.media.title),t.find("a.media-nav").click(function(){var t=p.find("video");return t&&t.player&&t.player().pause(),f(e(this)),!1}),e(window).resize(function(){i&&i()}),a.bind(n.events.popupClosed,function(t){y.jqButton.dropdown("clickHidePanel",t),e(document).off("keydown",d)})},this.jqResourceContent.css("font-size",l.fontSize+"em"),e(document).on("keydown",d)}return a.prototype=i.extend(o),a.prototype.onLinkClick=function(e){var t=ResourceNavRequest.getForMetadata(e.data());return!t||(this.jqContainer.trigger(n.events.navigationRequest,t),!1)},a.createAjaxLoaded=function(t,i,r){var o=new a(t,i,r);return e.ajax(i.toUrl(),{success:function(t){var n=e(t);o.jqResourceContent.empty().append(n),o.init(n)},error:function(){t.trigger(n.events.info,{nLevel:e.fn.infobar.levels.error,strMsg:n.resourcestrings.resourceChangeError})}}),o},a.createPreloaded=function(e,t,n){var i=n.find(".content-media"),r=i.data(),o=new a(e,s.createFromOffset(r.articleid,r.resource.resourceName,RESOURCE_TYPES.media),t);return o.jqResourceContent.empty().append(i),o.init(i),o},a}($,$LAB,biblia,util,ShareButton,ArticlePopup,ArticlePopupNavigationRequest),SidebarArticlePopup=function(e,t,n,i,r,o,s){"use strict";function a(t,i,r){n.call(this,t,i.resourceName,r);var o=this;this.jqContainer=t,this.fontSize=i.fontSize,(this.updateArticle=function(n){o.jqContainer.html('<div class="article-popup-loading">'+Resources.Common.getString("LoadingEllipsis")+"</div>"),e.ajax(n.toUrl(),{success:function(i){var r=e(i);r.css("font-size",n.fontSize+"em"),o.jqContainer.empty(),e('<div class="resource-content sidebar-content"></div>').appendTo(t).append(r),r.find(".resourcetext p").first().css({"margin-top":0})},error:function(){o.jqContainer.html("<div>"+Resources.FrontEnd.getString("ErrorRetrievingContent")+"</div>")}})})(i)}return a.prototype=t.extend(n),a.isSidebarArticleLink=function(e){var t=e.data("articleId");return t&&(0==t.indexOf("SIDEBAR")||0==t.indexOf("TABLE"))},a.prototype.onLinkClick=function(e){var t,n=e.data();return!!e.is('[rel="popup"]')||(a.isSidebarArticleLink(e)?(t=r.createFromArticle(n.articleid,n.resourcename),t.fontSize=this.fontSize,this.updateArticle(t),!1):n.resourcetype===o.media||n.resourcetype==o.biblicalPlacesMaps?(t=r.createFromArticle(n.articleid,n.resourcename,n.resourcetype),this.jqContainer.trigger(s.events.navigationRequest,t).trigger(s.events.popupClosed),!1):!(t=i.getForMetadata(n))||(t.bIsUserInitiated=!0,this.jqContainer.trigger(s.events.navigationRequest,t).trigger(s.events.popupClosed),!1))},a}($,util,ArticlePopup,ResourceNavRequest,ArticlePopupNavigationRequest,RESOURCE_TYPES,biblia),Application=function(e,t,n,i,r,o,s,a,l,u,c,h,f,d,p){"use strict";function g(g){function m(){var e=v.paneManager.getTitleUrl();e&&v.setHistoryStateSoon(e.title,e.url)}var v=this,b=!(!window.history||!window.history.pushState),y=e("#lightbox-dim"),R=e("#preloaded-media-article-lightbox"),C=e("#unauthorized-resource-preview-lightbox"),w=e("#verse-of-the-day-lightbox"),x=e("#welcome-lightbox"),k=e("#register-lightbox");console.log("If you're reading this we'd love to chat with you. Visit https://www.logos.com/jobs."),this.jqInfobar=e("#infobar").infobar(),this.configure(!!g),i.init(),n.signin.setOnDisplaySignin(function(){v.jqInfobar.infobar("hideBar")}),this.jqContent=e("#content-container"),this.lastTabTitles={},
this.paneManager=new o({jqContainer:this.jqContent,backgroundReference:e("body").data("backgroundReference")||null}),this.sidebar=new s(e("#sidebar-offset > .ui-tabs").first(),e("#content-container").attr("class"),this.paneManager),this.tabPaneGroupBinder=new a(this.sidebar),this.lightbox=new l(y),w.length&&(this.lightbox.setDisplay(l.displayKinds.verseOfTheDay),this.lightbox.show(),u.show(this.lightbox.jqLightboxContent,w)),x.length&&(this.lightbox.setDisplay(l.displayKinds.welcome),this.lightbox.show(),u.show(this.lightbox.jqLightboxContent,x)),k.length&&(this.lightbox.setDisplay(l.displayKinds.register),this.lightbox.show(),u.show(this.lightbox.jqLightboxContent,k)),C.length&&(this.lightbox.setDisplay(l.displayKinds.normal),this.lightbox.show(),c.show(this.lightbox.jqLightboxContent,C)),R.length&&(this.lightbox.setDisplay(l.displayKinds.full),this.lightbox.show(),h.createPreloaded(this.lightbox.jqLightboxContent,v.primaryBibleResource&&v.primaryBibleResource.resourceName,R));var S=function(e){var t=n.config.tenantDisplayName;return e&&(t=[e,t].join(" - ")),t},T=function(e,t){var n;b&&t&&window.history.replaceState(null,"",t),e&&(n=S(e),document.title=n)};this.setHistoryStateSoon=t.debounce(T,200),function(i){function r(t){var n=v.paneManager.getCurrentBibleInfo();return!t.resourceName||n&&t.resourceName==n.resourceName?(t.removeDefaults(),e.extend({},new d(n),t)):(t.reference||t.indexedOffset||t.type!=RESOURCE_TYPES.bible||(t.reference=v.activeReference),t)}e("body").delegate("a","click",function(t){"#"==e(this).attr("href")&&t.preventDefault()}),i.bind(n.events.navigationRequest,function(t,n){var i,r;n instanceof p?(i=v.paneManager.getCurrentBibleInfo(),r=i&&i.resourceName,v.lightbox.show(),!n.type||0!==n.type.indexOf(RESOURCE_TYPES.media)&&n.type!==RESOURCE_TYPES.biblicalPlacesMaps?(v.lightbox.setDisplay(l.displayKinds.wide),v.lightbox.jqLightboxContent.empty(),new f(v.lightbox.jqLightboxContent,n,r)):(v.lightbox.setDisplay(l.displayKinds.full),v.lightbox.jqLightboxContent.empty(),h.createAjaxLoaded(v.lightbox.jqLightboxContent,n,r))):v.paneManager.loadNavRequest(t.target&&e(t.target).closest(".content-pane"),n)}),i.bind(n.events.reloadBibles,function(){v.paneManager.reloadBiblePanes()}),i.bind(n.events.paneClosed,function(){v.paneManager.closeCurPane(function(){m()})}),i.bind(n.events.lazyLoad,function(){v.paneManager.loadLazyContent()}),i.bind(n.events.locationMarkerChange,function(e,t){log.log("received reference change request",t),m(),v.paneManager.getResourcePaneGroup().handleLinking(e,t)}),i.bind(n.events.obtainLeftPaneBible,function(e,t){var n=v.paneManager.getCurrentBibleInfo();n=n?n.resourceName:"esv",t(n)}),i.bind(n.events.informationRequest,function(e,t){var n=t[0],i=t[1];v.paneManager.getCurrentBibleInfo()?(n.removeDefaults(),i(r(n))):i(n)}),i.bind(n.events.openResourceRequest,function(e,n){var i=v.paneManager.getPrimaryResourceInfo(),r=function(){var e=[],t={};return{add:function(n){t[n.resourceName]||(e.push(n),t[n.resourceName]=!0)},toList:function(){return e}}}();i&&r.add(i),t.each(v.paneManager.getResourcePaneGroup().getResourceInfos(),function(e){e&&e.resourceName&&r.add(e)}),t.isFunction(n)&&n(r.toList())}),i.bind(n.events.changeTab,function(e,t){v.tabPaneGroupBinder.handleTabChange(t,v.paneManager.getCurPaneGroupClass())}),i.bind(n.events.paneGroupChange,function(t,i,r){v.tabPaneGroupBinder.handlePaneGroupChange(r),r===n.paneGroupClasses.library&&e(document).trigger(n.events.primaryResourceChange,v.paneManager.getPrimaryResourceInfo())}),i.delegate("a","click",function(t){var r=e(t.target),o=r.attr("href");if(/(.*biblia\.com\/content.*)|(^\/content.*)/.test((o||"").toLowerCase())||r.hasClass("content")){t.preventDefault();var s=new ContentPageNavRequest({url:o});i.trigger(n.events.navigationRequest,s)}}),i.bind(n.events.resourceChange,function(t,i){i.newResource&&i.newResource.type==RESOURCE_TYPES.bible&&e(document).trigger(n.events.dynamicSourceChange,v.paneManager.getCurrentBibleInfo()),v.eventOriginatedInPrimaryPane(t)&&(e(document).trigger(n.events.primaryResourceChange,i.newResource),m(),i.newResource&&i.oldResource&&v.paneManager.reloadPreferredBiblePaneIfInactive())}),i.bind(n.events.updatePageTitleUrl,m),i.bind(n.events.info,function(e,t){v.jqInfobar.infobar("showBar",t.nLevel,t.strMsg,t.strSubMsg,t.nCloseSecs,t.strCookieName)}),i.ajaxError(function(t,n){401===n.status&&e.ajax({url:"/User/SignOut",type:"POST",success:function(){window.location.href=window.location.href.replace(/^(.*\.com).*/,"$1/User/SignIn?isReauthentication=true")}})})}(e(document)),r.setUpSocialMediaPlugins(),setTimeout(function(){v.paneManager.loadLazyContent()},100)}return g.prototype.setPrimaryBibleResource=function(t){this.primaryBibleResource!==t&&(this.primaryBibleResource=t,e(document).trigger(n.events.dynamicSourceChange,this.primaryBibleResource))},g.prototype.eventOriginatedInPrimaryPane=function(t){var n=e(t.target);return!!n&&this.paneManager.isElementInPrimaryPane(n)},g.prototype.configure=function(e){e||log.setLevel(0)},g}($,_,biblia,ui,util,PaneManager,SidebarManager,TabPaneGroupBinder,Lightbox,VerseOfTheDayPopup,ResourcePreviewPopup,MediaArticlePopup,SidebarArticlePopup,ResourceNavRequest,ArticlePopupNavigationRequest),Highlighter=function(e,t){"use strict";function n(n){this.jqContainer=e(n),this.highlightBar=this.jqContainer.children(".highlight-bar"),this.elStart=null,this.jqHighlightBase=e("<div></div>",{css:{height:"0",overflow:"visible"}}),this.jqHighlightBase.prependTo(this.jqContainer),0===this.highlightBar.length&&(this.highlightBar=e('<div class="highlight-bar" />').appendTo(this.jqHighlightBase)),t.update(this.jqHighlightBase),this.complete=!0}return n.prototype.getSpacerElements=function(t,n,i){for(var r=Math.floor(t/n),o=t%n,s=e("<div></div>").addClass(i),a=e([]),l=0,u=r+1;l<u;l++){var c=l==r?o:n,h=s.clone();h.height(c),a=a.add(h[0])}return a},n.prototype.setHighlightTop=function(e){var t=this.getSpacerElements(Math.round(e),1e6,"highlight-spacing");this.jqHighlightBase.children(".highlight-spacing").remove(),t.prependTo(this.jqHighlightBase)},n.prototype.highlight=function(e,t){var n,i,r,o,s,a,l,u,c,h=this.jqContainer.find(".content-wrapper").first().position().top,f=e.render(),d=h;if(log.group("highlighter"),log.time("highlight"),log.debug("highlighting: ",e," - ",t),null===e.chapter||null===e.verse)return void this.highlightBar.hide();for(n=this.jqContainer.find("a[rel='milestone']"),t||(t=e),this.refStart=e,this.refEnd=t,this.complete=!1,l=0,u=n.length;l<u;l++)if(r=n.eq(l),(o=BibleReference.tryParse(r.data("reference")))&&(!s&&(o.equals(e)||null===e.verse&&0===o.compareTo(e))&&(s=r),o.compareTo(t)>0)){a=r,this.complete=!0;break}if(n.length){if(!s){var p=BibleReference.tryParse(n.first().data("reference"));p&&e.compareTo(p)<0&&(s=n.first())}a||(a=r)}if(s&&a){var g,m=s.iposition();if(o&&o.compareTo(t)<=0?(a=a.parent(),a.position()):g=a.iposition(),!m||!g)return void this.highlightBar.hide();i=h+m.top,m.left>=s.closest("p").first().width()-2&&(i+=s.height());var v=g.left;s.closest("p").get(0)!=a.closest("p").get(0)&&v<32?d+=a.parent().position().top:d+=v<32?g.top:g.top+a.height(),e.equals(t)||(f+=" - "+t.render()),c=Math.max(d-i+4,20),this.highlightBar.css({position:"absolute",height:Math.round(c)+"px",display:"block"}).attr("title",f),this.setHighlightTop(i)}else this.highlightBar.hide();log.timeEnd("highlight"),log.groupEnd("highlighter")},n.prototype.unhighlight=function(){this.refStart=null,this.refEnd=null,this.highlightBar.hide(),this.elStart=null},n.prototype.update=function(){if(this.refStart&&this.refEnd){if(null!==this.elStart&&this.elStart.length&&this.elStart.isInDocument()){var e=this.jqContainer.find(".content-wrapper").first().data("top");this.setHighlightTop(e+this.elStart.iposition().top)}else this.elStart=null,this.highlight(this.refStart,this.refEnd);return!0}return!1},n}($,ui),AjaxLoadNotifier=function(){"use strict";function e(e){this.jqLoading=e,this.displayTimeout=null}return e.prototype.show=function(){var e=this;clearTimeout(this.displayTimeout),this.displayTimeout=setTimeout(function(){e.jqLoading.show()},80)},e.prototype.hide=function(){clearTimeout(this.displayTimeout),this.jqLoading.hide()},e}(),ResourceProvider=function(e){"use strict";function t(){return{resourceType:"text.monograph.bible",references:[]}}function n(){return{resourceContext:t()}}function i(e,i){e||(e=n()),e.getExternallySourcedResources?this.getExternallySourcedResources=e.getExternallySourcedResources:(this.resourceContext=_.extend(t(),e.resourceContext),this.onAvailableResourcesUpdated=e.onAvailableResourcesUpdated,this.availableResources=[],this.previousUrl=null,this.previousData=null,this.updateContext(null,i))}function r(t,n,i){var r=t.references?{references:(t.references.map(function(e){return e instanceof Reference?e.toUrlSafeString():e})||[]).join(";")}:{},o=_.extend({},t,r),s=ROUTING.buildUrl("GetBooksForMilestones",o);s?i.previousUrl===s&&i.previousData?n(i.previousData):e.ajax({url:s,success:function(e){i.previousUrl=s,i.previousData=e,n(e)},error:function(){n(null)}}):n(null)}var o={needsUpdate:0,pendingUpdate:1,updated:2};return i.prototype._updateAvailableResources=function(e){var t=this;this.availableResourcesState=o.pendingUpdate,r(this.resourceContext,function(n){n&&(t.availableResources=n.resources,t.availableResourcesState!==o.needsUpdate&&(t.availableResourcesState=o.updated),t.onAvailableResourcesUpdated&&t.onAvailableResourcesUpdated(n.resources)),e&&e(t.availableResources)},this)},i.prototype._getAvailableResources=function(e){this.getExternallySourcedResources?e(this.getExternallySourcedResources()):this.availableResourcesState===o.needsUpdate?this._updateAvailableResources(e):e(this.availableResources)},i.prototype.getResources=function(e,t){var n=e.toLowerCase();this._getAvailableResources(function(e){var i=_(e).filter(function(e){return _.includes(e.abbreviatedTitle.toLowerCase(),n)||_.includes(e.title.toLowerCase(),n)}).value();t(i)})},i.prototype.updateContext=function(e,t){this.resourceContext=_.extend(this.resourceContext,e),t?this._updateAvailableResources():this.availableResourcesState=o.needsUpdate},i}($);!function(e){e.smartbanner({title:"Bible",author:"Logos Bible Software",icon:"/public/images/smartbanner/BibleIcon.jpg",daysHidden:0,daysReminder:0})}($);
//# sourceMappingURL=biblia-desktop.f972e09f.js.map